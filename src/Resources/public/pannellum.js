// Pannellum 2.3.2, https://github.com/mpetroff/pannellum
window.libpannellum=function(I,f,n){function ea(R){function Ma(a,d){return 1==a.level&&1!=d.level?-1:1==d.level&&1!=a.level?1:d.timestamp-a.timestamp}function W(a,d){return a.level!=d.level?a.level-d.level:a.diff-d.diff}function S(a,d,e,f,m,b){this.vertices=a;this.side=d;this.level=e;this.x=f;this.y=m;this.path=b.replace("%s",d).replace("%l",e).replace("%x",f).replace("%y",m)}function za(a,d,f,n,m){var b;var g=d.vertices;b=ga(a,g.slice(0,3));var h=ga(a,g.slice(3,6)),w=ga(a,g.slice(6,9)),g=ga(a,g.slice(9,
12)),z=b[0]+h[0]+w[0]+g[0];-4==z||4==z?b=!1:(z=b[1]+h[1]+w[1]+g[1],b=-4==z||4==z?!1:4!=b[2]+h[2]+w[2]+g[2]);if(b){b=d.vertices;h=b[0]+b[3]+b[6]+b[9];w=b[1]+b[4]+b[7]+b[10];g=b[2]+b[5]+b[8]+b[11];z=Math.sqrt(h*h+w*w+g*g);g=Math.asin(g/z);h=Math.atan2(w,h)-n;h+=h>Math.PI?-2*Math.PI:h<-Math.PI?2*Math.PI:0;h=Math.abs(h);d.diff=Math.acos(Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos(h));h=!1;for(w=0;w<e.nodeCache.length;w++)if(e.nodeCache[w].path==d.path){h=!0;e.nodeCache[w].timestamp=e.nodeCacheTimestamp++;
e.nodeCache[w].diff=d.diff;e.currentNodes.push(e.nodeCache[w]);break}h||(d.timestamp=e.nodeCacheTimestamp++,e.currentNodes.push(d),e.nodeCache.push(d));if(d.level<e.level){var g=s.cubeResolution*Math.pow(2,d.level-s.maxLevel),h=Math.ceil(g*s.invTileResolution)-1,w=g%s.tileResolution*2,x=2*g%s.tileResolution;0===x&&(x=s.tileResolution);0===w&&(w=2*s.tileResolution);z=0.5;if(d.x==h||d.y==h)z=1-s.tileResolution/(s.tileResolution+x);var r=1-z,g=[],t=z,N=z,E=z,M=r,y=r,A=r;if(x<s.tileResolution)if(d.x==
h&&d.y!=h){if(y=N=0.5,"d"==d.side||"u"==d.side)A=E=0.5}else d.x!=h&&d.y==h&&(M=t=0.5,"l"==d.side||"r"==d.side)&&(A=E=0.5);w<=s.tileResolution&&(d.x==h&&(t=0,M=1,"l"==d.side||"r"==d.side)&&(E=0,A=1),d.y==h&&(N=0,y=1,"d"==d.side||"u"==d.side)&&(E=0,A=1));x=[b[0],b[1],b[2],b[0]*t+b[3]*M,b[1]*z+b[4]*r,b[2]*E+b[5]*A,b[0]*t+b[6]*M,b[1]*N+b[7]*y,b[2]*E+b[8]*A,b[0]*z+b[9]*r,b[1]*N+b[10]*y,b[2]*E+b[11]*A];x=new S(x,d.side,d.level+1,2*d.x,2*d.y,s.fullpath);g.push(x);d.x==h&&w<=s.tileResolution||(x=[b[0]*t+
b[3]*M,b[1]*z+b[4]*r,b[2]*E+b[5]*A,b[3],b[4],b[5],b[3]*z+b[6]*r,b[4]*N+b[7]*y,b[5]*E+b[8]*A,b[0]*t+b[6]*M,b[1]*N+b[7]*y,b[2]*E+b[8]*A],x=new S(x,d.side,d.level+1,2*d.x+1,2*d.y,s.fullpath),g.push(x));d.x==h&&w<=s.tileResolution||d.y==h&&w<=s.tileResolution||(x=[b[0]*t+b[6]*M,b[1]*N+b[7]*y,b[2]*E+b[8]*A,b[3]*z+b[6]*r,b[4]*N+b[7]*y,b[5]*E+b[8]*A,b[6],b[7],b[8],b[9]*t+b[6]*M,b[10]*z+b[7]*r,b[11]*E+b[8]*A],x=new S(x,d.side,d.level+1,2*d.x+1,2*d.y+1,s.fullpath),g.push(x));d.y==h&&w<=s.tileResolution||(x=
[b[0]*z+b[9]*r,b[1]*N+b[10]*y,b[2]*E+b[11]*A,b[0]*t+b[6]*M,b[1]*N+b[7]*y,b[2]*E+b[8]*A,b[9]*t+b[6]*M,b[10]*z+b[7]*r,b[11]*E+b[8]*A,b[9],b[10],b[11]],x=new S(x,d.side,d.level+1,2*d.x,2*d.y+1,s.fullpath),g.push(x));for(d=0;d<g.length;d++)za(a,g[d],f,n,m)}}}function Aa(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function ka(a,d,e){var f=Math.sin(d);d=Math.cos(d);
if("x"==e)return[a[0],d*a[1]+f*a[2],d*a[2]-f*a[1],a[3],d*a[4]+f*a[5],d*a[5]-f*a[4],a[6],d*a[7]+f*a[8],d*a[8]-f*a[7]];if("y"==e)return[d*a[0]-f*a[2],a[1],d*a[2]+f*a[0],d*a[3]-f*a[5],a[4],d*a[5]+f*a[3],d*a[6]-f*a[8],a[7],d*a[8]+f*a[6]];if("z"==e)return[d*a[0]+f*a[1],d*a[1]-f*a[0],a[2],d*a[3]+f*a[4],d*a[4]-f*a[3],a[5],d*a[6]+f*a[7],d*a[7]-f*a[6],a[8]]}function Ba(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}function qa(a){a.textureLoad||(a.textureLoad=
!0,ea(encodeURI(a.path+"."+s.extension),function(d){a.texture=d;a.textureLoaded=!0},la.crossOrigin))}function ga(a,d){var e=[a[0]*d[0]+a[1]*d[1]+a[2]*d[2],a[4]*d[0]+a[5]*d[1]+a[6]*d[2],a[11]+a[8]*d[0]+a[9]*d[1]+a[10]*d[2],1/(a[12]*d[0]+a[13]*d[1]+a[14]*d[2])],f=e[0]*e[3],m=e[1]*e[3],e=e[2]*e[3],b=[0,0,0];-1>f&&(b[0]=-1);1<f&&(b[0]=1);-1>m&&(b[1]=-1);1<m&&(b[1]=1);if(-1>e||1<e)b[2]=1;return b}function ra(){console.log("Reducing canvas size due to error 1286!");y.width=Math.round(y.width/2);y.height=
Math.round(y.height/2)}var y=f.createElement("canvas");y.style.width=y.style.height="100%";R.appendChild(y);var e,a,O,P,Ca,T,sa,ba,s,D,ma,F,ca,ta,Z,la;this.init=function(k,d,Na,fa,m,b,g,h){d===n&&(d="equirectangular");if("equirectangular"!=d&&"cubemap"!=d&&"multires"!=d)throw console.log("Error: invalid image type specified!"),{type:"config error"};D=d;s=k;ma=Na;la=h||{};if(e){O&&(a.detachShader(e,O),a.deleteShader(O));P&&(a.detachShader(e,P),a.deleteShader(P));a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
null);e.texture&&a.deleteTexture(e.texture);if(e.nodeCache)for(k=0;k<e.nodeCache.length;k++)a.deleteTexture(e.nodeCache[k].texture);a.deleteProgram(e);e=n}ba=n;"cubemap"==D&&0!==(s[0].width&s[0].width-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(a||(a=y.getContext("experimental-webgl",
{alpha:!1,depth:!1})),a&&1286==a.getError()&&ra());if(!a&&("multires"==D&&s.hasOwnProperty("fallbackPath")||"cubemap"==D)&&("WebkitAppearance"in f.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){T&&R.removeChild(T);T=f.createElement("div");T.className="pnlm-world";fa=s.basePath?s.basePath+s.fallbackPath:s.fallbackPath;var w="frblud".split(""),z=0;m=function(){var a=f.createElement("canvas");a.className="pnlm-face pnlm-"+w[this.side]+
"face";T.appendChild(a);var b=a.getContext("2d");a.style.width=this.width+4+"px";a.style.height=this.height+4+"px";a.width=this.width+4;a.height=this.height+4;b.drawImage(this,2,2);var d=b.getImageData(0,0,a.width,a.height),e=d.data,k,h;for(k=2;k<a.width-2;k++)for(h=0;4>h;h++)e[4*(k+a.width)+h]=e[4*(k+2*a.width)+h],e[4*(k+a.width*(a.height-2))+h]=e[4*(k+a.width*(a.height-3))+h];for(k=2;k<a.height-2;k++)for(h=0;4>h;h++)e[4*(k*a.width+1)+h]=e[4*(k*a.width+2)+h],e[4*((k+1)*a.width-2)+h]=e[4*((k+1)*a.width-
3)+h];for(h=0;4>h;h++)e[4*(a.width+1)+h]=e[4*(2*a.width+2)+h],e[4*(2*a.width-2)+h]=e[4*(3*a.width-3)+h],e[4*(a.width*(a.height-2)+1)+h]=e[4*(a.width*(a.height-3)+2)+h],e[4*(a.width*(a.height-1)-2)+h]=e[4*(a.width*(a.height-2)-3)+h];for(k=1;k<a.width-1;k++)for(h=0;4>h;h++)e[4*k+h]=e[4*(k+a.width)+h],e[4*(k+a.width*(a.height-1))+h]=e[4*(k+a.width*(a.height-2))+h];for(k=1;k<a.height-1;k++)for(h=0;4>h;h++)e[k*a.width*4+h]=e[4*(k*a.width+1)+h],e[4*((k+1)*a.width-1)+h]=e[4*((k+1)*a.width-2)+h];for(h=0;4>
h;h++)e[h]=e[4*(a.width+1)+h],e[4*(a.width-1)+h]=e[4*(2*a.width-2)+h],e[a.width*(a.height-1)*4+h]=e[4*(a.width*(a.height-2)+1)+h],e[4*(a.width*a.height-1)+h]=e[4*(a.width*(a.height-1)-2)+h];b.putImageData(d,0,0);z++;6==z&&(Ca=this.width,R.appendChild(T),g())};for(k=0;6>k;k++)b=new Image,b.crossOrigin=la.crossOrigin?la.crossOrigin:"anonymous",b.side=k,b.onload=m,b.src="multires"==D?encodeURI(fa.replace("%s",w[k])+"."+s.extension):encodeURI(s[k].src)}else{if(!a)throw console.log("Error: no WebGL support detected!"),
{type:"no webgl"};s.fullpath=s.basePath?s.basePath+s.path:s.path;s.invTileResolution=1/s.tileResolution;d=Aa();sa=[];for(k=0;6>k;k++)sa[k]=d.slice(12*k,12*k+12),d=Aa();if("equirectangular"==D){if(k=Math.max(s.width,s.height),d=a.getParameter(a.MAX_TEXTURE_SIZE),k>d)throw console.log("Error: The image is too big; it's "+k+"px wide, but this device's maximum supported width is "+d+"px."),{type:"webgl size error",width:k,maxWidth:d};}else if("cubemap"==D&&(k=s[0].width,d=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),
k>d))throw console.log("Error: The cube face image is too big; it's "+k+"px wide, but this device's maximum supported width is "+d+"px."),{type:"webgl size error",width:k,maxWidth:d};h===n||h.horizonPitch===n&&h.horizonRoll===n||(ba=[h.horizonPitch==n?0:h.horizonPitch,h.horizonRoll==n?0:h.horizonRoll]);k=a.TEXTURE_2D;a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);O=a.createShader(a.VERTEX_SHADER);d=r;"multires"==D&&(d=t);a.shaderSource(O,d);a.compileShader(O);P=a.createShader(a.FRAGMENT_SHADER);
d=Ia;"cubemap"==D?(k=a.TEXTURE_CUBE_MAP,d=$a):"multires"==D&&(d=na);a.shaderSource(P,d);a.compileShader(P);e=a.createProgram();a.attachShader(e,O);a.attachShader(e,P);a.linkProgram(e);a.getShaderParameter(O,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(O));a.getShaderParameter(P,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(P));a.getProgramParameter(e,a.LINK_STATUS)||console.log(a.getProgramInfoLog(e));a.useProgram(e);e.drawInProgress=!1;e.texCoordLocation=a.getAttribLocation(e,"a_texCoord");
a.enableVertexAttribArray(e.texCoordLocation);"multires"!=D?(F||(F=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,F),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW),a.vertexAttribPointer(e.texCoordLocation,2,a.FLOAT,!1,0,0),e.aspectRatio=a.getUniformLocation(e,"u_aspectRatio"),a.uniform1f(e.aspectRatio,a.drawingBufferWidth/a.drawingBufferHeight),e.psi=a.getUniformLocation(e,"u_psi"),e.theta=a.getUniformLocation(e,"u_theta"),e.f=a.getUniformLocation(e,"u_f"),
e.h=a.getUniformLocation(e,"u_h"),e.v=a.getUniformLocation(e,"u_v"),e.vo=a.getUniformLocation(e,"u_vo"),e.rot=a.getUniformLocation(e,"u_rot"),a.uniform1f(e.h,fa/(2*Math.PI)),a.uniform1f(e.v,m/Math.PI),a.uniform1f(e.vo,b/Math.PI*2),"equirectangular"==D&&(e.backgroundColor=a.getUniformLocation(e,"u_backgroundColor"),a.uniform4fv(e.backgroundColor,(h.backgroundColor?h.backgroundColor:[0,0,0]).concat([1]))),e.texture=a.createTexture(),a.bindTexture(k,e.texture),"cubemap"==D?(a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,
0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[1]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[3]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[4]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[5]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[0]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[2])):a.texImage2D(k,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s),a.texParameteri(k,a.TEXTURE_WRAP_S,
a.CLAMP_TO_EDGE),a.texParameteri(k,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(k,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(k,a.TEXTURE_MAG_FILTER,a.LINEAR)):(e.vertPosLocation=a.getAttribLocation(e,"a_vertCoord"),a.enableVertexAttribArray(e.vertPosLocation),ca||(ca=a.createBuffer()),ta||(ta=a.createBuffer()),Z||(Z=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,ta),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Z),a.bufferData(a.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2,0,2,3]),a.STATIC_DRAW),e.perspUniform=a.getUniformLocation(e,"u_perspMatrix"),e.cubeUniform=a.getUniformLocation(e,"u_cubeMatrix"),e.level=-1,e.currentNodes=[],e.nodeCache=[],e.nodeCacheTimestamp=0);fa=a.getError();if(0!==fa)throw console.log("Error: Something went wrong with WebGL!",fa),{type:"webgl error"};g()}};this.destroy=function(){R!==n&&(y!==n&&R.contains(y)&&R.removeChild(y),T!==n&&R.contains(T)&&R.removeChild(T));if(a){var e=a.getExtension("WEBGL_lose_context");e&&
e.loseContext()}};this.resize=function(){var k=I.devicePixelRatio||1;y.width=y.clientWidth*k;y.height=y.clientHeight*k;a&&(1286==a.getError()&&ra(),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),"multires"!=D&&a.uniform1f(e.aspectRatio,y.clientWidth/y.clientHeight))};this.resize();this.setPose=function(a,e){ba=[a,e]};this.render=function(k,d,f,r){var m;m=0;r===n&&(r={});r.roll&&(m=r.roll);if(ba!==n){var b=ba[0],g=ba[1],h=k,w=d,t=Math.cos(g)*Math.sin(k)*Math.sin(b)+Math.cos(k)*(Math.cos(b)*
Math.cos(d)+Math.sin(g)*Math.sin(b)*Math.sin(d)),x=-Math.sin(k)*Math.sin(g)+Math.cos(k)*Math.cos(g)*Math.sin(d);k=Math.cos(g)*Math.cos(b)*Math.sin(k)+Math.cos(k)*(-Math.cos(d)*Math.sin(b)+Math.cos(b)*Math.sin(g)*Math.sin(d));k=Math.asin(Math.max(Math.min(k,1),-1));d=Math.atan2(x,t);b=[Math.cos(h)*(Math.sin(g)*Math.sin(b)*Math.cos(w)-Math.cos(b)*Math.sin(w)),Math.cos(h)*Math.cos(g)*Math.cos(w),Math.cos(h)*(Math.cos(b)*Math.sin(g)*Math.cos(w)+Math.sin(w)*Math.sin(b))];g=[-Math.cos(k)*Math.sin(d),Math.cos(k)*
Math.cos(d)];g=Math.acos(Math.max(Math.min((b[0]*g[0]+b[1]*g[1])/(Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])*Math.sqrt(g[0]*g[0]+g[1]*g[1])),1),-1));0>b[2]&&(g=2*Math.PI-g);m+=g}if(a||"multires"!=D&&"cubemap"!=D){if("multires"!=D)f=2*Math.atan(Math.tan(0.5*f)/(a.drawingBufferWidth/a.drawingBufferHeight)),f=1/Math.tan(0.5*f),a.uniform1f(e.psi,d),a.uniform1f(e.theta,k),a.uniform1f(e.rot,m),a.uniform1f(e.f,f),!0===ma&&"equirectangular"==D&&(a.bindTexture(a.TEXTURE_2D,e.texture),a.texImage2D(a.TEXTURE_2D,
0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s)),a.drawArrays(a.TRIANGLES,0,6);else{b=a.drawingBufferWidth/a.drawingBufferHeight;g=2*Math.atan(Math.tan(f/2)*a.drawingBufferHeight/a.drawingBufferWidth);g=1/Math.tan(g/2);b=[g/b,0,0,0,0,g,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0];for(g=1;g<s.maxLevel&&a.drawingBufferWidth>s.tileResolution*Math.pow(2,g-1)*Math.tan(f/2)*0.707;)g++;e.level=g;g=[1,0,0,0,1,0,0,0,1];g=ka(g,-m,"z");g=ka(g,-k,"x");g=ka(g,d,"y");g=[g[0],g[1],g[2],0,g[3],g[4],g[5],0,g[6],g[7],g[8],0,0,0,0,1];a.uniformMatrix4fv(e.perspUniform,
!1,new Float32Array(Ba(b)));a.uniformMatrix4fv(e.cubeUniform,!1,new Float32Array(Ba(g)));b=[b[0]*g[0],b[0]*g[1],b[0]*g[2],0,b[5]*g[4],b[5]*g[5],b[5]*g[6],0,b[10]*g[8],b[10]*g[9],b[10]*g[10],b[11],-g[8],-g[9],-g[10],0];e.nodeCache.sort(Ma);if(200<e.nodeCache.length&&e.nodeCache.length>e.currentNodes.length+50)for(g=e.nodeCache.splice(200,e.nodeCache.length-200),m=0;m<g.length;m++)a.deleteTexture(g[m].texture);e.currentNodes=[];g="fbudlr".split("");for(m=0;6>m;m++)h=new S(sa[m],g[m],1,0,0,s.fullpath),
za(b,h,k,d,f);e.currentNodes.sort(W);for(m=0;m<e.currentNodes.length;m++)if(!e.currentNodes[m].texture){setTimeout(qa,0,e.currentNodes[m]);break}if(!e.drawInProgress){e.drawInProgress=!0;for(k=0;k<e.currentNodes.length;k++)e.currentNodes[k].textureLoaded&&(a.bindBuffer(a.ARRAY_BUFFER,ca),a.bufferData(a.ARRAY_BUFFER,new Float32Array(e.currentNodes[k].vertices),a.STATIC_DRAW),a.vertexAttribPointer(e.vertPosLocation,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,ta),a.vertexAttribPointer(e.texCoordLocation,
2,a.FLOAT,!1,0,0),a.bindTexture(a.TEXTURE_2D,e.currentNodes[k].texture),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0));e.drawInProgress=!1}}if(r.returnImage!==n)return y.toDataURL("image/png")}else for(m=Ca/2,r={f:"translate3d(-"+(m+2)+"px, -"+(m+2)+"px, -"+m+"px)",b:"translate3d("+(m+2)+"px, -"+(m+2)+"px, "+m+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(m+2)+"px, -"+m+"px, "+(m+2)+"px) rotateX(270deg)",d:"translate3d(-"+(m+2)+"px, "+m+"px, -"+(m+2)+"px) rotateX(90deg)",l:"translate3d(-"+
m+"px, -"+(m+2)+"px, "+(m+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+m+"px, -"+(m+2)+"px, -"+(m+2)+"px) rotateY(270deg)"},f=1/Math.tan(f/2),f=f*a.drawingBufferWidth/2+"px",k="perspective("+f+") translateZ("+f+") rotateX("+k+"rad) rotateY("+d+"rad) ",d=Object.keys(r),m=0;6>m;m++)f=T.querySelector(".pnlm-"+d[m]+"face").style,f.webkitTransform=k+r[d[m]],f.transform=k+r[d[m]]};this.isLoading=function(){if(a&&"multires"==D)for(var f=0;f<e.currentNodes.length;f++)if(!e.currentNodes[f].textureLoaded)return!0;
return!1};this.getCanvas=function(){return y};var ea=function(){function e(){var d=this;this.texture=this.callback=null;this.image=new Image;this.image.crossOrigin=b?b:"anonymous";this.image.addEventListener("load",function(){var b=d.image;a.bindTexture(a.TEXTURE_2D,d.texture);a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,
a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null);d.callback(d.texture);m.length?(b=m.shift(),d.loadTexture(b.src,b.texture,b.callback)):n[f++]=d})}function d(a,b,e){this.src=a;this.texture=b;this.callback=e}var f=4,n={},m=[],b;e.prototype.loadTexture=function(a,b,e){this.texture=b;this.callback=e;this.image.src=a};for(var g=0;g<f;g++)n[g]=new e;return function(e,g,k){b=k;k=a.createTexture();f?n[--f].loadTexture(e,k,g):m.push(new d(e,
k,g));return k}}()}var r="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",t="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",$a="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);float cosphi = cos(phi);\ngl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));\n}",
Ia="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);lambda = mod(lambda + PI, PI * 2.0) - PI;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = u_backgroundColor;\nelse\ngl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}",
na="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(f,n,r,t){return new ea(f,n,r,t)}}}(window,document);window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(I,f){window.setTimeout(I,1E3/60)}}());
window.pannellum=function(I,f,n){function ea(r,t){function ea(a){I.removeEventListener("deviceorientation",ea);a&&null!==a.alpha&&null!==a.beta&&null!==a.gamma?(u.container.appendChild(u.orientation),oa=!0,Va&&M()):oa=!1}function Ia(){var a=f.createElement("div");a.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e";if(1==a.getElementsByTagName("i").length)W();else{ua=c.hfov;Da=c.pitch;var l;if("cubemap"==c.type){Q=[];for(a=0;6>a;a++)Q.push(new Image),Q[a].crossOrigin=c.crossOrigin;p.load.lbox.style.display=
"block";p.load.lbar.style.display="none"}else if("multires"==c.type)a=JSON.parse(JSON.stringify(c.multiRes)),c.basePath&&c.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(c.multiRes.basePath)?a.basePath=c.basePath+c.multiRes.basePath:c.multiRes.basePath?a.basePath=c.multiRes.basePath:c.basePath&&(a.basePath=c.basePath),Q=a;else if(!0===c.dynamic)Q=c.panorama;else{if(c.panorama===n){W(c.strings.noPanoramaError);return}Q=new Image}if("cubemap"==c.type)for(var $=6,b=function(){$--;0===$&&R()},e=function(a){var G=
f.createElement("a");G.href=a.target.src;G.innerHTML=G.href;W(c.strings.fileAccessError.replace("%s",G.outerHTML))},a=0;a<Q.length;a++)Q[a].onload=b,Q[a].onerror=e,l=c.cubeMap[a],c.basePath&&!na(l)&&(l=c.basePath+l),Q[a].src=encodeURI(l);else if("multires"==c.type)R();else if(l="",c.basePath&&(l=c.basePath),!0!==c.dynamic){l=na(c.panorama)?c.panorama:l+c.panorama;Q.onload=function(){I.URL.revokeObjectURL(this.src);R()};var d=new XMLHttpRequest;d.onloadend=function(){if(200!=d.status){var a=f.createElement("a");
a.href=encodeURI(l);a.innerHTML=a.href;W(c.strings.fileAccessError.replace("%s",a.outerHTML))}Ma(this.response);p.load.msg.innerHTML=""};d.onprogress=function(a){if(a.lengthComputable){p.load.lbarFill.style.width=a.loaded/a.total*100+"%";var G,c;1E6<a.total?(G="MB",c=(a.loaded/1E6).toFixed(2),a=(a.total/1E6).toFixed(2)):1E3<a.total?(G="kB",c=(a.loaded/1E3).toFixed(1),a=(a.total/1E3).toFixed(1)):(G="B",c=a.loaded,a=a.total);p.load.msg.innerHTML=c+" / "+a+" "+G}else p.load.lbox.style.display="block",
p.load.lbar.style.display="none"};try{d.open("GET",l,!0)}catch(g){W(c.strings.malformedURLError)}d.responseType="blob";d.setRequestHeader("Accept","image/*,*/*;q=0.9");d.withCredentials="use-credentials"===c.crossOrigin;d.send()}c.draggable&&C.classList.add("pnlm-grab");C.classList.remove("pnlm-grabbing")}}function na(a){return/^(?:[a-z]+:)?\/\//i.test(a)||"/"==a[0]||"blob:"==a.slice(0,5)}function R(){B||(B=new libpannellum.renderer(L));Oa||(Oa=!0,H.addEventListener("mousedown",za,!1),f.addEventListener("mousemove",
Ba,!1),f.addEventListener("mouseup",qa,!1),c.mouseZoom&&(C.addEventListener("mousewheel",P,!1),C.addEventListener("DOMMouseScroll",P,!1)),c.doubleClickZoom&&H.addEventListener("dblclick",Aa,!1),C.addEventListener("mozfullscreenchange",w,!1),C.addEventListener("webkitfullscreenchange",w,!1),C.addEventListener("msfullscreenchange",w,!1),C.addEventListener("fullscreenchange",w,!1),I.addEventListener("resize",ma,!1),I.addEventListener("orientationchange",ma,!1),c.disableKeyboardCtrl||(r.addEventListener("keydown",
Ca,!1),r.addEventListener("keyup",sa,!1),r.addEventListener("blur",T,!1)),f.addEventListener("mouseleave",qa,!1),H.addEventListener("touchstart",ga,!1),H.addEventListener("touchmove",ra,!1),H.addEventListener("touchend",y,!1),H.addEventListener("pointerdown",e,!1),H.addEventListener("pointermove",a,!1),H.addEventListener("pointerup",O,!1),H.addEventListener("pointerleave",O,!1),I.navigator.pointerEnabled&&(r.style.touchAction="none"));Za();setTimeout(function(){},500)}function Ma(a){var l=new FileReader;
l.addEventListener("loadend",function(){var $=l.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var b=$.indexOf("\u00ff\u00c2");(0>b||65536<b)&&W(c.strings.iOS8WebGLError)}b=$.indexOf("<x:xmpmeta");if(-1<b&&!0!==c.ignoreGPanoXMP){var e=$.substring(b,$.indexOf("</x:xmpmeta>")+12),d=function(a){var G;0<=e.indexOf(a+'="')?(G=e.substring(e.indexOf(a+'="')+a.length+2),G=G.substring(0,G.indexOf('"'))):0<=e.indexOf(a+">")&&(G=e.substring(e.indexOf(a+">")+a.length+1),G=G.substring(0,
G.indexOf("<")));return G!==n?Number(G):null},$=d("GPano:FullPanoWidthPixels"),b=d("GPano:CroppedAreaImageWidthPixels"),f=d("GPano:FullPanoHeightPixels"),g=d("GPano:CroppedAreaImageHeightPixels"),h=d("GPano:CroppedAreaTopPixels"),k=d("GPano:PoseHeadingDegrees"),m=d("GPano:PosePitchDegrees"),d=d("GPano:PoseRollDegrees");null!==$&&null!==b&&null!==f&&null!==g&&null!==h&&(0>aa.indexOf("haov")&&(c.haov=b/$*360),0>aa.indexOf("vaov")&&(c.vaov=g/f*180),0>aa.indexOf("vOffset")&&(c.vOffset=-180*((h+g/2)/f-
0.5)),null!==k&&0>aa.indexOf("northOffset")&&(c.northOffset=k,!1!==c.compass&&(c.compass=!0)),null!==m&&null!==d&&(0>aa.indexOf("horizonPitch")&&(c.horizonPitch=m),0>aa.indexOf("horizonRoll")&&(c.horizonRoll=d)))}Q.src=I.URL.createObjectURL(a)});l.readAsBinaryString!==n?l.readAsBinaryString(a):l.readAsText(a)}function W(a){a===n&&(a=c.strings.genericWebGLError);p.errorMsg.innerHTML="<p>"+a+"</p>";u.load.style.display="none";p.load.box.style.display="none";p.errorMsg.style.display="table";Ja=!0;L.style.display=
"none";A("error",a)}function S(a){var c=r.getBoundingClientRect(),b={};b.x=a.clientX-c.left;b.y=a.clientY-c.top;return b}function za(a){a.preventDefault();r.focus();if(K&&c.draggable){var l=S(a);if(c.hotSpotDebug){var b=ka(a);console.log("Pitch: "+b[0]+", Yaw: "+b[1]+", Center Pitch: "+c.pitch+", Center Yaw: "+c.yaw+", HFOV: "+c.hfov)}Ha();E();c.roll=0;v.hfov=0;ha=!0;U=Date.now();va=l.x;wa=l.y;Ka=c.yaw;La=c.pitch;C.classList.add("pnlm-grabbing");C.classList.remove("pnlm-grab");A("mousedown",a);F()}}
function Aa(a){c.minHfov===c.hfov?xa.setHfov(ua,1E3):(a=ka(a),xa.lookAt(a[0],a[1],c.minHfov,1E3))}function ka(a){var l=S(a);a=B.getCanvas();var b=a.clientWidth,d=a.clientHeight;a=l.x/b*2-1;var d=(1-l.y/d*2)*d/b,e=1/Math.tan(c.hfov*Math.PI/360),f=Math.sin(c.pitch*Math.PI/180),g=Math.cos(c.pitch*Math.PI/180),l=e*g-d*f,b=Math.sqrt(a*a+l*l),d=180*Math.atan((d*g+e*f)/b)/Math.PI;a=180*Math.atan2(a/b,l/b)/Math.PI+c.yaw;-180>a&&(a+=360);180<a&&(a-=360);return[d,a]}function Ba(a){if(ha&&K){U=Date.now();var l=
B.getCanvas(),b=l.clientWidth,l=l.clientHeight;a=S(a);var d=180*(Math.atan(va/b*2-1)-Math.atan(a.x/b*2-1))/Math.PI*c.hfov/90+Ka;v.yaw=(d-c.yaw)%360*0.2;c.yaw=d;b=360*Math.atan(Math.tan(c.hfov/360*Math.PI)*l/b)/Math.PI;b=180*(Math.atan(a.y/l*2-1)-Math.atan(wa/l*2-1))/Math.PI*b/90+La;v.pitch=0.2*(b-c.pitch);c.pitch=b}}function qa(a){ha&&(ha=!1,15<Date.now()-U&&(v.pitch=v.yaw=0),C.classList.add("pnlm-grab"),C.classList.remove("pnlm-grabbing"),U=Date.now(),A("mouseup",a))}function ga(a){if(K&&c.draggable){Ha();
E();c.roll=0;v.hfov=0;var l=S(a.targetTouches[0]);va=l.x;wa=l.y;if(2==a.targetTouches.length){var b=S(a.targetTouches[1]);va+=0.5*(b.x-l.x);wa+=0.5*(b.y-l.y);Ea=Math.sqrt((l.x-b.x)*(l.x-b.x)+(l.y-b.y)*(l.y-b.y))}ha=!0;U=Date.now();Ka=c.yaw;La=c.pitch;A("touchstart",a);F()}}function ra(a){if(c.draggable&&(a.preventDefault(),K&&(U=Date.now()),ha&&K)){var l=S(a.targetTouches[0]),b=l.x,d=l.y;2==a.targetTouches.length&&-1!=Ea&&(a=S(a.targetTouches[1]),b+=0.5*(a.x-l.x),d+=0.5*(a.y-l.y),l=Math.sqrt((l.x-
a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y)),x(c.hfov+0.1*(Ea-l)),Ea=l);l=c.hfov/360;b=(va-b)*l+Ka;v.yaw=(b-c.yaw)%360*0.2;c.yaw=b;d=(d-wa)*l+La;v.pitch=0.2*(d-c.pitch);c.pitch=d}}function y(){ha=!1;150<Date.now()-U&&(v.pitch=v.yaw=0);Ea=-1;U=Date.now();A("touchend",event)}function e(a){"touch"==a.pointerType&&(ia.push(a.pointerId),ya.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=ya,ga(a),a.preventDefault())}function a(a){if("touch"==a.pointerType)for(var c=0;c<ia.length;c++)if(a.pointerId==
ia[c]){ya[c].clientX=a.clientX;ya[c].clientY=a.clientY;a.targetTouches=ya;ra(a);break}}function O(a){if("touch"==a.pointerType){for(var c=!1,b=0;b<ia.length;b++)a.pointerId==ia[b]&&(ia[b]=n),ia[b]&&(c=!0);c||(ia=[],ya=[],y());a.preventDefault()}}function P(a){K&&("fullscreenonly"!=c.mouseZoom||Fa)&&(a.preventDefault(),Ha(),U=Date.now(),a.wheelDeltaY?(x(c.hfov-0.05*a.wheelDeltaY),v.hfov=0>a.wheelDelta?1:-1):a.wheelDelta?(x(c.hfov-0.05*a.wheelDelta),v.hfov=0>a.wheelDelta?1:-1):a.detail&&(x(c.hfov+1.5*
a.detail),v.hfov=0<a.detail?1:-1),F())}function Ca(a){Ha();U=Date.now();E();c.roll=0;var l=a.which||a.keycode;0>Wa.indexOf(l)||(a.preventDefault(),27==l?Fa&&h():ba(l,!0))}function T(){for(var a=0;10>a;a++)q[a]=!1}function sa(a){var c=a.which||a.keycode;0>Wa.indexOf(c)||(a.preventDefault(),ba(c,!1))}function ba(a,c){var b=!1;switch(a){case 109:case 189:case 17:case 173:q[0]!=c&&(b=!0);q[0]=c;break;case 107:case 187:case 16:case 61:q[1]!=c&&(b=!0);q[1]=c;break;case 38:q[2]!=c&&(b=!0);q[2]=c;break;case 87:q[6]!=
c&&(b=!0);q[6]=c;break;case 40:q[3]!=c&&(b=!0);q[3]=c;break;case 83:q[7]!=c&&(b=!0);q[7]=c;break;case 37:q[4]!=c&&(b=!0);q[4]=c;break;case 65:q[8]!=c&&(b=!0);q[8]=c;break;case 39:q[5]!=c&&(b=!0);q[5]=c;break;case 68:q[9]!=c&&(b=!0),q[9]=c}b&&c&&(da="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),F())}function s(){if(K){var a=!1,l=c.pitch,b=c.yaw,d=c.hfov,e;e="undefined"!==typeof performance&&performance.now()?performance.now():Date.now();da===n&&(da=e);var f=(e-da)*
c.hfov/1700,f=Math.min(f,1);q[0]&&!0===c.keyboardZoom&&(x(c.hfov+(0.8*v.hfov+0.5)*f),a=!0);q[1]&&!0===c.keyboardZoom&&(x(c.hfov+(0.8*v.hfov-0.2)*f),a=!0);if(q[2]||q[6])c.pitch+=(0.8*v.pitch+0.2)*f,a=!0;if(q[3]||q[7])c.pitch+=(0.8*v.pitch-0.2)*f,a=!0;if(q[4]||q[8])c.yaw+=(0.8*v.yaw-0.2)*f,a=!0;if(q[5]||q[9])c.yaw+=(0.8*v.yaw+0.2)*f,a=!0;a&&(U=Date.now());Date.now();if(c.autoRotate){if(0.001<e-da){var a=(e-da)/1E3,g=(v.yaw/a*f-0.2*c.autoRotate)*a,g=(0<-c.autoRotate?1:-1)*Math.min(Math.abs(c.autoRotate*
a),Math.abs(g));c.yaw+=g}c.autoRotateStopDelay&&(c.autoRotateStopDelay-=e-da,0>=c.autoRotateStopDelay&&(c.autoRotateStopDelay=!1,X=c.autoRotate,c.autoRotate=0))}J.pitch&&(D("pitch"),l=c.pitch);J.yaw&&(D("yaw"),b=c.yaw);J.hfov&&(D("hfov"),d=c.hfov);0<f&&!c.autoRotate&&(q[4]||q[5]||q[8]||q[9]||J.yaw||(c.yaw+=v.yaw*f*0.85),q[2]||q[3]||q[6]||q[7]||J.pitch||(c.pitch+=v.pitch*f*0.85),q[0]||q[1]||J.hfov||x(c.hfov+v.hfov*f*0.85));da=e;0<f&&(v.yaw=0.8*v.yaw+(c.yaw-b)/f*0.2,v.pitch=0.8*v.pitch+(c.pitch-l)/
f*0.2,v.hfov=0.8*v.hfov+(c.hfov-d)/f*0.2,l=c.autoRotate?Math.abs(c.autoRotate):5,v.yaw=Math.min(l,Math.max(v.yaw,-l)),v.pitch=Math.min(l,Math.max(v.pitch,-l)),v.hfov=Math.min(l,Math.max(v.hfov,-l)));q[0]&&q[0]&&(v.hfov=0);(q[2]||q[6])&&(q[3]||q[7])&&(v.pitch=0);(q[4]||q[8])&&(q[5]||q[9])&&(v.yaw=0)}}function D(a){var l=J[a],b=Math.min(1,Math.max((Date.now()-l.startTime)/1E3/(l.duration/1E3),0)),b=l.startPosition+c.animationTimingFunction(b)*(l.endPosition-l.startPosition);if(l.endPosition>l.startPosition&&
b>=l.endPosition||l.endPosition<l.startPosition&&b<=l.endPosition||l.endPosition===l.startPosition){b=l.endPosition;v[a]=0;var l=J[a].callback,d=J[a].callbackArgs;delete J[a];"function"==typeof l&&l(d)}c[a]=b}function ma(){w()}function F(){Pa||(Pa=!0,ca())}function ca(){ta();Qa&&clearTimeout(Qa);if(ha||!0===Y)requestAnimationFrame(ca);else if(q[0]||q[1]||q[2]||q[3]||q[4]||q[5]||q[6]||q[7]||q[8]||q[9]||c.autoRotate||J.pitch||J.yaw||J.hfov||0.01<Math.abs(v.yaw)||0.01<Math.abs(v.pitch)||0.01<Math.abs(v.hfov))s(),
0<=c.autoRotateInactivityDelay&&X&&Date.now()-U>c.autoRotateInactivityDelay&&!c.autoRotate&&(c.autoRotate=X,xa.lookAt(Da,n,ua,3E3)),requestAnimationFrame(ca);else if(B&&(B.isLoading()||!0===c.dynamic&&Xa))requestAnimationFrame(ca);else{Pa=!1;da=n;var a=c.autoRotateInactivityDelay-(Date.now()-U);0<a?Qa=setTimeout(function(){c.autoRotate=X;xa.lookAt(Da,n,ua,3E3);F()},a):0<=c.autoRotateInactivityDelay&&X&&(c.autoRotate=X,xa.lookAt(Da,n,ua,3E3),F())}}function ta(){var a;if(K){180<c.yaw?c.yaw-=360:-180>
c.yaw&&(c.yaw+=360);a=c.yaw;var l=c.maxYaw-c.minYaw,b=-180,d=180;360>l&&(b=c.minYaw+c.hfov/2,d=c.maxYaw-c.hfov/2,l<c.hfov&&(b=d=(b+d)/2));c.yaw=Math.max(b,Math.min(d,c.yaw));!1!==c.autoRotate&&a!=c.yaw&&(c.autoRotate*=-1);a=B.getCanvas();a=2*Math.atan(Math.tan(c.hfov/180*Math.PI*0.5)/(a.width/a.height))/Math.PI*180;l=c.minPitch+a/2;b=c.maxPitch-a/2;c.maxPitch-c.minPitch<a&&(l=b=(l+b)/2);isNaN(l)&&(l=-90);isNaN(b)&&(b=90);c.pitch=Math.max(l,Math.min(b,c.pitch));B.render(c.pitch*Math.PI/180,c.yaw*Math.PI/
180,c.hfov*Math.PI/180,{roll:c.roll*Math.PI/180});c.hotSpots.forEach(m);c.compass&&(Ga.style.transform="rotate("+(-c.yaw-c.northOffset)+"deg)",Ga.style.webkitTransform="rotate("+(-c.yaw-c.northOffset)+"deg)")}}function Z(a,c,b,d){this.w=a;this.x=c;this.y=b;this.z=d}function la(a){var b;b=a.alpha;var d=a.beta;a=a.gamma;d=[d?d*Math.PI/180/2:0,a?a*Math.PI/180/2:0,b?b*Math.PI/180/2:0];b=[Math.cos(d[0]),Math.cos(d[1]),Math.cos(d[2])];d=[Math.sin(d[0]),Math.sin(d[1]),Math.sin(d[2])];b=new Z(b[0]*b[1]*b[2]-
d[0]*d[1]*d[2],d[0]*b[1]*b[2]-b[0]*d[1]*d[2],b[0]*d[1]*b[2]+d[0]*b[1]*d[2],b[0]*b[1]*d[2]+d[0]*d[1]*b[2]);b=b.multiply(new Z(Math.sqrt(0.5),-Math.sqrt(0.5),0,0));d=I.orientation?-I.orientation*Math.PI/180/2:0;b=b.multiply(new Z(Math.cos(d),0,-Math.sin(d),0)).toEulerAngles();"number"==typeof Y&&10>Y?Y+=1:10===Y?(Ya=b[2]/Math.PI*180+c.yaw,Y=!0,requestAnimationFrame(ca)):(c.pitch=b[0]/Math.PI*180,c.roll=-b[1]/Math.PI*180,c.yaw=-b[2]/Math.PI*180+Ya)}function Za(){try{var a={};c.horizonPitch!==n&&(a.horizonPitch=
c.horizonPitch*Math.PI/180);c.horizonRoll!==n&&(a.horizonRoll=c.horizonRoll*Math.PI/180);c.backgroundColor!==n&&(a.backgroundColor=c.backgroundColor);B.init(Q,c.type,c.dynamic,c.haov*Math.PI/180,c.vaov*Math.PI/180,c.vOffset*Math.PI/180,k,a);!0!==c.dynamic&&(Q=n)}catch(b){if("webgl error"==b.type||"no webgl"==b.type)W();else if("webgl size error"==b.type)W(c.strings.textureSizeError.replace("%s",b.width).replace("%s",b.maxWidth));else throw W(c.strings.unknownError),b;}}function k(){if(c.sceneFadeDuration&&
B.fadeImg!==n){B.fadeImg.style.opacity=0;var a=B.fadeImg;delete B.fadeImg;setTimeout(function(){L.removeChild(a);A("scenechangefadedone")},c.sceneFadeDuration)}Ga.style.display=c.compass?"inline":"none";Na();p.load.box.style.display="none";pa!==n&&(L.removeChild(pa),pa=n);K=!0;A("load");F()}function d(a){a.pitch=Number(a.pitch)||0;a.yaw=Number(a.yaw)||0;var b=f.createElement("div");b.className="pnlm-hotspot-base";b.className=a.cssClass?b.className+(" "+a.cssClass):b.className+(" pnlm-hotspot pnlm-sprite pnlm-"+
ja(a.type));var d=f.createElement("span");a.text&&(d.innerHTML=ja(a.text));var e;if(a.video){e=f.createElement("video");var g=a.video;c.basePath&&!na(g)&&(g=c.basePath+g);e.src=encodeURI(g);e.controls=!0;e.style.width=a.width+"px";L.appendChild(b);d.appendChild(e)}else if(a.image){g=a.image;c.basePath&&!na(g)&&(g=c.basePath+g);e=f.createElement("a");e.href=encodeURI(a.URL?a.URL:g);e.target="_blank";d.appendChild(e);var h=f.createElement("img");h.src=encodeURI(g);h.style.width=a.width+"px";h.style.paddingTop=
"5px";L.appendChild(b);e.appendChild(h);d.style.maxWidth="initial"}else a.URL?(e=f.createElement("a"),e.href=encodeURI(a.URL),e.target="_blank",L.appendChild(e),b.style.cursor="pointer",d.style.cursor="pointer",e.appendChild(b)):(a.sceneId&&(b.onclick=b.ontouchend=function(){b.clicked||(b.clicked=!0,N(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov));return!1},b.style.cursor="pointer",d.style.cursor="pointer"),L.appendChild(b));if(a.createTooltipFunc)a.createTooltipFunc(b,a.createTooltipArgs);else if(a.text||
a.video||a.image)b.classList.add("pnlm-tooltip"),b.appendChild(d),d.style.width=d.scrollWidth-20+"px",d.style.marginLeft=-(d.scrollWidth-b.offsetWidth)/2+"px",d.style.marginTop=-d.scrollHeight-12+"px";a.clickHandlerFunc&&(b.addEventListener("click",function(c){a.clickHandlerFunc(c,a.clickHandlerArgs)},"false"),b.style.cursor="pointer",d.style.cursor="pointer");a.div=b}function Na(){Ra||(c.hotSpots?(c.hotSpots=c.hotSpots.sort(function(a,c){return a.pitch<c.pitch}),c.hotSpots.forEach(d)):c.hotSpots=
[],Ra=!0,c.hotSpots.forEach(m))}function fa(){var a=c.hotSpots;Ra=!1;delete c.hotSpots;if(a)for(var b=0;b<a.length;b++){for(var d=a[b].div;d.parentNode!=L;)d=d.parentNode;L.removeChild(d);delete a[b].div}}function m(a){var b=Math.sin(a.pitch*Math.PI/180),d=Math.cos(a.pitch*Math.PI/180),e=Math.sin(c.pitch*Math.PI/180),f=Math.cos(c.pitch*Math.PI/180),g=Math.cos((-a.yaw+c.yaw)*Math.PI/180),h=b*e+d*g*f;if(90>=a.yaw&&-90<a.yaw&&0>=h||(90<a.yaw||-90>=a.yaw)&&0>=h)a.div.style.visibility="hidden";else{var k=
Math.sin((-a.yaw+c.yaw)*Math.PI/180),m=Math.tan(c.hfov*Math.PI/360);a.div.style.visibility="visible";var n=B.getCanvas(),p=n.clientWidth,n=n.clientHeight,b=[-p/m*k*d/h/2,-p/m*(b*f-d*g*e)/h/2],d=Math.sin(c.roll*Math.PI/180),e=Math.cos(c.roll*Math.PI/180),b=[b[0]*e-b[1]*d,b[0]*d+b[1]*e];b[0]+=(p-a.div.offsetWidth)/2;b[1]+=(n-a.div.offsetHeight)/2;p="translate("+b[0]+"px, "+b[1]+"px) translateZ(9999px) rotate("+c.roll+"deg)";a.div.style.webkitTransform=p;a.div.style.MozTransform=p;a.div.style.transform=
p}}function b(a){c={};var b,d,e="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");aa=[];for(b in Sa)Sa.hasOwnProperty(b)&&(c[b]=Sa[b]);for(b in t.default)if(t.default.hasOwnProperty(b))if("strings"==b)for(d in t.default.strings)t.default.strings.hasOwnProperty(d)&&(c.strings[d]=ja(t.default.strings[d]));else c[b]=t.default[b],0<=e.indexOf(b)&&aa.push(b);if(null!==a&&""!==a&&t.scenes&&t.scenes[a]){var f=t.scenes[a];for(b in f)if(f.hasOwnProperty(b))if("strings"==b)for(d in f.strings)f.strings.hasOwnProperty(d)&&
(c.strings[d]=ja(f.strings[d]));else c[b]=f[b],0<=e.indexOf(b)&&aa.push(b);c.scene=a}for(b in t)if(t.hasOwnProperty(b))if("strings"==b)for(d in t.strings)t.strings.hasOwnProperty(d)&&(c.strings[d]=ja(t.strings[d]));else c[b]=t[b],0<=e.indexOf(b)&&aa.push(b)}function g(a){if((a=a?a:!1)&&"preview"in c){var b=c.preview;c.basePath&&!na(b)&&(b=c.basePath+b);pa=f.createElement("div");pa.className="pnlm-preview-img";pa.style.backgroundImage="url('"+encodeURI(b)+"')";L.appendChild(pa)}var b=c.title,d=c.author;
a&&("previewTitle"in c&&(c.title=c.previewTitle),"previewAuthor"in c&&(c.author=c.previewAuthor));c.hasOwnProperty("title")||(p.title.innerHTML="");c.hasOwnProperty("author")||(p.author.innerHTML="");c.hasOwnProperty("title")||c.hasOwnProperty("author")||(p.container.style.display="none");u.load.innerHTML="<p>"+c.strings.loadButtonLabel+"</p>";p.load.boxp.innerHTML=c.strings.loadingLabel;for(var e in c)if(c.hasOwnProperty(e))switch(e){case "title":p.title.innerHTML=ja(c[e]);p.container.style.display=
"inline";break;case "author":p.author.innerHTML=c.strings.bylineLabel.replace("%s",ja(c[e]));p.container.style.display="inline";break;case "fallback":p.errorMsg.innerHTML='<p>Your browser does not support WebGL.<br><a href="'+encodeURI(c[e])+'" target="_blank">Click here to view this panorama in an alternative viewer.</a></p>';break;case "hfov":x(Number(c[e]));break;case "autoLoad":!0===c[e]&&B===n&&(p.load.box.style.display="inline",u.load.style.display="none",Ia());break;case "showZoomCtrl":u.zoom.style.display=
c[e]&&!1!=c.showControls?"block":"none";break;case "showFullscreenCtrl":u.fullscreen.style.display=c[e]&&!1!=c.showControls&&("fullscreen"in f||"mozFullScreen"in f||"webkitIsFullScreen"in f||"msFullscreenElement"in f)?"block":"none";break;case "hotSpotDebug":Ta.style.display=c[e]?"block":"none";break;case "showControls":c[e]||(u.orientation.style.display="none",u.zoom.style.display="none",u.fullscreen.style.display="none");break;case "orientationOnByDefault":c[e]&&(oa===n?Va=!0:!0===oa&&M())}a&&(b?
c.title=b:delete c.title,d?c.author=d:delete c.author)}function h(){if(K&&!Ja)if(Fa)f.exitFullscreen?f.exitFullscreen():f.mozCancelFullScreen?f.mozCancelFullScreen():f.webkitCancelFullScreen?f.webkitCancelFullScreen():f.msExitFullscreen&&f.msExitFullscreen();else try{r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullScreen()}catch(a){}}function w(){f.fullscreen||f.mozFullScreen||f.webkitIsFullScreen||
f.msFullscreenElement?(u.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Fa=!0):(u.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),Fa=!1);B.resize();x(c.hfov);F()}function z(a){var b=c.minHfov;"multires"==c.type&&B&&(b=Math.min(b,B.getCanvas().width/(c.multiRes.cubeResolution/90*0.9)));return b>c.maxHfov?(console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),c.hfov):a<b?b:a>c.maxHfov?c.maxHfov:a}function x(a){c.hfov=z(a)}function Ha(){J={};X=c.autoRotate?
c.autoRotate:X;c.autoRotate=!1}function Ua(){Ja&&(p.load.box.style.display="none",p.errorMsg.style.display="none",Ja=!1,A("errorcleared"));u.load.style.display="none";p.load.box.style.display="inline";Ia()}function N(a,d,e,f,h){K=!1;J={};var k,m;if(c.sceneFadeDuration&&!h&&(k=B.render(c.pitch*Math.PI/180,c.yaw*Math.PI/180,c.hfov*Math.PI/180,{returnImage:!0}),k!==n)){h=new Image;h.className="pnlm-fade-img";h.style.transition="opacity "+c.sceneFadeDuration/1E3+"s";h.style.width="100%";h.style.height=
"100%";h.onload=function(){N(a,d,e,f,!0)};h.src=k;L.appendChild(h);B.fadeImg=h;return}h="same"===d?c.pitch:d;k="same"===e?c.yaw:"sameAzimuth"===e?c.yaw+(c.northOffset||0)-(t.scenes[a].northOffset||0):e;m="same"===f?c.hfov:f;fa();b(a);v.yaw=v.pitch=v.hfov=0;g();h!==n&&(c.pitch=h);k!==n&&(c.yaw=k);m!==n&&(c.hfov=m);A("scenechange",a);Ua()}function E(){I.removeEventListener("deviceorientation",la);u.orientation.classList.remove("pnlm-orientation-button-active");Y=!1}function M(){Y=1;I.addEventListener("deviceorientation",
la);u.orientation.classList.add("pnlm-orientation-button-active")}function ja(a){return t.escapeHTML?String(a).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(a).split("\n").join("<br>")}function A(a){if(a in V)for(var c=V[a].length;0<c;c--)V[a][V[a].length-c].apply(null,[].slice.call(arguments,1))}var xa=this,c,B,pa,ha=!1,U=Date.now(),va=0,wa=0,Ea=-1,Ka=0,La=0,q=
Array(10),Fa=!1,K=!1,Ja=!1,Oa=!1,Q,da,v={yaw:0,pitch:0,hfov:0},Pa=!1,Y=!1,Ya=0,Qa,X=0,ua,Da,J={},V={},aa=[],Xa=!1,Ra=!1,Sa={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:n,maxPitch:n,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:n,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,
hotSpotDebug:!1,backgroundColor:[0,0,0],animationTimingFunction:function(a){return 0.5>a?2*a*a:-1+(4-2*a)*a},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",
genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}},Wa=[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189];r="string"===typeof r?f.getElementById(r):r;r.classList.add("pnlm-container");r.tabIndex=
0;var C=f.createElement("div");C.className="pnlm-ui";r.appendChild(C);var L=f.createElement("div");L.className="pnlm-render-container";r.appendChild(L);var H=f.createElement("div");H.className="pnlm-dragfix";C.appendChild(H);var p={},Ta=f.createElement("div");Ta.className="pnlm-sprite pnlm-hot-spot-debug-indicator";C.appendChild(Ta);p.container=f.createElement("div");p.container.className="pnlm-panorama-info";p.title=f.createElement("div");p.title.className="pnlm-title-box";p.container.appendChild(p.title);
p.author=f.createElement("div");p.author.className="pnlm-author-box";p.container.appendChild(p.author);C.appendChild(p.container);p.load={};p.load.box=f.createElement("div");p.load.box.className="pnlm-load-box";p.load.boxp=f.createElement("p");p.load.box.appendChild(p.load.boxp);p.load.lbox=f.createElement("div");p.load.lbox.className="pnlm-lbox";p.load.lbox.innerHTML='<div class="pnlm-loading"></div>';p.load.box.appendChild(p.load.lbox);p.load.lbar=f.createElement("div");p.load.lbar.className="pnlm-lbar";
p.load.lbarFill=f.createElement("div");p.load.lbarFill.className="pnlm-lbar-fill";p.load.lbar.appendChild(p.load.lbarFill);p.load.box.appendChild(p.load.lbar);p.load.msg=f.createElement("p");p.load.msg.className="pnlm-lmsg";p.load.box.appendChild(p.load.msg);C.appendChild(p.load.box);p.errorMsg=f.createElement("div");p.errorMsg.className="pnlm-error-msg pnlm-info-box";C.appendChild(p.errorMsg);var u={};u.container=f.createElement("div");u.container.className="pnlm-controls-container";C.appendChild(u.container);
u.load=f.createElement("div");u.load.className="pnlm-load-button";u.load.addEventListener("click",function(){g();Ua()});C.appendChild(u.load);u.zoom=f.createElement("div");u.zoom.className="pnlm-zoom-controls pnlm-controls";u.zoomIn=f.createElement("div");u.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control";u.zoomIn.addEventListener("click",function(){K&&(x(c.hfov-5),F())});u.zoom.appendChild(u.zoomIn);u.zoomOut=f.createElement("div");u.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control";
u.zoomOut.addEventListener("click",function(){K&&(x(c.hfov+5),F())});u.zoom.appendChild(u.zoomOut);u.container.appendChild(u.zoom);u.fullscreen=f.createElement("div");u.fullscreen.addEventListener("click",h);u.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control";(f.fullscreenEnabled||f.mozFullScreenEnabled||f.webkitFullscreenEnabled||f.msFullscreenEnabled)&&u.container.appendChild(u.fullscreen);u.orientation=f.createElement("div");
u.orientation.addEventListener("click",function(a){Y?E():M()});u.orientation.addEventListener("mousedown",function(a){a.stopPropagation()});u.orientation.addEventListener("touchstart",function(a){a.stopPropagation()});u.orientation.addEventListener("pointerdown",function(a){a.stopPropagation()});u.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var oa,Va=!1;I.DeviceOrientationEvent?I.addEventListener("deviceorientation",ea):oa=
!1;var Ga=f.createElement("div");Ga.className="pnlm-compass pnlm-controls pnlm-control";C.appendChild(Ga);t.firstScene?b(t.firstScene):t.default&&t.default.firstScene?b(t.default.firstScene):b(null);g(!0);var ia=[],ya=[];Z.prototype.multiply=function(a){return new Z(this.w*a.w-this.x*a.x-this.y*a.y-this.z*a.z,this.x*a.w+this.w*a.x+this.y*a.z-this.z*a.y,this.y*a.w+this.w*a.y+this.z*a.x-this.x*a.z,this.z*a.w+this.w*a.z+this.x*a.y-this.y*a.x)};Z.prototype.toEulerAngles=function(){var a=Math.atan2(2*
(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),c=Math.asin(2*(this.w*this.y-this.z*this.x)),b=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[a,c,b]};this.isLoaded=function(){return K};this.getPitch=function(){return c.pitch};this.setPitch=function(a,b,d,e){(b=b==n?1E3:Number(b))?J.pitch={startTime:Date.now(),startPosition:c.pitch,endPosition:a,duration:b,callback:d,callbackArgs:e}:c.pitch=a;F();return this};this.getPitchBounds=function(){return[c.minPitch,
c.maxPitch]};this.setPitchBounds=function(a){c.minPitch=Math.max(-90,Math.min(a[0],90));c.maxPitch=Math.max(-90,Math.min(a[1],90));return this};this.getYaw=function(){return c.yaw};this.setYaw=function(a,b,d,e){b=b==n?1E3:Number(b);a=(a+180)%360-180;b?(180<c.yaw-a?a+=360:180<a-c.yaw&&(a-=360),J.yaw={startTime:Date.now(),startPosition:c.yaw,endPosition:a,duration:b,callback:d,callbackArgs:e}):c.yaw=a;F();return this};this.getYawBounds=function(){return[c.minYaw,c.maxYaw]};this.setYawBounds=function(a){c.minYaw=
Math.max(-180,Math.min(a[0],180));c.maxYaw=Math.max(-180,Math.min(a[1],180));return this};this.getHfov=function(){return c.hfov};this.setHfov=function(a,b,d,e){(b=b==n?1E3:Number(b))?J.hfov={startTime:Date.now(),startPosition:c.hfov,endPosition:z(a),duration:b,callback:d,callbackArgs:e}:x(a);F();return this};this.getHfovBounds=function(){return[c.minHfov,c.maxHfov]};this.setHfovBounds=function(a){c.minHfov=Math.max(0,a[0]);c.maxHfov=Math.max(0,a[1]);return this};this.lookAt=function(a,b,c,d,e,f){d=
d==n?1E3:Number(d);a!==n&&(this.setPitch(a,d,e,f),e=n);b!==n&&(this.setYaw(b,d,e,f),e=n);c!==n&&this.setHfov(c,d,e,f);return this};this.getNorthOffset=function(){return c.northOffset};this.setNorthOffset=function(a){c.northOffset=Math.min(360,Math.max(0,a));F();return this};this.getHorizonRoll=function(){return c.horizonRoll};this.setHorizonRoll=function(a){c.horizonRoll=Math.min(90,Math.max(-90,a));B.setPose(c.horizonPitch*Math.PI/180,c.horizonRoll*Math.PI/180);F();return this};this.getHorizonPitch=
function(){return c.horizonPitch};this.setHorizonPitch=function(a){c.horizonPitch=Math.min(90,Math.max(-90,a));B.setPose(c.horizonPitch*Math.PI/180,c.horizonRoll*Math.PI/180);F();return this};this.startAutoRotate=function(a){a=a||X||1;c.autoRotate=a;xa.lookAt(Da,n,ua,3E3);F();return this};this.stopAutoRotate=function(){X=c.autoRotate?c.autoRotate:X;c.autoRotate=!1;c.autoRotateInactivityDelay=-1;return this};this.getRenderer=function(){return B};this.setUpdate=function(a){Xa=!0===a;B===n?R():F();return this};
this.mouseEventToCoords=function(a){return ka(a)};this.loadScene=function(a,b,c,d){K&&N(a,b,c,d);return this};this.getScene=function(){return c.scene};this.addScene=function(a,b){t.scenes[a]=b;return this};this.removeScene=function(a){if(c.scene===a||!t.scenes.hasOwnProperty(a))return!1;delete t.scenes[a];return!0};this.toggleFullscreen=function(){h();return this};this.getConfig=function(){return c};this.getContainer=function(){return r};this.addHotSpot=function(a,b){if(b===n&&c.scene===n)c.hotSpots.push(a);
else{var e=b!==n?b:c.scene;if(t.scenes.hasOwnProperty(e))t.scenes[e].hasOwnProperty("hotSpots")||(t.scenes[e].hotSpots=[],e==c.scene&&(c.hotSpots=t.scenes[e].hotSpots)),t.scenes[e].hotSpots.push(a);else throw"Invalid scene ID!";}if(b===n||c.scene==b)d(a),K&&m(a);return this};this.removeHotSpot=function(a){if(!c.hotSpots)return!1;for(var b=0;b<c.hotSpots.length;b++)if(c.hotSpots[b].hasOwnProperty("id")&&c.hotSpots[b].id===a){for(a=c.hotSpots[b].div;a.parentNode!=L;)a=a.parentNode;L.removeChild(a);
delete c.hotSpots[b].div;c.hotSpots.splice(b,1);return!0}return!1};this.resize=function(){w()};this.isLoaded=function(){return K};this.isOrientationSupported=function(){return oa||!1};this.stopOrientation=function(){E()};this.startOrientation=function(){oa&&M()};this.isOrientationActive=function(){return Boolean(Y)};this.on=function(a,b){V[a]=V[a]||[];V[a].push(b);return this};this.off=function(a,b){if(!a)return V={},this;if(b){var c=V[a].indexOf(b);0<=c&&V[a].splice(c,1);0==V[a].length&&delete V[a]}else delete V[a];
return this};this.destroy=function(){B&&B.destroy();Oa&&(H.removeEventListener("mousedown",za,!1),H.removeEventListener("dblclick",Aa,!1),f.removeEventListener("mousemove",Ba,!1),f.removeEventListener("mouseup",qa,!1),r.removeEventListener("mousewheel",P,!1),r.removeEventListener("DOMMouseScroll",P,!1),r.removeEventListener("mozfullscreenchange",w,!1),r.removeEventListener("webkitfullscreenchange",w,!1),r.removeEventListener("msfullscreenchange",w,!1),r.removeEventListener("fullscreenchange",w,!1),
I.removeEventListener("resize",ma,!1),I.removeEventListener("orientationchange",ma,!1),r.removeEventListener("keydown",Ca,!1),r.removeEventListener("keyup",sa,!1),r.removeEventListener("blur",T,!1),f.removeEventListener("mouseleave",qa,!1),H.removeEventListener("touchstart",ga,!1),H.removeEventListener("touchmove",ra,!1),H.removeEventListener("touchend",y,!1),H.removeEventListener("pointerdown",e,!1),H.removeEventListener("pointermove",a,!1),H.removeEventListener("pointerup",O,!1),H.removeEventListener("pointerleave",
O,!1));r.innerHTML="";r.classList.remove("pnlm-container");C.classList.remove("pnlm-grab");C.classList.remove("pnlm-grabbing")}}return{viewer:function(f,n){return new ea(f,n)}}}(window,document);
