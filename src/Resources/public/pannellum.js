// Pannellum 2.3.2, https://github.com/mpetroff/pannellum
window.libpannellum=function(J,f,m){function xa(Q){function $a(a,e){return 1==a.level&&1!=e.level?-1:1==e.level&&1!=a.level?1:e.timestamp-a.timestamp}function X(a,e){return a.level!=e.level?a.level-e.level:a.diff-e.diff}function R(a,e,d,f,p,b){this.vertices=a;this.side=e;this.level=d;this.x=f;this.y=p;this.path=b.replace("%s",e).replace("%l",d).replace("%x",f).replace("%y",p)}function ya(a,e,f,m,p){var b;var g=e.vertices;b=ga(a,g.slice(0,3));var t=ga(a,g.slice(3,6)),z=ga(a,g.slice(6,9)),g=ga(a,g.slice(9,
12)),x=b[0]+t[0]+z[0]+g[0];-4==x||4==x?b=!1:(x=b[1]+t[1]+z[1]+g[1],b=-4==x||4==x?!1:4!=b[2]+t[2]+z[2]+g[2]);if(b){b=e.vertices;t=b[0]+b[3]+b[6]+b[9];z=b[1]+b[4]+b[7]+b[10];g=b[2]+b[5]+b[8]+b[11];x=Math.sqrt(t*t+z*z+g*g);g=Math.asin(g/x);t=Math.atan2(z,t)-m;t+=t>Math.PI?-2*Math.PI:t<-Math.PI?2*Math.PI:0;t=Math.abs(t);e.diff=Math.acos(Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos(t));t=!1;for(z=0;z<d.nodeCache.length;z++)if(d.nodeCache[z].path==e.path){t=!0;d.nodeCache[z].timestamp=d.nodeCacheTimestamp++;
d.nodeCache[z].diff=e.diff;d.currentNodes.push(d.nodeCache[z]);break}t||(e.timestamp=d.nodeCacheTimestamp++,d.currentNodes.push(e),d.nodeCache.push(e));if(e.level<d.level){var g=s.cubeResolution*Math.pow(2,e.level-s.maxLevel),t=Math.ceil(g*s.invTileResolution)-1,z=g%s.tileResolution*2,B=2*g%s.tileResolution;0===B&&(B=s.tileResolution);0===z&&(z=2*s.tileResolution);x=0.5;if(e.x==t||e.y==t)x=1-s.tileResolution/(s.tileResolution+B);var r=1-x,g=[],u=x,S=x,G=x,n=r,y=r,C=r;if(B<s.tileResolution)if(e.x==
t&&e.y!=t){if(y=S=0.5,"d"==e.side||"u"==e.side)C=G=0.5}else e.x!=t&&e.y==t&&(n=u=0.5,"l"==e.side||"r"==e.side)&&(C=G=0.5);z<=s.tileResolution&&(e.x==t&&(u=0,n=1,"l"==e.side||"r"==e.side)&&(G=0,C=1),e.y==t&&(S=0,y=1,"d"==e.side||"u"==e.side)&&(G=0,C=1));B=[b[0],b[1],b[2],b[0]*u+b[3]*n,b[1]*x+b[4]*r,b[2]*G+b[5]*C,b[0]*u+b[6]*n,b[1]*S+b[7]*y,b[2]*G+b[8]*C,b[0]*x+b[9]*r,b[1]*S+b[10]*y,b[2]*G+b[11]*C];B=new R(B,e.side,e.level+1,2*e.x,2*e.y,s.fullpath);g.push(B);e.x==t&&z<=s.tileResolution||(B=[b[0]*u+
b[3]*n,b[1]*x+b[4]*r,b[2]*G+b[5]*C,b[3],b[4],b[5],b[3]*x+b[6]*r,b[4]*S+b[7]*y,b[5]*G+b[8]*C,b[0]*u+b[6]*n,b[1]*S+b[7]*y,b[2]*G+b[8]*C],B=new R(B,e.side,e.level+1,2*e.x+1,2*e.y,s.fullpath),g.push(B));e.x==t&&z<=s.tileResolution||e.y==t&&z<=s.tileResolution||(B=[b[0]*u+b[6]*n,b[1]*S+b[7]*y,b[2]*G+b[8]*C,b[3]*x+b[6]*r,b[4]*S+b[7]*y,b[5]*G+b[8]*C,b[6],b[7],b[8],b[9]*u+b[6]*n,b[10]*x+b[7]*r,b[11]*G+b[8]*C],B=new R(B,e.side,e.level+1,2*e.x+1,2*e.y+1,s.fullpath),g.push(B));e.y==t&&z<=s.tileResolution||(B=
[b[0]*x+b[9]*r,b[1]*S+b[10]*y,b[2]*G+b[11]*C,b[0]*u+b[6]*n,b[1]*S+b[7]*y,b[2]*G+b[8]*C,b[9]*u+b[6]*n,b[10]*x+b[7]*r,b[11]*G+b[8]*C,b[9],b[10],b[11]],B=new R(B,e.side,e.level+1,2*e.x,2*e.y+1,s.fullpath),g.push(B));for(e=0;e<g.length;e++)ya(a,g[e],f,m,p)}}}function za(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function ja(a,e,d){var f=Math.sin(e);e=Math.cos(e);
if("x"==d)return[a[0],e*a[1]+f*a[2],e*a[2]-f*a[1],a[3],e*a[4]+f*a[5],e*a[5]-f*a[4],a[6],e*a[7]+f*a[8],e*a[8]-f*a[7]];if("y"==d)return[e*a[0]-f*a[2],a[1],e*a[2]+f*a[0],e*a[3]-f*a[5],a[4],e*a[5]+f*a[3],e*a[6]-f*a[8],a[7],e*a[8]+f*a[6]];if("z"==d)return[e*a[0]+f*a[1],e*a[1]-f*a[0],a[2],e*a[3]+f*a[4],e*a[4]-f*a[3],a[5],e*a[6]+f*a[7],e*a[7]-f*a[6],a[8]]}function Aa(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}function oa(a){a.textureLoad||(a.textureLoad=
!0,Ja(encodeURI(a.path+"."+s.extension),function(e){a.texture=e;a.textureLoaded=!0}))}function ga(a,e){var d=[a[0]*e[0]+a[1]*e[1]+a[2]*e[2],a[4]*e[0]+a[5]*e[1]+a[6]*e[2],a[11]+a[8]*e[0]+a[9]*e[1]+a[10]*e[2],1/(a[12]*e[0]+a[13]*e[1]+a[14]*e[2])],f=d[0]*d[3],p=d[1]*d[3],d=d[2]*d[3],b=[0,0,0];-1>f&&(b[0]=-1);1<f&&(b[0]=1);-1>p&&(b[1]=-1);1<p&&(b[1]=1);if(-1>d||1<d)b[2]=1;return b}function pa(){console.log("Reducing canvas size due to error 1286!");y.width=Math.round(y.width/2);y.height=Math.round(y.height/
2)}var y=f.createElement("canvas");y.style.width=y.style.height="100%";Q.appendChild(y);var d,a,N,O,Ba,T,qa,ba,s,E,ka,F,ca,ra,Z;this.init=function(k,e,Ga,fa,p,b,g,t){e===m&&(e="equirectangular");if("equirectangular"!=e&&"cubemap"!=e&&"multires"!=e)throw console.log("Error: invalid image type specified!"),{type:"config error"};E=e;s=k;ka=Ga;if(d){N&&(a.detachShader(d,N),a.deleteShader(N));O&&(a.detachShader(d,O),a.deleteShader(O));a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
null);d.texture&&a.deleteTexture(d.texture);if(d.nodeCache)for(k=0;k<d.nodeCache.length;k++)a.deleteTexture(d.nodeCache[k].texture);a.deleteProgram(d);d=m}ba=m;"cubemap"==E&&0!==(s[0].width&s[0].width-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(a||(a=y.getContext("experimental-webgl",
{alpha:!1,depth:!1})),a&&1286==a.getError()&&pa());if(!a&&("multires"==E&&s.hasOwnProperty("fallbackPath")||"cubemap"==E)&&("WebkitAppearance"in f.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){T&&Q.removeChild(T);T=f.createElement("div");T.className="pnlm-world";fa=s.basePath?s.basePath+s.fallbackPath:s.fallbackPath;var z="frblud".split(""),x=0;p=function(){var a=f.createElement("canvas");a.className="pnlm-face pnlm-"+z[this.side]+
"face";T.appendChild(a);var b=a.getContext("2d");a.style.width=this.width+4+"px";a.style.height=this.height+4+"px";a.width=this.width+4;a.height=this.height+4;b.drawImage(this,2,2);var e=b.getImageData(0,0,a.width,a.height),d=e.data,k,n;for(k=2;k<a.width-2;k++)for(n=0;4>n;n++)d[4*(k+a.width)+n]=d[4*(k+2*a.width)+n],d[4*(k+a.width*(a.height-2))+n]=d[4*(k+a.width*(a.height-3))+n];for(k=2;k<a.height-2;k++)for(n=0;4>n;n++)d[4*(k*a.width+1)+n]=d[4*(k*a.width+2)+n],d[4*((k+1)*a.width-2)+n]=d[4*((k+1)*a.width-
3)+n];for(n=0;4>n;n++)d[4*(a.width+1)+n]=d[4*(2*a.width+2)+n],d[4*(2*a.width-2)+n]=d[4*(3*a.width-3)+n],d[4*(a.width*(a.height-2)+1)+n]=d[4*(a.width*(a.height-3)+2)+n],d[4*(a.width*(a.height-1)-2)+n]=d[4*(a.width*(a.height-2)-3)+n];for(k=1;k<a.width-1;k++)for(n=0;4>n;n++)d[4*k+n]=d[4*(k+a.width)+n],d[4*(k+a.width*(a.height-1))+n]=d[4*(k+a.width*(a.height-2))+n];for(k=1;k<a.height-1;k++)for(n=0;4>n;n++)d[k*a.width*4+n]=d[4*(k*a.width+1)+n],d[4*((k+1)*a.width-1)+n]=d[4*((k+1)*a.width-2)+n];for(n=0;4>
n;n++)d[n]=d[4*(a.width+1)+n],d[4*(a.width-1)+n]=d[4*(2*a.width-2)+n],d[a.width*(a.height-1)*4+n]=d[4*(a.width*(a.height-2)+1)+n],d[4*(a.width*a.height-1)+n]=d[4*(a.width*(a.height-1)-2)+n];b.putImageData(e,0,0);x++;6==x&&(Ba=this.width,Q.appendChild(T),g())};for(k=0;6>k;k++)b=new Image,b.crossOrigin="anonymous",b.side=k,b.onload=p,b.src="multires"==E?encodeURI(fa.replace("%s",z[k])+"."+s.extension):encodeURI(s[k].src)}else{if(!a)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};
s.fullpath=s.basePath?s.basePath+s.path:s.path;s.invTileResolution=1/s.tileResolution;e=za();qa=[];for(k=0;6>k;k++)qa[k]=e.slice(12*k,12*k+12),e=za();if("equirectangular"==E){if(k=Math.max(s.width,s.height),e=a.getParameter(a.MAX_TEXTURE_SIZE),k>e)throw console.log("Error: The image is too big; it's "+k+"px wide, but this device's maximum supported width is "+e+"px."),{type:"webgl size error",width:k,maxWidth:e};}else if("cubemap"==E&&(k=s[0].width,e=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),k>
e))throw console.log("Error: The cube face image is too big; it's "+k+"px wide, but this device's maximum supported width is "+e+"px."),{type:"webgl size error",width:k,maxWidth:e};t===m||t.horizonPitch===m&&t.horizonRoll===m||(ba=[t.horizonPitch==m?0:t.horizonPitch,t.horizonRoll==m?0:t.horizonRoll]);k=a.TEXTURE_2D;a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);N=a.createShader(a.VERTEX_SHADER);e=r;"multires"==E&&(e=u);a.shaderSource(N,e);a.compileShader(N);O=a.createShader(a.FRAGMENT_SHADER);
e=Ka;"cubemap"==E?(k=a.TEXTURE_CUBE_MAP,e=La):"multires"==E&&(e=la);a.shaderSource(O,e);a.compileShader(O);d=a.createProgram();a.attachShader(d,N);a.attachShader(d,O);a.linkProgram(d);a.getShaderParameter(N,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(N));a.getShaderParameter(O,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(O));a.getProgramParameter(d,a.LINK_STATUS)||console.log(a.getProgramInfoLog(d));a.useProgram(d);d.drawInProgress=!1;d.texCoordLocation=a.getAttribLocation(d,"a_texCoord");
a.enableVertexAttribArray(d.texCoordLocation);"multires"!=E?(F||(F=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,F),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW),a.vertexAttribPointer(d.texCoordLocation,2,a.FLOAT,!1,0,0),d.aspectRatio=a.getUniformLocation(d,"u_aspectRatio"),a.uniform1f(d.aspectRatio,a.drawingBufferWidth/a.drawingBufferHeight),d.psi=a.getUniformLocation(d,"u_psi"),d.theta=a.getUniformLocation(d,"u_theta"),d.f=a.getUniformLocation(d,"u_f"),
d.h=a.getUniformLocation(d,"u_h"),d.v=a.getUniformLocation(d,"u_v"),d.vo=a.getUniformLocation(d,"u_vo"),d.rot=a.getUniformLocation(d,"u_rot"),a.uniform1f(d.h,fa/(2*Math.PI)),a.uniform1f(d.v,p/Math.PI),a.uniform1f(d.vo,b/Math.PI*2),"equirectangular"==E&&(d.backgroundColor=a.getUniformLocation(d,"u_backgroundColor"),a.uniform4fv(d.backgroundColor,(t.backgroundColor?t.backgroundColor:[0,0,0]).concat([1]))),d.texture=a.createTexture(),a.bindTexture(k,d.texture),"cubemap"==E?(a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,
0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[1]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[3]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[4]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[5]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[0]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s[2])):a.texImage2D(k,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s),a.texParameteri(k,a.TEXTURE_WRAP_S,
a.CLAMP_TO_EDGE),a.texParameteri(k,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(k,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(k,a.TEXTURE_MAG_FILTER,a.LINEAR)):(d.vertPosLocation=a.getAttribLocation(d,"a_vertCoord"),a.enableVertexAttribArray(d.vertPosLocation),ca||(ca=a.createBuffer()),ra||(ra=a.createBuffer()),Z||(Z=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,ra),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,Z),a.bufferData(a.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2,0,2,3]),a.STATIC_DRAW),d.perspUniform=a.getUniformLocation(d,"u_perspMatrix"),d.cubeUniform=a.getUniformLocation(d,"u_cubeMatrix"),d.level=-1,d.currentNodes=[],d.nodeCache=[],d.nodeCacheTimestamp=0);fa=a.getError();if(0!==fa)throw console.log("Error: Something went wrong with WebGL!",fa),{type:"webgl error"};g()}};this.destroy=function(){Q!==m&&(y!==m&&Q.contains(y)&&Q.removeChild(y),T!==m&&Q.contains(T)&&Q.removeChild(T));if(a){var d=a.getExtension("WEBGL_lose_context");d&&
d.loseContext()}};this.resize=function(){var k=J.devicePixelRatio||1;y.width=y.clientWidth*k;y.height=y.clientHeight*k;a&&(1286==a.getError()&&pa(),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),"multires"!=E&&a.uniform1f(d.aspectRatio,y.clientWidth/y.clientHeight))};this.resize();this.setPose=function(a,d){ba=[a,d]};this.render=function(k,e,f,r){var p;p=0;r===m&&(r={});r.roll&&(p=r.roll);if(ba!==m){var b=ba[0],g=ba[1],t=k,u=e,x=Math.cos(g)*Math.sin(k)*Math.sin(b)+Math.cos(k)*(Math.cos(b)*
Math.cos(e)+Math.sin(g)*Math.sin(b)*Math.sin(e)),B=-Math.sin(k)*Math.sin(g)+Math.cos(k)*Math.cos(g)*Math.sin(e);k=Math.cos(g)*Math.cos(b)*Math.sin(k)+Math.cos(k)*(-Math.cos(e)*Math.sin(b)+Math.cos(b)*Math.sin(g)*Math.sin(e));k=Math.asin(Math.max(Math.min(k,1),-1));e=Math.atan2(B,x);b=[Math.cos(t)*(Math.sin(g)*Math.sin(b)*Math.cos(u)-Math.cos(b)*Math.sin(u)),Math.cos(t)*Math.cos(g)*Math.cos(u),Math.cos(t)*(Math.cos(b)*Math.sin(g)*Math.cos(u)+Math.sin(u)*Math.sin(b))];g=[-Math.cos(k)*Math.sin(e),Math.cos(k)*
Math.cos(e)];g=Math.acos(Math.max(Math.min((b[0]*g[0]+b[1]*g[1])/(Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])*Math.sqrt(g[0]*g[0]+g[1]*g[1])),1),-1));0>b[2]&&(g=2*Math.PI-g);p+=g}if(a||"multires"!=E&&"cubemap"!=E){if("multires"!=E)f=2*Math.atan(Math.tan(0.5*f)/(a.drawingBufferWidth/a.drawingBufferHeight)),f=1/Math.tan(0.5*f),a.uniform1f(d.psi,e),a.uniform1f(d.theta,k),a.uniform1f(d.rot,p),a.uniform1f(d.f,f),!0===ka&&"equirectangular"==E&&(a.bindTexture(a.TEXTURE_2D,d.texture),a.texImage2D(a.TEXTURE_2D,
0,a.RGB,a.RGB,a.UNSIGNED_BYTE,s)),a.drawArrays(a.TRIANGLES,0,6);else{b=a.drawingBufferWidth/a.drawingBufferHeight;g=2*Math.atan(Math.tan(f/2)*a.drawingBufferHeight/a.drawingBufferWidth);g=1/Math.tan(g/2);b=[g/b,0,0,0,0,g,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0];for(g=1;g<s.maxLevel&&a.drawingBufferWidth>s.tileResolution*Math.pow(2,g-1)*Math.tan(f/2)*0.707;)g++;d.level=g;g=[1,0,0,0,1,0,0,0,1];g=ja(g,-p,"z");g=ja(g,-k,"x");g=ja(g,e,"y");g=[g[0],g[1],g[2],0,g[3],g[4],g[5],0,g[6],g[7],g[8],0,0,0,0,1];a.uniformMatrix4fv(d.perspUniform,
!1,new Float32Array(Aa(b)));a.uniformMatrix4fv(d.cubeUniform,!1,new Float32Array(Aa(g)));b=[b[0]*g[0],b[0]*g[1],b[0]*g[2],0,b[5]*g[4],b[5]*g[5],b[5]*g[6],0,b[10]*g[8],b[10]*g[9],b[10]*g[10],b[11],-g[8],-g[9],-g[10],0];d.nodeCache.sort($a);if(200<d.nodeCache.length&&d.nodeCache.length>d.currentNodes.length+50)for(g=d.nodeCache.splice(200,d.nodeCache.length-200),p=0;p<g.length;p++)a.deleteTexture(g[p].texture);d.currentNodes=[];g="fbudlr".split("");for(p=0;6>p;p++)t=new R(qa[p],g[p],1,0,0,s.fullpath),
ya(b,t,k,e,f);d.currentNodes.sort(X);for(p=0;p<d.currentNodes.length;p++)if(!d.currentNodes[p].texture){setTimeout(oa,0,d.currentNodes[p]);break}if(!d.drawInProgress){d.drawInProgress=!0;for(k=0;k<d.currentNodes.length;k++)d.currentNodes[k].textureLoaded&&(a.bindBuffer(a.ARRAY_BUFFER,ca),a.bufferData(a.ARRAY_BUFFER,new Float32Array(d.currentNodes[k].vertices),a.STATIC_DRAW),a.vertexAttribPointer(d.vertPosLocation,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,ra),a.vertexAttribPointer(d.texCoordLocation,
2,a.FLOAT,!1,0,0),a.bindTexture(a.TEXTURE_2D,d.currentNodes[k].texture),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0));d.drawInProgress=!1}}if(r.returnImage!==m)return y.toDataURL("image/png")}else for(p=Ba/2,r={f:"translate3d(-"+(p+2)+"px, -"+(p+2)+"px, -"+p+"px)",b:"translate3d("+(p+2)+"px, -"+(p+2)+"px, "+p+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(p+2)+"px, -"+p+"px, "+(p+2)+"px) rotateX(270deg)",d:"translate3d(-"+(p+2)+"px, "+p+"px, -"+(p+2)+"px) rotateX(90deg)",l:"translate3d(-"+
p+"px, -"+(p+2)+"px, "+(p+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+p+"px, -"+(p+2)+"px, -"+(p+2)+"px) rotateY(270deg)"},f=1/Math.tan(f/2),f=f*a.drawingBufferWidth/2+"px",k="perspective("+f+") translateZ("+f+") rotateX("+k+"rad) rotateY("+e+"rad) ",e=Object.keys(r),p=0;6>p;p++)f=T.querySelector(".pnlm-"+e[p]+"face").style,f.webkitTransform=k+r[e[p]],f.transform=k+r[e[p]]};this.isLoading=function(){if(a&&"multires"==E)for(var f=0;f<d.currentNodes.length;f++)if(!d.currentNodes[f].textureLoaded)return!0;
return!1};this.getCanvas=function(){return y};var Ja=function(){function d(){var b=this;this.texture=this.callback=null;this.image=new Image;this.image.crossOrigin="anonymous";this.image.addEventListener("load",function(){var d=b.image;a.bindTexture(a.TEXTURE_2D,b.texture);a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null);b.callback(b.texture);p.length?(d=p.shift(),b.loadTexture(d.src,d.texture,d.callback)):m[f++]=b})}function e(a,b,d){this.src=a;this.texture=b;this.callback=d}var f=4,m={},p=[];d.prototype.loadTexture=function(a,b,d){this.texture=b;this.callback=d;this.image.src=a};for(var b=0;b<f;b++)m[b]=new d;return function(b,d){var k=a.createTexture();f?m[--f].loadTexture(b,k,d):p.push(new e(b,k,d));return k}}()}var r=
"attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",u="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",La="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);float cosphi = cos(phi);\ngl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));\n}",
Ka="precision mediump float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);lambda = mod(lambda + PI, PI * 2.0) - PI;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = u_backgroundColor;\nelse\ngl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}",
la="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(f,m,r,u){return new xa(f,m,r,u)}}}(window,document);window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(J,f){window.setTimeout(J,1E3/60)}}());
window.pannellum=function(J,f,m){function xa(r,u){function La(a){J.removeEventListener("deviceorientation",La);a&&null!==a.alpha&&null!==a.beta&&null!==a.gamma?(v.container.appendChild(v.orientation),ma=!0,Va&&Ia()):ma=!1}function Ka(){var a=f.createElement("div");a.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e";if(1==a.getElementsByTagName("i").length)X();else{sa=c.hfov;Ca=c.pitch;var h;if("cubemap"==c.type){P=[];for(a=0;6>a;a++)P.push(new Image),P[a].crossOrigin="anonymous";l.load.lbox.style.display=
"block";l.load.lbar.style.display="none"}else if("multires"==c.type)a=JSON.parse(JSON.stringify(c.multiRes)),c.basePath&&c.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(c.multiRes.basePath)?a.basePath=c.basePath+c.multiRes.basePath:c.multiRes.basePath?a.basePath=c.multiRes.basePath:c.basePath&&(a.basePath=c.basePath),P=a;else if(!0===c.dynamic)P=c.panorama;else{if(c.panorama===m){X(c.strings.noPanoramaError);return}P=new Image}if("cubemap"==c.type)for(var Wa=6,b=function(){Wa--;0===Wa&&Q()},d=function(a){var H=
f.createElement("a");H.href=a.target.src;H.innerHTML=H.href;X(c.strings.fileAccessError.replace("%s",H.outerHTML))},a=0;a<P.length;a++)P[a].onload=b,P[a].onerror=d,h=c.cubeMap[a],c.basePath&&!la(h)&&(h=c.basePath+h),P[a].src=encodeURI(h);else if("multires"==c.type)Q();else if(h="",c.basePath&&(h=c.basePath),!0!==c.dynamic){h=la(c.panorama)?c.panorama:h+c.panorama;P.onload=function(){J.URL.revokeObjectURL(this.src);Q()};var e=new XMLHttpRequest;e.onloadend=function(){if(200!=e.status){var a=f.createElement("a");
a.href=encodeURI(h);a.innerHTML=a.href;X(c.strings.fileAccessError.replace("%s",a.outerHTML))}xa(this.response);l.load.msg.innerHTML=""};e.onprogress=function(a){if(a.lengthComputable){l.load.lbarFill.style.width=a.loaded/a.total*100+"%";var H,c;1E6<a.total?(H="MB",c=(a.loaded/1E6).toFixed(2),a=(a.total/1E6).toFixed(2)):1E3<a.total?(H="kB",c=(a.loaded/1E3).toFixed(1),a=(a.total/1E3).toFixed(1)):(H="B",c=a.loaded,a=a.total);l.load.msg.innerHTML=c+" / "+a+" "+H}else l.load.lbox.style.display="block",
l.load.lbar.style.display="none"};try{e.open("GET",h,!0)}catch(g){X(c.strings.malformedURLError)}e.responseType="blob";e.setRequestHeader("Accept","image/*,*/*;q=0.9");e.send()}c.draggable&&D.classList.add("pnlm-grab");D.classList.remove("pnlm-grabbing")}}function la(a){return/^(?:[a-z]+:)?\/\//i.test(a)||"/"==a[0]||"blob:"==a.slice(0,5)}function Q(){A||(A=new libpannellum.renderer(M));Pa||(Pa=!0,I.addEventListener("mousedown",ya,!1),f.addEventListener("mousemove",Aa,!1),f.addEventListener("mouseup",
oa,!1),c.mouseZoom&&(D.addEventListener("mousewheel",O,!1),D.addEventListener("DOMMouseScroll",O,!1)),c.doubleClickZoom&&I.addEventListener("dblclick",za,!1),D.addEventListener("mozfullscreenchange",x,!1),D.addEventListener("webkitfullscreenchange",x,!1),D.addEventListener("msfullscreenchange",x,!1),D.addEventListener("fullscreenchange",x,!1),J.addEventListener("resize",ka,!1),J.addEventListener("orientationchange",ka,!1),c.disableKeyboardCtrl||(r.addEventListener("keydown",Ba,!1),r.addEventListener("keyup",
qa,!1),r.addEventListener("blur",T,!1)),f.addEventListener("mouseleave",oa,!1),I.addEventListener("touchstart",ga,!1),I.addEventListener("touchmove",pa,!1),I.addEventListener("touchend",y,!1),I.addEventListener("pointerdown",d,!1),I.addEventListener("pointermove",a,!1),I.addEventListener("pointerup",N,!1),I.addEventListener("pointerleave",N,!1),J.navigator.pointerEnabled&&(r.style.touchAction="none"));k();setTimeout(function(){},500)}function xa(a){var h=new FileReader;h.addEventListener("loadend",
function(){var b=h.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var d=b.indexOf("\u00ff\u00c2");(0>d||65536<d)&&X(c.strings.iOS8WebGLError)}d=b.indexOf("<x:xmpmeta");if(-1<d&&!0!==c.ignoreGPanoXMP){var e=b.substring(d,b.indexOf("</x:xmpmeta>")+12),f=function(a){var H;0<=e.indexOf(a+'="')?(H=e.substring(e.indexOf(a+'="')+a.length+2),H=H.substring(0,H.indexOf('"'))):0<=e.indexOf(a+">")&&(H=e.substring(e.indexOf(a+">")+a.length+1),H=H.substring(0,H.indexOf("<")));
return H!==m?Number(H):null},b=f("GPano:FullPanoWidthPixels"),d=f("GPano:CroppedAreaImageWidthPixels"),g=f("GPano:FullPanoHeightPixels"),k=f("GPano:CroppedAreaImageHeightPixels"),n=f("GPano:CroppedAreaTopPixels"),p=f("GPano:PoseHeadingDegrees"),l=f("GPano:PosePitchDegrees"),f=f("GPano:PoseRollDegrees");null!==b&&null!==d&&null!==g&&null!==k&&null!==n&&(0>$.indexOf("haov")&&(c.haov=d/b*360),0>$.indexOf("vaov")&&(c.vaov=k/g*180),0>$.indexOf("vOffset")&&(c.vOffset=-180*((n+k/2)/g-0.5)),null!==p&&0>$.indexOf("northOffset")&&
(c.northOffset=p,!1!==c.compass&&(c.compass=!0)),null!==l&&null!==f&&(0>$.indexOf("horizonPitch")&&(c.horizonPitch=l),0>$.indexOf("horizonRoll")&&(c.horizonRoll=f)))}P.src=J.URL.createObjectURL(a)});h.readAsBinaryString!==m?h.readAsBinaryString(a):h.readAsText(a)}function X(a){a===m&&(a=c.strings.genericWebGLError);l.errorMsg.innerHTML="<p>"+a+"</p>";v.load.style.display="none";l.load.box.style.display="none";l.errorMsg.style.display="table";Ma=!0;M.style.display="none";da("error",a)}function R(a){var c=
r.getBoundingClientRect(),b={};b.x=a.clientX-c.left;b.y=a.clientY-c.top;return b}function ya(a){a.preventDefault();r.focus();if(L&&c.draggable){var h=R(a);if(c.hotSpotDebug){var b=ja(a);console.log("Pitch: "+b[0]+", Yaw: "+b[1]+", Center Pitch: "+c.pitch+", Center Yaw: "+c.yaw+", HFOV: "+c.hfov)}Ha();n();c.roll=0;w.hfov=0;ha=!0;U=Date.now();ta=h.x;ua=h.y;Na=c.yaw;Oa=c.pitch;D.classList.add("pnlm-grabbing");D.classList.remove("pnlm-grab");da("mousedown",a);F()}}function za(a){c.minHfov===c.hfov?va.setHfov(sa,
1E3):(a=ja(a),va.lookAt(a[0],a[1],c.minHfov,1E3))}function ja(a){var h=R(a);a=A.getCanvas();var b=a.clientWidth,d=a.clientHeight;a=h.x/b*2-1;var d=(1-h.y/d*2)*d/b,e=1/Math.tan(c.hfov*Math.PI/360),f=Math.sin(c.pitch*Math.PI/180),g=Math.cos(c.pitch*Math.PI/180),h=e*g-d*f,b=Math.sqrt(a*a+h*h),d=180*Math.atan((d*g+e*f)/b)/Math.PI;a=180*Math.atan2(a/b,h/b)/Math.PI+c.yaw;-180>a&&(a+=360);180<a&&(a-=360);return[d,a]}function Aa(a){if(ha&&L){U=Date.now();var h=A.getCanvas(),b=h.clientWidth,h=h.clientHeight;
a=R(a);var d=180*(Math.atan(ta/b*2-1)-Math.atan(a.x/b*2-1))/Math.PI*c.hfov/90+Na;w.yaw=(d-c.yaw)%360*0.2;c.yaw=d;b=360*Math.atan(Math.tan(c.hfov/360*Math.PI)*h/b)/Math.PI;b=180*(Math.atan(a.y/h*2-1)-Math.atan(ua/h*2-1))/Math.PI*b/90+Oa;w.pitch=0.2*(b-c.pitch);c.pitch=b}}function oa(a){ha&&(ha=!1,15<Date.now()-U&&(w.pitch=w.yaw=0),D.classList.add("pnlm-grab"),D.classList.remove("pnlm-grabbing"),U=Date.now(),da("mouseup",a))}function ga(a){if(L&&c.draggable){Ha();n();c.roll=0;w.hfov=0;var h=R(a.targetTouches[0]);
ta=h.x;ua=h.y;if(2==a.targetTouches.length){var b=R(a.targetTouches[1]);ta+=0.5*(b.x-h.x);ua+=0.5*(b.y-h.y);Da=Math.sqrt((h.x-b.x)*(h.x-b.x)+(h.y-b.y)*(h.y-b.y))}ha=!0;U=Date.now();Na=c.yaw;Oa=c.pitch;da("touchstart",a);F()}}function pa(a){if(c.draggable&&(a.preventDefault(),L&&(U=Date.now()),ha&&L)){var h=R(a.targetTouches[0]),b=h.x,d=h.y;2==a.targetTouches.length&&-1!=Da&&(a=R(a.targetTouches[1]),b+=0.5*(a.x-h.x),d+=0.5*(a.y-h.y),h=Math.sqrt((h.x-a.x)*(h.x-a.x)+(h.y-a.y)*(h.y-a.y)),W(c.hfov+0.1*
(Da-h)),Da=h);h=c.hfov/360;b=(ta-b)*h+Na;w.yaw=(b-c.yaw)%360*0.2;c.yaw=b;d=(d-ua)*h+Oa;w.pitch=0.2*(d-c.pitch);c.pitch=d}}function y(){ha=!1;150<Date.now()-U&&(w.pitch=w.yaw=0);Da=-1;U=Date.now();da("touchend",event)}function d(a){"touch"==a.pointerType&&(ia.push(a.pointerId),wa.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=wa,ga(a),a.preventDefault())}function a(a){if("touch"==a.pointerType)for(var c=0;c<ia.length;c++)if(a.pointerId==ia[c]){wa[c].clientX=a.clientX;wa[c].clientY=a.clientY;
a.targetTouches=wa;pa(a);break}}function N(a){if("touch"==a.pointerType){for(var c=!1,b=0;b<ia.length;b++)a.pointerId==ia[b]&&(ia[b]=m),ia[b]&&(c=!0);c||(ia=[],wa=[],y());a.preventDefault()}}function O(a){L&&("fullscreenonly"!=c.mouseZoom||Ea)&&(a.preventDefault(),Ha(),U=Date.now(),a.wheelDeltaY?(W(c.hfov-0.05*a.wheelDeltaY),w.hfov=0>a.wheelDelta?1:-1):a.wheelDelta?(W(c.hfov-0.05*a.wheelDelta),w.hfov=0>a.wheelDelta?1:-1):a.detail&&(W(c.hfov+1.5*a.detail),w.hfov=0<a.detail?1:-1),F())}function Ba(a){Ha();
U=Date.now();n();c.roll=0;var h=a.which||a.keycode;0>Xa.indexOf(h)||(a.preventDefault(),27==h?Ea&&z():ba(h,!0))}function T(){for(var a=0;10>a;a++)q[a]=!1}function qa(a){var c=a.which||a.keycode;0>Xa.indexOf(c)||(a.preventDefault(),ba(c,!1))}function ba(a,c){var b=!1;switch(a){case 109:case 189:case 17:case 173:q[0]!=c&&(b=!0);q[0]=c;break;case 107:case 187:case 16:case 61:q[1]!=c&&(b=!0);q[1]=c;break;case 38:q[2]!=c&&(b=!0);q[2]=c;break;case 87:q[6]!=c&&(b=!0);q[6]=c;break;case 40:q[3]!=c&&(b=!0);
q[3]=c;break;case 83:q[7]!=c&&(b=!0);q[7]=c;break;case 37:q[4]!=c&&(b=!0);q[4]=c;break;case 65:q[8]!=c&&(b=!0);q[8]=c;break;case 39:q[5]!=c&&(b=!0);q[5]=c;break;case 68:q[9]!=c&&(b=!0),q[9]=c}b&&c&&(ea="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),F())}function s(){if(L){var a=!1,h=c.pitch,b=c.yaw,d=c.hfov,e;e="undefined"!==typeof performance&&performance.now()?performance.now():Date.now();ea===m&&(ea=e);var f=(e-ea)*c.hfov/1700,f=Math.min(f,1);q[0]&&!0===c.keyboardZoom&&
(W(c.hfov+(0.8*w.hfov+0.5)*f),a=!0);q[1]&&!0===c.keyboardZoom&&(W(c.hfov+(0.8*w.hfov-0.2)*f),a=!0);if(q[2]||q[6])c.pitch+=(0.8*w.pitch+0.2)*f,a=!0;if(q[3]||q[7])c.pitch+=(0.8*w.pitch-0.2)*f,a=!0;if(q[4]||q[8])c.yaw+=(0.8*w.yaw-0.2)*f,a=!0;if(q[5]||q[9])c.yaw+=(0.8*w.yaw+0.2)*f,a=!0;a&&(U=Date.now());Date.now();if(c.autoRotate){if(0.001<e-ea){var a=(e-ea)/1E3,g=(w.yaw/a*f-0.2*c.autoRotate)*a,g=(0<-c.autoRotate?1:-1)*Math.min(Math.abs(c.autoRotate*a),Math.abs(g));c.yaw+=g}c.autoRotateStopDelay&&(c.autoRotateStopDelay-=
e-ea,0>=c.autoRotateStopDelay&&(c.autoRotateStopDelay=!1,Y=c.autoRotate,c.autoRotate=0))}K.pitch&&(E("pitch"),h=c.pitch);K.yaw&&(E("yaw"),b=c.yaw);K.hfov&&(E("hfov"),d=c.hfov);0<f&&!c.autoRotate&&(q[4]||q[5]||q[8]||q[9]||K.yaw||(c.yaw+=w.yaw*f*0.85),q[2]||q[3]||q[6]||q[7]||K.pitch||(c.pitch+=w.pitch*f*0.85),q[0]||q[1]||K.hfov||W(c.hfov+w.hfov*f*0.85));ea=e;0<f&&(w.yaw=0.8*w.yaw+(c.yaw-b)/f*0.2,w.pitch=0.8*w.pitch+(c.pitch-h)/f*0.2,w.hfov=0.8*w.hfov+(c.hfov-d)/f*0.2,h=c.autoRotate?Math.abs(c.autoRotate):
5,w.yaw=Math.min(h,Math.max(w.yaw,-h)),w.pitch=Math.min(h,Math.max(w.pitch,-h)),w.hfov=Math.min(h,Math.max(w.hfov,-h)));q[0]&&q[0]&&(w.hfov=0);(q[2]||q[6])&&(q[3]||q[7])&&(w.pitch=0);(q[4]||q[8])&&(q[5]||q[9])&&(w.yaw=0)}}function E(a){var h=K[a],b=Math.min(1,Math.max((Date.now()-h.startTime)/1E3/(h.duration/1E3),0)),b=h.startPosition+c.animationTimingFunction(b)*(h.endPosition-h.startPosition);if(h.endPosition>h.startPosition&&b>=h.endPosition||h.endPosition<h.startPosition&&b<=h.endPosition||h.endPosition===
h.startPosition){b=h.endPosition;w[a]=0;var h=K[a].callback,d=K[a].callbackArgs;delete K[a];"function"==typeof h&&h(d)}c[a]=b}function ka(){x()}function F(){Qa||(Qa=!0,ca())}function ca(){ra();Ra&&clearTimeout(Ra);if(ha||!0===aa)requestAnimationFrame(ca);else if(q[0]||q[1]||q[2]||q[3]||q[4]||q[5]||q[6]||q[7]||q[8]||q[9]||c.autoRotate||K.pitch||K.yaw||K.hfov||0.01<Math.abs(w.yaw)||0.01<Math.abs(w.pitch)||0.01<Math.abs(w.hfov))s(),0<=c.autoRotateInactivityDelay&&Y&&Date.now()-U>c.autoRotateInactivityDelay&&
!c.autoRotate&&(c.autoRotate=Y,va.lookAt(Ca,m,sa,3E3)),requestAnimationFrame(ca);else if(A&&(A.isLoading()||!0===c.dynamic&&Ya))requestAnimationFrame(ca);else{Qa=!1;ea=m;var a=c.autoRotateInactivityDelay-(Date.now()-U);0<a?Ra=setTimeout(function(){c.autoRotate=Y;va.lookAt(Ca,m,sa,3E3);F()},a):0<=c.autoRotateInactivityDelay&&Y&&(c.autoRotate=Y,va.lookAt(Ca,m,sa,3E3),F())}}function ra(){var a;if(L){180<c.yaw?c.yaw-=360:-180>c.yaw&&(c.yaw+=360);a=c.yaw;var h=c.maxYaw-c.minYaw,d=-180,e=180;360>h&&(d=
c.minYaw+c.hfov/2,e=c.maxYaw-c.hfov/2,h<c.hfov&&(d=e=(d+e)/2));c.yaw=Math.max(d,Math.min(e,c.yaw));!1!==c.autoRotate&&a!=c.yaw&&(c.autoRotate*=-1);a=A.getCanvas();a=2*Math.atan(Math.tan(c.hfov/180*Math.PI*0.5)/(a.width/a.height))/Math.PI*180;h=c.minPitch+a/2;d=c.maxPitch-a/2;c.maxPitch-c.minPitch<a&&(h=d=(h+d)/2);isNaN(h)&&(h=-90);isNaN(d)&&(d=90);c.pitch=Math.max(h,Math.min(d,c.pitch));A.render(c.pitch*Math.PI/180,c.yaw*Math.PI/180,c.hfov*Math.PI/180,{roll:c.roll*Math.PI/180});c.hotSpots.forEach(b);
c.compass&&(Fa.style.transform="rotate("+(-c.yaw-c.northOffset)+"deg)",Fa.style.webkitTransform="rotate("+(-c.yaw-c.northOffset)+"deg)")}}function Z(a,c,b,d){this.w=a;this.x=c;this.y=b;this.z=d}function Ja(a){var h;h=a.alpha;var b=a.beta;a=a.gamma;b=[b?b*Math.PI/180/2:0,a?a*Math.PI/180/2:0,h?h*Math.PI/180/2:0];h=[Math.cos(b[0]),Math.cos(b[1]),Math.cos(b[2])];b=[Math.sin(b[0]),Math.sin(b[1]),Math.sin(b[2])];h=new Z(h[0]*h[1]*h[2]-b[0]*b[1]*b[2],b[0]*h[1]*h[2]-h[0]*b[1]*b[2],h[0]*b[1]*h[2]+b[0]*h[1]*
b[2],h[0]*h[1]*b[2]+b[0]*b[1]*h[2]);h=h.multiply(new Z(Math.sqrt(0.5),-Math.sqrt(0.5),0,0));b=J.orientation?-J.orientation*Math.PI/180/2:0;h=h.multiply(new Z(Math.cos(b),0,-Math.sin(b),0)).toEulerAngles();"number"==typeof aa&&10>aa?aa+=1:10===aa?(Za=h[2]/Math.PI*180+c.yaw,aa=!0,requestAnimationFrame(ca)):(c.pitch=h[0]/Math.PI*180,c.roll=-h[1]/Math.PI*180,c.yaw=-h[2]/Math.PI*180+Za)}function k(){try{var a={};c.horizonPitch!==m&&(a.horizonPitch=c.horizonPitch*Math.PI/180);c.horizonRoll!==m&&(a.horizonRoll=
c.horizonRoll*Math.PI/180);c.backgroundColor!==m&&(a.backgroundColor=c.backgroundColor);A.init(P,c.type,c.dynamic,c.haov*Math.PI/180,c.vaov*Math.PI/180,c.vOffset*Math.PI/180,e,a);!0!==c.dynamic&&(P=m)}catch(b){if("webgl error"==b.type||"no webgl"==b.type)X();else if("webgl size error"==b.type)X(c.strings.textureSizeError.replace("%s",b.width).replace("%s",b.maxWidth));else throw X(c.strings.unknownError),b;}}function e(){if(c.sceneFadeDuration&&A.fadeImg!==m){A.fadeImg.style.opacity=0;var a=A.fadeImg;
delete A.fadeImg;setTimeout(function(){M.removeChild(a);da("scenechangefadedone")},c.sceneFadeDuration)}Fa.style.display=c.compass?"inline":"none";fa();l.load.box.style.display="none";na!==m&&(M.removeChild(na),na=m);L=!0;da("load");F()}function Ga(a){a.pitch=Number(a.pitch)||0;a.yaw=Number(a.yaw)||0;var b=f.createElement("div");b.className="pnlm-hotspot-base";b.className=a.cssClass?b.className+(" "+a.cssClass):b.className+(" pnlm-hotspot pnlm-sprite pnlm-"+C(a.type));var d=f.createElement("span");
a.text&&(d.innerHTML=C(a.text));var e;if(a.video){e=f.createElement("video");var g=a.video;c.basePath&&!la(g)&&(g=c.basePath+g);e.src=encodeURI(g);e.controls=!0;e.style.width=a.width+"px";M.appendChild(b);d.appendChild(e)}else if(a.image){g=a.image;c.basePath&&!la(g)&&(g=c.basePath+g);e=f.createElement("a");e.href=encodeURI(a.URL?a.URL:g);e.target="_blank";d.appendChild(e);var k=f.createElement("img");k.src=encodeURI(g);k.style.width=a.width+"px";k.style.paddingTop="5px";M.appendChild(b);e.appendChild(k);
d.style.maxWidth="initial"}else a.URL?(e=f.createElement("a"),e.href=encodeURI(a.URL),e.target="_blank",M.appendChild(e),b.style.cursor="pointer",d.style.cursor="pointer",e.appendChild(b)):(a.sceneId&&(b.onclick=b.ontouchend=function(){b.clicked||(b.clicked=!0,G(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov));return!1},b.style.cursor="pointer",d.style.cursor="pointer"),M.appendChild(b));if(a.createTooltipFunc)a.createTooltipFunc(b,a.createTooltipArgs);else if(a.text||a.video||a.image)b.classList.add("pnlm-tooltip"),
b.appendChild(d),d.style.width=d.scrollWidth-20+"px",d.style.marginLeft=-(d.scrollWidth-b.offsetWidth)/2+"px",d.style.marginTop=-d.scrollHeight-12+"px";a.clickHandlerFunc&&(b.addEventListener("click",function(c){a.clickHandlerFunc(c,a.clickHandlerArgs)},"false"),b.style.cursor="pointer",d.style.cursor="pointer");a.div=b}function fa(){Sa||(c.hotSpots?(c.hotSpots=c.hotSpots.sort(function(a,c){return a.pitch<c.pitch}),c.hotSpots.forEach(Ga)):c.hotSpots=[],Sa=!0,c.hotSpots.forEach(b))}function p(){var a=
c.hotSpots;Sa=!1;delete c.hotSpots;if(a)for(var b=0;b<a.length;b++){for(var d=a[b].div;d.parentNode!=M;)d=d.parentNode;M.removeChild(d);delete a[b].div}}function b(a){var b=Math.sin(a.pitch*Math.PI/180),d=Math.cos(a.pitch*Math.PI/180),e=Math.sin(c.pitch*Math.PI/180),f=Math.cos(c.pitch*Math.PI/180),g=Math.cos((-a.yaw+c.yaw)*Math.PI/180),k=b*e+d*g*f;if(90>=a.yaw&&-90<a.yaw&&0>=k||(90<a.yaw||-90>=a.yaw)&&0>=k)a.div.style.visibility="hidden";else{var n=Math.sin((-a.yaw+c.yaw)*Math.PI/180),p=Math.tan(c.hfov*
Math.PI/360);a.div.style.visibility="visible";var m=A.getCanvas(),l=m.clientWidth,m=m.clientHeight,b=[-l/p*n*d/k/2,-l/p*(b*f-d*g*e)/k/2],d=Math.sin(c.roll*Math.PI/180),e=Math.cos(c.roll*Math.PI/180),b=[b[0]*e-b[1]*d,b[0]*d+b[1]*e];b[0]+=(l-a.div.offsetWidth)/2;b[1]+=(m-a.div.offsetHeight)/2;l="translate("+b[0]+"px, "+b[1]+"px) translateZ(9999px) rotate("+c.roll+"deg)";a.div.style.webkitTransform=l;a.div.style.MozTransform=l;a.div.style.transform=l}}function g(a){c={};var b,d,e="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");
$=[];for(b in Ta)Ta.hasOwnProperty(b)&&(c[b]=Ta[b]);for(b in u.default)if(u.default.hasOwnProperty(b))if("strings"==b)for(d in u.default.strings)u.default.strings.hasOwnProperty(d)&&(c.strings[d]=C(u.default.strings[d]));else c[b]=u.default[b],0<=e.indexOf(b)&&$.push(b);if(null!==a&&""!==a&&u.scenes&&u.scenes[a]){var f=u.scenes[a];for(b in f)if(f.hasOwnProperty(b))if("strings"==b)for(d in f.strings)f.strings.hasOwnProperty(d)&&(c.strings[d]=C(f.strings[d]));else c[b]=f[b],0<=e.indexOf(b)&&$.push(b);
c.scene=a}for(b in u)if(u.hasOwnProperty(b))if("strings"==b)for(d in u.strings)u.strings.hasOwnProperty(d)&&(c.strings[d]=C(u.strings[d]));else c[b]=u[b],0<=e.indexOf(b)&&$.push(b)}function t(a){if((a=a?a:!1)&&"preview"in c){var b=c.preview;c.basePath&&!la(b)&&(b=c.basePath+b);na=f.createElement("div");na.className="pnlm-preview-img";na.style.backgroundImage="url('"+encodeURI(b)+"')";M.appendChild(na)}var b=c.title,d=c.author;a&&("previewTitle"in c&&(c.title=c.previewTitle),"previewAuthor"in c&&(c.author=
c.previewAuthor));c.hasOwnProperty("title")||(l.title.innerHTML="");c.hasOwnProperty("author")||(l.author.innerHTML="");c.hasOwnProperty("title")||c.hasOwnProperty("author")||(l.container.style.display="none");v.load.innerHTML="<p>"+c.strings.loadButtonLabel+"</p>";l.load.boxp.innerHTML=c.strings.loadingLabel;for(var e in c)if(c.hasOwnProperty(e))switch(e){case "title":l.title.innerHTML=C(c[e]);l.container.style.display="inline";break;case "author":l.author.innerHTML=c.strings.bylineLabel.replace("%s",
C(c[e]));l.container.style.display="inline";break;case "fallback":l.errorMsg.innerHTML='<p>Your browser does not support WebGL.<br><a href="'+encodeURI(c[e])+'" target="_blank">Click here to view this panorama in an alternative viewer.</a></p>';break;case "hfov":W(Number(c[e]));break;case "autoLoad":!0===c[e]&&A===m&&(l.load.box.style.display="inline",v.load.style.display="none",Ka());break;case "showZoomCtrl":v.zoom.style.display=c[e]&&!1!=c.showControls?"block":"none";break;case "showFullscreenCtrl":v.fullscreen.style.display=
c[e]&&!1!=c.showControls&&("fullscreen"in f||"mozFullScreen"in f||"webkitIsFullScreen"in f||"msFullscreenElement"in f)?"block":"none";break;case "hotSpotDebug":Ua.style.display=c[e]?"block":"none";break;case "showControls":c[e]||(v.orientation.style.display="none",v.zoom.style.display="none",v.fullscreen.style.display="none");break;case "orientationOnByDefault":c[e]&&(ma===m?Va=!0:!0===ma&&Ia())}a&&(b?c.title=b:delete c.title,d?c.author=d:delete c.author)}function z(){if(L&&!Ma)if(Ea)f.exitFullscreen?
f.exitFullscreen():f.mozCancelFullScreen?f.mozCancelFullScreen():f.webkitCancelFullScreen?f.webkitCancelFullScreen():f.msExitFullscreen&&f.msExitFullscreen();else try{r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullScreen()}catch(a){}}function x(){f.fullscreen||f.mozFullScreen||f.webkitIsFullScreen||f.msFullscreenElement?(v.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Ea=
!0):(v.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),Ea=!1);A.resize();W(c.hfov);F()}function B(a){var b=c.minHfov;"multires"==c.type&&A&&(b=Math.min(b,A.getCanvas().width/(c.multiRes.cubeResolution/90*0.9)));return b>c.maxHfov?(console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),c.hfov):a<b?b:a>c.maxHfov?c.maxHfov:a}function W(a){c.hfov=B(a)}function Ha(){K={};Y=c.autoRotate?c.autoRotate:Y;c.autoRotate=!1}function S(){Ma&&(l.load.box.style.display="none",l.errorMsg.style.display=
"none",Ma=!1,da("errorcleared"));v.load.style.display="none";l.load.box.style.display="inline";Ka()}function G(a,b,d,e,f){L=!1;K={};var k,l;if(c.sceneFadeDuration&&!f&&(k=A.render(c.pitch*Math.PI/180,c.yaw*Math.PI/180,c.hfov*Math.PI/180,{returnImage:!0}),k!==m)){f=new Image;f.className="pnlm-fade-img";f.style.transition="opacity "+c.sceneFadeDuration/1E3+"s";f.style.width="100%";f.style.height="100%";f.onload=function(){G(a,b,d,e,!0)};f.src=k;M.appendChild(f);A.fadeImg=f;return}f="same"===b?c.pitch:
b;k="same"===d?c.yaw:"sameAzimuth"===d?c.yaw+(c.northOffset||0)-(u.scenes[a].northOffset||0):d;l="same"===e?c.hfov:e;p();g(a);w.yaw=w.pitch=w.hfov=0;t();f!==m&&(c.pitch=f);k!==m&&(c.yaw=k);l!==m&&(c.hfov=l);da("scenechange",a);S()}function n(){J.removeEventListener("deviceorientation",Ja);v.orientation.classList.remove("pnlm-orientation-button-active");aa=!1}function Ia(){aa=1;J.addEventListener("deviceorientation",Ja);v.orientation.classList.add("pnlm-orientation-button-active")}function C(a){return u.escapeHTML?
String(a).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(a).split("\n").join("<br>")}function da(a){if(a in V)for(var c=V[a].length;0<c;c--)V[a][V[a].length-c].apply(null,[].slice.call(arguments,1))}var va=this,c,A,na,ha=!1,U=Date.now(),ta=0,ua=0,Da=-1,Na=0,Oa=0,q=Array(10),Ea=!1,L=!1,Ma=!1,Pa=!1,P,ea,w={yaw:0,pitch:0,hfov:0},Qa=!1,aa=!1,Za=0,Ra,Y=0,sa,Ca,K={},V=
{},$=[],Ya=!1,Sa=!1,Ta={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:m,maxPitch:m,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:m,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],animationTimingFunction:function(a){return 0.5>a?2*a*a:-1+
(4-2*a)*a},draggable:!0,disableKeyboardCtrl:!1,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",
textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}},Xa=[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189];r="string"===typeof r?f.getElementById(r):r;r.classList.add("pnlm-container");r.tabIndex=0;var D=f.createElement("div");D.className="pnlm-ui";r.appendChild(D);var M=f.createElement("div");
M.className="pnlm-render-container";r.appendChild(M);var I=f.createElement("div");I.className="pnlm-dragfix";D.appendChild(I);var l={},Ua=f.createElement("div");Ua.className="pnlm-sprite pnlm-hot-spot-debug-indicator";D.appendChild(Ua);l.container=f.createElement("div");l.container.className="pnlm-panorama-info";l.title=f.createElement("div");l.title.className="pnlm-title-box";l.container.appendChild(l.title);l.author=f.createElement("div");l.author.className="pnlm-author-box";l.container.appendChild(l.author);
D.appendChild(l.container);l.load={};l.load.box=f.createElement("div");l.load.box.className="pnlm-load-box";l.load.boxp=f.createElement("p");l.load.box.appendChild(l.load.boxp);l.load.lbox=f.createElement("div");l.load.lbox.className="pnlm-lbox";l.load.lbox.innerHTML='<div class="pnlm-loading"></div>';l.load.box.appendChild(l.load.lbox);l.load.lbar=f.createElement("div");l.load.lbar.className="pnlm-lbar";l.load.lbarFill=f.createElement("div");l.load.lbarFill.className="pnlm-lbar-fill";l.load.lbar.appendChild(l.load.lbarFill);
l.load.box.appendChild(l.load.lbar);l.load.msg=f.createElement("p");l.load.msg.className="pnlm-lmsg";l.load.box.appendChild(l.load.msg);D.appendChild(l.load.box);l.errorMsg=f.createElement("div");l.errorMsg.className="pnlm-error-msg pnlm-info-box";D.appendChild(l.errorMsg);var v={};v.container=f.createElement("div");v.container.className="pnlm-controls-container";D.appendChild(v.container);v.load=f.createElement("div");v.load.className="pnlm-load-button";v.load.addEventListener("click",function(){t();
S()});D.appendChild(v.load);v.zoom=f.createElement("div");v.zoom.className="pnlm-zoom-controls pnlm-controls";v.zoomIn=f.createElement("div");v.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control";v.zoomIn.addEventListener("click",function(){L&&(W(c.hfov-5),F())});v.zoom.appendChild(v.zoomIn);v.zoomOut=f.createElement("div");v.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control";v.zoomOut.addEventListener("click",function(){L&&(W(c.hfov+5),F())});v.zoom.appendChild(v.zoomOut);v.container.appendChild(v.zoom);
v.fullscreen=f.createElement("div");v.fullscreen.addEventListener("click",z);v.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control";(f.fullscreenEnabled||f.mozFullScreenEnabled||f.webkitFullscreenEnabled||f.msFullscreenEnabled)&&v.container.appendChild(v.fullscreen);v.orientation=f.createElement("div");v.orientation.addEventListener("click",function(a){aa?n():Ia()});v.orientation.addEventListener("mousedown",function(a){a.stopPropagation()});
v.orientation.addEventListener("touchstart",function(a){a.stopPropagation()});v.orientation.addEventListener("pointerdown",function(a){a.stopPropagation()});v.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var ma,Va=!1;J.DeviceOrientationEvent?J.addEventListener("deviceorientation",La):ma=!1;var Fa=f.createElement("div");Fa.className="pnlm-compass pnlm-controls pnlm-control";D.appendChild(Fa);u.firstScene?g(u.firstScene):u.default&&
u.default.firstScene?g(u.default.firstScene):g(null);t(!0);var ia=[],wa=[];Z.prototype.multiply=function(a){return new Z(this.w*a.w-this.x*a.x-this.y*a.y-this.z*a.z,this.x*a.w+this.w*a.x+this.y*a.z-this.z*a.y,this.y*a.w+this.w*a.y+this.z*a.x-this.x*a.z,this.z*a.w+this.w*a.z+this.x*a.y-this.y*a.x)};Z.prototype.toEulerAngles=function(){var a=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),c=Math.asin(2*(this.w*this.y-this.z*this.x)),b=Math.atan2(2*(this.w*this.z+this.x*
this.y),1-2*(this.y*this.y+this.z*this.z));return[a,c,b]};this.isLoaded=function(){return L};this.getPitch=function(){return c.pitch};this.setPitch=function(a,b,d,e){(b=b==m?1E3:Number(b))?K.pitch={startTime:Date.now(),startPosition:c.pitch,endPosition:a,duration:b,callback:d,callbackArgs:e}:c.pitch=a;F();return this};this.getPitchBounds=function(){return[c.minPitch,c.maxPitch]};this.setPitchBounds=function(a){c.minPitch=Math.max(-90,Math.min(a[0],90));c.maxPitch=Math.max(-90,Math.min(a[1],90));return this};
this.getYaw=function(){return c.yaw};this.setYaw=function(a,b,d,e){b=b==m?1E3:Number(b);a=(a+180)%360-180;b?(180<c.yaw-a?a+=360:180<a-c.yaw&&(a-=360),K.yaw={startTime:Date.now(),startPosition:c.yaw,endPosition:a,duration:b,callback:d,callbackArgs:e}):c.yaw=a;F();return this};this.getYawBounds=function(){return[c.minYaw,c.maxYaw]};this.setYawBounds=function(a){c.minYaw=Math.max(-180,Math.min(a[0],180));c.maxYaw=Math.max(-180,Math.min(a[1],180));return this};this.getHfov=function(){return c.hfov};this.setHfov=
function(a,b,d,e){(b=b==m?1E3:Number(b))?K.hfov={startTime:Date.now(),startPosition:c.hfov,endPosition:B(a),duration:b,callback:d,callbackArgs:e}:W(a);F();return this};this.getHfovBounds=function(){return[c.minHfov,c.maxHfov]};this.setHfovBounds=function(a){c.minHfov=Math.max(0,a[0]);c.maxHfov=Math.max(0,a[1]);return this};this.lookAt=function(a,b,c,d,e,f){d=d==m?1E3:Number(d);a!==m&&(this.setPitch(a,d,e,f),e=m);b!==m&&(this.setYaw(b,d,e,f),e=m);c!==m&&this.setHfov(c,d,e,f);return this};this.getNorthOffset=
function(){return c.northOffset};this.setNorthOffset=function(a){c.northOffset=Math.min(360,Math.max(0,a));F();return this};this.getHorizonRoll=function(){return c.horizonRoll};this.setHorizonRoll=function(a){c.horizonRoll=Math.min(90,Math.max(-90,a));A.setPose(c.horizonPitch*Math.PI/180,c.horizonRoll*Math.PI/180);F();return this};this.getHorizonPitch=function(){return c.horizonPitch};this.setHorizonPitch=function(a){c.horizonPitch=Math.min(90,Math.max(-90,a));A.setPose(c.horizonPitch*Math.PI/180,
c.horizonRoll*Math.PI/180);F();return this};this.startAutoRotate=function(a){a=a||Y||1;c.autoRotate=a;va.lookAt(Ca,m,sa,3E3);F();return this};this.stopAutoRotate=function(){Y=c.autoRotate?c.autoRotate:Y;c.autoRotate=!1;c.autoRotateInactivityDelay=-1;return this};this.getRenderer=function(){return A};this.setUpdate=function(a){Ya=!0===a;A===m?Q():F();return this};this.mouseEventToCoords=function(a){return ja(a)};this.loadScene=function(a,b,c,d){L&&G(a,b,c,d);return this};this.getScene=function(){return c.scene};
this.addScene=function(a,b){u.scenes[a]=b;return this};this.removeScene=function(a){if(c.scene===a||!u.scenes.hasOwnProperty(a))return!1;delete u.scenes[a];return!0};this.toggleFullscreen=function(){z();return this};this.getConfig=function(){return c};this.addHotSpot=function(a,d){if(d===m&&c.scene===m)c.hotSpots.push(a);else{var e=d!==m?d:c.scene;if(u.scenes.hasOwnProperty(e))u.scenes[e].hasOwnProperty("hotSpots")||(u.scenes[e].hotSpots=[],e==c.scene&&(c.hotSpots=u.scenes[e].hotSpots)),u.scenes[e].hotSpots.push(a);
else throw"Invalid scene ID!";}if(d===m||c.scene==d)Ga(a),L&&b(a);return this};this.removeHotSpot=function(a){if(!c.hotSpots)return!1;for(var b=0;b<c.hotSpots.length;b++)if(c.hotSpots[b].hasOwnProperty("id")&&c.hotSpots[b].id===a){for(a=c.hotSpots[b].div;a.parentNode!=M;)a=a.parentNode;M.removeChild(a);delete c.hotSpots[b].div;c.hotSpots.splice(b,1);return!0}return!1};this.resize=function(){x()};this.isLoaded=function(){return L};this.isOrientationSupported=function(){return ma||!1};this.stopOrientation=
function(){n()};this.startOrientation=function(){ma&&Ia()};this.on=function(a,b){V[a]=V[a]||[];V[a].push(b);return this};this.off=function(a,b){if(!a)return V={},this;if(b){var c=V[a].indexOf(b);0<=c&&V[a].splice(c,1);0==V[a].length&&delete V[a]}else delete V[a];return this};this.destroy=function(){A&&A.destroy();Pa&&(I.removeEventListener("mousedown",ya,!1),I.removeEventListener("dblclick",za,!1),f.removeEventListener("mousemove",Aa,!1),f.removeEventListener("mouseup",oa,!1),r.removeEventListener("mousewheel",
O,!1),r.removeEventListener("DOMMouseScroll",O,!1),r.removeEventListener("mozfullscreenchange",x,!1),r.removeEventListener("webkitfullscreenchange",x,!1),r.removeEventListener("msfullscreenchange",x,!1),r.removeEventListener("fullscreenchange",x,!1),J.removeEventListener("resize",ka,!1),J.removeEventListener("orientationchange",ka,!1),r.removeEventListener("keydown",Ba,!1),r.removeEventListener("keyup",qa,!1),r.removeEventListener("blur",T,!1),f.removeEventListener("mouseleave",oa,!1),I.removeEventListener("touchstart",
ga,!1),I.removeEventListener("touchmove",pa,!1),I.removeEventListener("touchend",y,!1),I.removeEventListener("pointerdown",d,!1),I.removeEventListener("pointermove",a,!1),I.removeEventListener("pointerup",N,!1),I.removeEventListener("pointerleave",N,!1));r.innerHTML="";r.classList.remove("pnlm-container");D.classList.remove("pnlm-grab");D.classList.remove("pnlm-grabbing")}}return{viewer:function(f,m){return new xa(f,m)}}}(window,document);
