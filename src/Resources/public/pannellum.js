// Pannellum 2.5.6, https://github.com/mpetroff/pannellum
window.libpannellum=function(F,k,n){function sa(M,ma){function ta(b,a){return 1==b.level&&1!=a.level?-1:1==a.level&&1!=b.level?1:a.timestamp-b.timestamp}function ga(b,a){return b.level!=a.level?b.level-a.level:b.diff-a.diff}function ua(b,a,f,d,e,l,p){this.vertices=b;this.side=a;this.level=f;this.x=d;this.y=e;b="object"===typeof l?l.tileKey:l;b=b.replace("%s",a).replace("%l0",f-1).replace("%l",f).replace("%x",d).replace("%y",e);this.path="object"===typeof l?l[b]:b;this.parentPath=p}function Pa(b,J,
f,K,e,l){var p;var m=f.vertices;p=va(b,m.slice(0,3));var k=va(b,m.slice(3,6)),u=va(b,m.slice(6,9)),m=va(b,m.slice(9,12)),c=p[0]+k[0]+u[0]+m[0];-4==c||4==c?p=!1:(c=p[1]+k[1]+u[1]+m[1],p=-4==c||4==c?!1:4!=p[2]+k[2]+u[2]+m[2]);if(p){for(var c=[],n=[],s=2,q=[],x=0,m=0;4>m;m++)p=Ra(J,f.vertices.slice(3*m,3*(m+1))),c.push(p[0]*p[3]),n.push(p[1]*p[3]),p=p[2]*p[3],s=Math.min(s,p),q.push(1>=Math.abs(c[m])&&1>=Math.abs(n[m])&&0<p),x+=q[m];u=g.cubeResolution*Math.pow(2,f.level-g.maxLevel);p=Math.ceil(u*g.invTileResolution)-
1;k=u%g.tileResolution*2;u=2*u%g.tileResolution;0===u&&(u=g.tileResolution);0===k&&(k=2*g.tileResolution);if(1<f.level&&0<s&&0<x){for(m=s=0;4>m;m++)if(x=(m+1)%4,q[m]||q[x]){var y=(c[x]-c[m])*a.drawingBufferWidth/2,x=(n[x]-n[m])*a.drawingBufferHeight/2;u<g.tileResolution&&(f.x==p?y*=g.tileResolution/u:f.y==p&&(x*=g.tileResolution/u));k<=g.tileResolution&&(f.x==p&&(y*=2),f.y==p&&(x*=2));s=Math.max(s,Math.sqrt(y*y+x*x))}if(s<=g.tileResolution/2)return}c=f.vertices;m=c[0]+c[3]+c[6]+c[9];n=c[1]+c[4]+c[7]+
c[10];q=c[2]+c[5]+c[8]+c[11];s=Math.sqrt(m*m+n*n+q*q);q=Math.asin(q/s);m=Math.atan2(n,m)-e;m+=m>Math.PI?-2*Math.PI:m<-Math.PI?2*Math.PI:0;m=Math.abs(m);f.diff=Math.acos(Math.sin(K)*Math.sin(q)+Math.cos(K)*Math.cos(q)*Math.cos(m));m=!1;for(n=0;n<d.nodeCache.length;n++)if(d.nodeCache[n].path==f.path){m=!0;d.nodeCache[n].timestamp=d.nodeCacheTimestamp++;d.nodeCache[n].diff=f.diff;d.currentNodes.push(d.nodeCache[n]);break}m||(f.timestamp=d.nodeCacheTimestamp++,d.currentNodes.push(f),d.nodeCache.push(f));
if(f.level<g.maxLevel){q=0.5;if(f.x==p||f.y==p)q=1-g.tileResolution/(g.tileResolution+u);var m=1-q,n=[],y=x=s=q,t=m,v=m,A=m;if(u<g.tileResolution)if(f.x==p&&f.y!=p){if(v=x=0.5,"d"==f.side||"u"==f.side)A=y=0.5}else f.x!=p&&f.y==p&&(t=s=0.5,"l"==f.side||"r"==f.side)&&(A=y=0.5);k<=g.tileResolution&&(f.x==p&&(s=0,t=1,"l"==f.side||"r"==f.side)&&(y=0,A=1),f.y==p&&(x=0,v=1,"d"==f.side||"u"==f.side)&&(y=0,A=1));u=new Float32Array([c[0],c[1],c[2],c[0]*s+c[3]*t,c[1]*q+c[4]*m,c[2]*y+c[5]*A,c[0]*s+c[6]*t,c[1]*
x+c[7]*v,c[2]*y+c[8]*A,c[0]*q+c[9]*m,c[1]*x+c[10]*v,c[2]*y+c[11]*A]);u=new ua(u,f.side,f.level+1,2*f.x,2*f.y,g.fullpath,f.path);n.push(u);f.x==p&&k<=g.tileResolution||(u=new Float32Array([c[0]*s+c[3]*t,c[1]*q+c[4]*m,c[2]*y+c[5]*A,c[3],c[4],c[5],c[3]*q+c[6]*m,c[4]*x+c[7]*v,c[5]*y+c[8]*A,c[0]*s+c[6]*t,c[1]*x+c[7]*v,c[2]*y+c[8]*A]),u=new ua(u,f.side,f.level+1,2*f.x+1,2*f.y,g.fullpath,f.path),n.push(u));f.x==p&&k<=g.tileResolution||f.y==p&&k<=g.tileResolution||(u=new Float32Array([c[0]*s+c[6]*t,c[1]*
x+c[7]*v,c[2]*y+c[8]*A,c[3]*q+c[6]*m,c[4]*x+c[7]*v,c[5]*y+c[8]*A,c[6],c[7],c[8],c[9]*s+c[6]*t,c[10]*q+c[7]*m,c[11]*y+c[8]*A]),u=new ua(u,f.side,f.level+1,2*f.x+1,2*f.y+1,g.fullpath,f.path),n.push(u));f.y==p&&k<=g.tileResolution||(u=new Float32Array([c[0]*q+c[9]*m,c[1]*x+c[10]*v,c[2]*y+c[11]*A,c[0]*s+c[6]*t,c[1]*x+c[7]*v,c[2]*y+c[8]*A,c[9]*s+c[6]*t,c[10]*q+c[7]*m,c[11]*y+c[8]*A,c[9],c[10],c[11]]),u=new ua(u,f.side,f.level+1,2*f.x,2*f.y+1,g.fullpath,f.path),n.push(u));for(x=0;x<n.length;x++)Pa(b,J,
n[x],K,e,l)}}}function xa(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function Ea(b,a,f){var d=Math.sin(a);a=Math.cos(a);if("x"==f)return new Float32Array([b[0],a*b[1]+d*b[2],a*b[2]-d*b[1],b[3],a*b[4]+d*b[5],a*b[5]-d*b[4],b[6],a*b[7]+d*b[8],a*b[8]-d*b[7]]);if("y"==f)return new Float32Array([a*b[0]-d*b[2],b[1],a*b[2]+d*b[0],a*b[3]-d*b[5],
b[4],a*b[5]+d*b[3],a*b[6]-d*b[8],b[7],a*b[8]+d*b[6]]);if("z"==f)return new Float32Array([a*b[0]+d*b[1],a*b[1]-d*b[0],b[2],a*b[3]+d*b[4],a*b[4]-d*b[3],b[5],a*b[6]+d*b[7],a*b[7]-d*b[6],b[8]])}function ya(b){return new Float32Array([b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15]])}function Ja(b,d,f,g){b=2*Math.atan(Math.tan(b/2)*a.drawingBufferHeight/a.drawingBufferWidth);b=1/Math.tan(b/2);return new Float32Array([b/d,0,0,0,0,b,0,0,0,0,(g+f)/(f-g),2*g*f/(f-g),0,
0,-1,0])}function Ka(b,d){a.bindTexture(a.TEXTURE_2D,d);a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null)}function Sa(b){Fa(b,b.path+(g.extension?"."+g.extension:""),function(a,d){b.texture=a;b.textureLoaded=d?2:1},
na.crossOrigin)}function Ta(b,a){return new Float32Array([b[0]*a[0],b[0]*a[1],b[0]*a[2],0,b[5]*a[4],b[5]*a[5],b[5]*a[6],0,b[10]*a[8],b[10]*a[9],b[10]*a[10],b[11],-a[8],-a[9],-a[10],0])}function Ra(b,a){return new Float32Array([b[0]*a[0]+b[1]*a[1]+b[2]*a[2],b[4]*a[0]+b[5]*a[1]+b[6]*a[2],b[11]+b[8]*a[0]+b[9]*a[1]+b[10]*a[2],1/(b[12]*a[0]+b[13]*a[1]+b[14]*a[2])])}function va(b,a){var d=Ra(b,a),g=d[0]*d[3],e=d[1]*d[3],d=d[2]*d[3],l=[0,0,0];-1>g&&(l[0]=-1);1<g&&(l[0]=1);-1>e&&(l[1]=-1);1<e&&(l[1]=1);if(-1>
d||1<d)l[2]=1;return l}function La(){console.log("Reducing canvas size due to error 1286!");A.width=Math.round(A.width/2);A.height=Math.round(A.height/2)}function oa(b,a){return Math.pow((Math.abs(b)-a)/a,2)*(0<b-a?1:-1)}function za(b,a){for(var d=Math.floor(b.length/a),g=[],e=0;e<d;e++){for(var l=0,p=0;p<a;p++)l=83*l+sa.indexOf(b[e*a+p]);g.push(l)}return g}function Ga(b,a,d){var g=Math.floor(Math.sqrt(b.length))-1,e=Array(g+1),l=Array(g+1);l[0]=0;e[0]=1;l[1]=Math.sin(d);e[1]=Math.cos(d);for(var p=
2;p<=g;p++)l[p]=2*l[p-1]*e[1]-l[p-2],e[p]=2*e[p-1]*e[1]-e[p-2];for(var m=d=0,p=1;p<=g+1;p++)m+=p;for(;0<=g;g--){var k=Math.floor((g+1)*g/2);d+=0!=k?b[k]*a[k-1]:b[k];for(p=1;p<=g;p++)d+=(b[++k]*e[p]+b[k+m-g-1]*l[p])*a[k-1]}return Math.round(d)}function Ua(a){if(1>b.length)for(var d=H.length/32,f=0;32>f;f++){b.push([]);for(var g=0;g<d;g++)b[f].push(oa(za(H[f*d+g],1),41)*R)}za(a[0],1);var g=255*(oa(za(a[1],1),41)+1)/2,e=za(a.slice(2),2);a=[];for(var d=[],l=[],f=0;f<e.length;f++){var p,m=e[f];p=g;var k=
Math.floor(m/19)%19,n=m%19,m=oa(Math.floor(m/361),9)*p,k=oa(k,9)*p;p*=oa(n,9);p=[m,k,p];a.push(p[0]);d.push(p[1]);l.push(p[2])}e=0.03125*Math.PI;p=[];for(f=31;0<=f;f--)for(g=0;64>g;g++)p.push(Ga(a,b[f],(g+0.5)*e)),p.push(Ga(d,b[f],(g+0.5)*e)),p.push(Ga(l,b[f],(g+0.5)*e)),p.push(255);return new ImageData(new Uint8ClampedArray(p),64,32)}var A;M&&(A=k.createElement("canvas"),A.style.width=A.style.height="100%",M.appendChild(A));var d,a,D,Q,s,N,T,ha,X,Ha,ea,g,G,Aa,U,fa,pa,S,na,L="fbudlr".split(""),qa=
"frblud".split("");ma&&(a=ma);this.init=function(b,J,f,K,e,l,p,m){function wa(b){if(c){var a=b*b*4,d=new Uint8ClampedArray(a),f=m.backgroundColor?m.backgroundColor:[0,0,0];f[0]*=255;f[1]*=255;f[2]*=255;for(var e=0;e<a;e++)d[e++]=f[0],d[e++]=f[1],d[e++]=f[2];b=new ImageData(d,b,b);for(u=0;6>u;u++)0==g[u].width&&(g[u]=b)}}J===n&&(J="equirectangular");if("equirectangular"!=J&&"cubemap"!=J&&"multires"!=J)throw console.log("Error: invalid image type specified!"),{type:"config error"};G=J;g=b;Aa=f;na=m||
{};if(d){D&&(a.detachShader(d,D),a.deleteShader(D));Q&&(a.detachShader(d,Q),a.deleteShader(Q));a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);d.texture&&a.deleteTexture(d.texture);if(d.nodeCache)for(b=0;b<d.nodeCache.length;b++)a.deleteTexture(d.nodeCache[b].texture);if(d.textureLoads)for(Y=[];0<d.textureLoads.length;)d.textureLoads.shift()(!1);a.deleteProgram(d);d=n}s&&(N&&(a.detachShader(s,N),a.deleteShader(N)),T&&(a.detachShader(s,T),a.deleteShader(T)),a.deleteProgram(s),
s=n);ea=n;var u,c=!1,B;if("cubemap"==G)for(u=0;6>u;u++)0<g[u].width?(B===n&&(B=g[u].width),B!=g[u].width&&console.log("Cube faces have inconsistent widths: "+B+" vs. "+g[u].width)):c=!0;"cubemap"==G&&0!==(B&B-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(a||(a=A.getContext("experimental-webgl",
{alpha:!1,depth:!1})),a&&1286==a.getError()&&La());if(!a&&("multires"==G&&g.hasOwnProperty("fallbackPath")||"cubemap"==G)&&("WebkitAppearance"in k.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){X&&M.removeChild(X);X=k.createElement("div");X.className="pnlm-world";K=g.basePath?g.basePath+g.fallbackPath:g.fallbackPath;var I=0;e=function(){var b=k.createElement("canvas");b.className="pnlm-face pnlm-"+qa[this.side]+"face";X.appendChild(b);
var a=b.getContext("2d");b.style.width=this.width+4+"px";b.style.height=this.height+4+"px";b.width=this.width+4;b.height=this.height+4;a.drawImage(this,2,2);var d=a.getImageData(0,0,b.width,b.height),c=d.data,f,e;for(f=2;f<b.width-2;f++)for(e=0;4>e;e++)c[4*(f+b.width)+e]=c[4*(f+2*b.width)+e],c[4*(f+b.width*(b.height-2))+e]=c[4*(f+b.width*(b.height-3))+e];for(f=2;f<b.height-2;f++)for(e=0;4>e;e++)c[4*(f*b.width+1)+e]=c[4*(f*b.width+2)+e],c[4*((f+1)*b.width-2)+e]=c[4*((f+1)*b.width-3)+e];for(e=0;4>e;e++)c[4*
(b.width+1)+e]=c[4*(2*b.width+2)+e],c[4*(2*b.width-2)+e]=c[4*(3*b.width-3)+e],c[4*(b.width*(b.height-2)+1)+e]=c[4*(b.width*(b.height-3)+2)+e],c[4*(b.width*(b.height-1)-2)+e]=c[4*(b.width*(b.height-2)-3)+e];for(f=1;f<b.width-1;f++)for(e=0;4>e;e++)c[4*f+e]=c[4*(f+b.width)+e],c[4*(f+b.width*(b.height-1))+e]=c[4*(f+b.width*(b.height-2))+e];for(f=1;f<b.height-1;f++)for(e=0;4>e;e++)c[f*b.width*4+e]=c[4*(f*b.width+1)+e],c[4*((f+1)*b.width-1)+e]=c[4*((f+1)*b.width-2)+e];for(e=0;4>e;e++)c[e]=c[4*(b.width+
1)+e],c[4*(b.width-1)+e]=c[4*(2*b.width-2)+e],c[b.width*(b.height-1)*4+e]=c[4*(b.width*(b.height-2)+1)+e],c[4*(b.width*b.height-1)+e]=c[4*(b.width*(b.height-1)-2)+e];a.putImageData(d,0,0);F.call(this)};var F=function(){0<this.width?(ha===n&&(ha=this.width),ha!=this.width&&console.log("Fallback faces have inconsistent widths: "+ha+" vs. "+this.width)):c=!0;I++;6==I&&(ha=this.width,M.appendChild(X),p())},c=!1;for(u=0;6>u;u++)l=new Image,l.crossOrigin=na.crossOrigin?na.crossOrigin:"anonymous",l.side=
u,l.onload=e,l.onerror=F,l.src="multires"==G?K.replace("%s",qa[u])+(g.extension?"."+g.extension:""):g[u].src;wa(ha)}else{if(!a)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==G&&wa(B);g.fullpath=g.basePath?g.basePath+g.path:g.path;g.invTileResolution=1/g.tileResolution;b=xa();Ha=[];for(u=0;6>u;u++)Ha[u]=b.slice(12*u,12*u+12),b=xa();b=0;if("equirectangular"==G){if(b=a.getParameter(a.MAX_TEXTURE_SIZE),Math.max(g.width/2,g.height)>b)throw console.log("Error: The image is too big; it's "+
g.width+"px wide, but this device's maximum supported size is "+2*b+"px."),{type:"webgl size error",width:g.width,maxWidth:2*b};}else if("cubemap"==G&&B>a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+B+"px wide, but this device's maximum supported size is "+b+"px."),{type:"webgl size error",width:B,maxWidth:b};m!==n&&(B=isNaN(m.horizonPitch)?0:Number(m.horizonPitch),J=isNaN(m.horizonRoll)?0:Number(m.horizonRoll),0!=B||0!=J)&&(ea=[B,J]);var x=a.TEXTURE_2D;
a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);a.getShaderPrecisionFormat&&(B=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT))&&1>B.precision&&(Ca=Ca.replace("highp","mediump"));D=a.createShader(a.VERTEX_SHADER);B=q;"multires"==G&&(B=t);a.shaderSource(D,B);a.compileShader(D);Q=a.createShader(a.FRAGMENT_SHADER);B=ia;"cubemap"==G?(x=a.TEXTURE_CUBE_MAP,B=Da):"multires"==G&&(B=fb);a.shaderSource(Q,B);a.compileShader(Q);d=a.createProgram();a.attachShader(d,D);a.attachShader(d,Q);
a.linkProgram(d);a.getShaderParameter(D,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(D));a.getShaderParameter(Q,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(Q));a.getProgramParameter(d,a.LINK_STATUS)||console.log(a.getProgramInfoLog(d));a.useProgram(d);d.drawInProgress=!1;if(null!==m.backgroundColor){var y=m.backgroundColor?m.backgroundColor:[0,0,0];a.clearColor(y[0],y[1],y[2],1);a.clear(a.COLOR_BUFFER_BIT)}d.texCoordLocation=a.getAttribLocation(d,"a_texCoord");a.enableVertexAttribArray(d.texCoordLocation);
if("multires"!=G)U||(U=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,U),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW),a.vertexAttribPointer(d.texCoordLocation,2,a.FLOAT,!1,0,0),d.aspectRatio=a.getUniformLocation(d,"u_aspectRatio"),a.uniform1f(d.aspectRatio,a.drawingBufferWidth/a.drawingBufferHeight),d.psi=a.getUniformLocation(d,"u_psi"),d.theta=a.getUniformLocation(d,"u_theta"),d.f=a.getUniformLocation(d,"u_f"),d.h=a.getUniformLocation(d,"u_h"),d.v=a.getUniformLocation(d,
"u_v"),d.vo=a.getUniformLocation(d,"u_vo"),d.rot=a.getUniformLocation(d,"u_rot"),a.uniform1f(d.h,K/(2*Math.PI)),a.uniform1f(d.v,e/Math.PI),a.uniform1f(d.vo,l/Math.PI*2),"equirectangular"==G&&(d.backgroundColor=a.getUniformLocation(d,"u_backgroundColor"),a.uniform4fv(d.backgroundColor,y.concat([1]))),d.texture=a.createTexture(),a.bindTexture(x,d.texture),"cubemap"==G?(a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,g[1]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGB,a.RGB,
a.UNSIGNED_BYTE,g[3]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,g[4]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,g[5]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,g[0]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,g[2])):g.width<=b?(a.uniform1i(a.getUniformLocation(d,"u_splitImage"),0),a.texImage2D(x,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,g)):(a.uniform1i(a.getUniformLocation(d,"u_splitImage"),
1),e=k.createElement("canvas"),e.width=g.width/2,e.height=g.height,e=e.getContext("2d"),e.drawImage(g,0,0),l=e.getImageData(0,0,g.width/2,g.height),a.texImage2D(x,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,l),d.texture2=a.createTexture(),a.activeTexture(a.TEXTURE1),a.bindTexture(x,d.texture2),a.uniform1i(a.getUniformLocation(d,"u_image1"),1),e.drawImage(g,-g.width/2,0),l=e.getImageData(0,0,g.width/2,g.height),a.texImage2D(x,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,l),a.texParameteri(x,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(x,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(x,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(x,a.TEXTURE_MAG_FILTER,a.LINEAR),a.activeTexture(a.TEXTURE0)),"cubemap"!=G&&g.width<=b&&K==2*Math.PI&&0==(g.width&g.width-1)?a.texParameteri(x,a.TEXTURE_WRAP_S,a.REPEAT):a.texParameteri(x,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(x,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(x,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(x,a.TEXTURE_MAG_FILTER,a.LINEAR);else if(d.vertPosLocation=a.getAttribLocation(d,
"a_vertCoord"),a.enableVertexAttribArray(d.vertPosLocation),fa||(fa=a.createBuffer()),pa||(pa=a.createBuffer()),S||(S=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,pa),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),a.STATIC_DRAW),a.vertexAttribPointer(d.texCoordLocation,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,S),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,fa),a.vertexAttribPointer(d.vertPosLocation,3,
a.FLOAT,!1,0,0),d.perspUniform=a.getUniformLocation(d,"u_perspMatrix"),d.cubeUniform=a.getUniformLocation(d,"u_cubeMatrix"),d.currentNodes=[],d.nodeCache=[],d.nodeCacheTimestamp=0,d.textureLoads=[],g.shtHash||g.equirectangularThumbnail){N=a.createShader(a.VERTEX_SHADER);a.shaderSource(N,q);a.compileShader(N);T=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(T,ia);a.compileShader(T);s=a.createProgram();a.attachShader(s,N);a.attachShader(s,T);a.linkProgram(s);a.getShaderParameter(N,a.COMPILE_STATUS)||
console.log(a.getShaderInfoLog(N));a.getShaderParameter(T,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(T));a.getProgramParameter(s,a.LINK_STATUS)||console.log(a.getProgramInfoLog(s));a.useProgram(s);s.texCoordLocation=a.getAttribLocation(s,"a_texCoord");a.enableVertexAttribArray(s.texCoordLocation);U||(U=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,U);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW);a.vertexAttribPointer(s.texCoordLocation,2,a.FLOAT,
!1,0,0);s.aspectRatio=a.getUniformLocation(s,"u_aspectRatio");a.uniform1f(s.aspectRatio,a.drawingBufferWidth/a.drawingBufferHeight);s.psi=a.getUniformLocation(s,"u_psi");s.theta=a.getUniformLocation(s,"u_theta");s.f=a.getUniformLocation(s,"u_f");s.h=a.getUniformLocation(s,"u_h");s.v=a.getUniformLocation(s,"u_v");s.vo=a.getUniformLocation(s,"u_vo");s.rot=a.getUniformLocation(s,"u_rot");a.uniform1f(s.h,1);s.texture=a.createTexture();a.bindTexture(x,s.texture);var H,v,L,P=function(){a.useProgram(s);
a.uniform1i(a.getUniformLocation(s,"u_splitImage"),0);a.texImage2D(x,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,H);a.texParameteri(x,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(x,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(x,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(x,a.TEXTURE_MAG_FILTER,a.LINEAR);a.uniform1f(s.v,v);a.uniform1f(s.vo,L);a.useProgram(d)};g.shtHash&&(H=Ua(g.shtHash),v=(2+1/31)/2,L=1-(2+1/31)/2,P());if(g.equirectangularThumbnail)if("string"===typeof g.equirectangularThumbnail)if("data:"==
g.equirectangularThumbnail.slice(0,5))H=new Image,H.onload=function(){v=1;L=0;P()},H.src=g.equirectangularThumbnail;else throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};else H=g.equirectangularThumbnail,v=1,L=0,P();a.bindBuffer(a.ARRAY_BUFFER,fa);a.vertexAttribPointer(d.vertPosLocation,3,a.FLOAT,!1,0,0);a.useProgram(d)}K=a.getError();if(0!==K)throw console.log("Error: Something went wrong with WebGL!",K),{type:"webgl error"};p()}};this.destroy=function(){M!==
n&&(A!==n&&M.contains(A)&&M.removeChild(A),X!==n&&M.contains(X)&&M.removeChild(X));if(a){var b=a.getExtension("WEBGL_lose_context");b&&b.loseContext()}};this.resize=function(){var b=F.devicePixelRatio||1;A.width=A.clientWidth*b;A.height=A.clientHeight*b;a&&(1286==a.getError()&&La(),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),"multires"!=G?a.uniform1f(d.aspectRatio,A.clientWidth/A.clientHeight):g.shtHash&&(a.useProgram(s),a.uniform1f(s.aspectRatio,A.clientWidth/A.clientHeight),a.useProgram(d)))};
A&&this.resize();this.setPose=function(b,a){b=isNaN(b)?0:Number(b);a=isNaN(a)?0:Number(a);ea=0==b&&0==a?n:[b,a]};this.render=function(b,k,f,q){var e,l,p=0;q===n&&(q={});q.roll&&(p=q.roll);if(ea!==n){var m=ea[0];e=ea[1];l=b;var t=k,u=Math.cos(e)*Math.sin(b)*Math.sin(m)+Math.cos(b)*(Math.cos(m)*Math.cos(k)+Math.sin(e)*Math.sin(m)*Math.sin(k)),c=-Math.sin(b)*Math.sin(e)+Math.cos(b)*Math.cos(e)*Math.sin(k);b=Math.cos(e)*Math.cos(m)*Math.sin(b)+Math.cos(b)*(-Math.cos(k)*Math.sin(m)+Math.cos(m)*Math.sin(e)*
Math.sin(k));b=Math.asin(Math.max(Math.min(b,1),-1));k=Math.atan2(c,u);m=[Math.cos(l)*(Math.sin(e)*Math.sin(m)*Math.cos(t)-Math.cos(m)*Math.sin(t)),Math.cos(l)*Math.cos(e)*Math.cos(t),Math.cos(l)*(Math.cos(m)*Math.sin(e)*Math.cos(t)+Math.sin(t)*Math.sin(m))];e=[-Math.cos(b)*Math.sin(k),Math.cos(b)*Math.cos(k)];e=Math.acos(Math.max(Math.min((m[0]*e[0]+m[1]*e[1])/(Math.sqrt(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*Math.sqrt(e[0]*e[0]+e[1]*e[1])),1),-1));0>m[2]&&(e=2*Math.PI-e);p+=e}q.hook&&q.hook({gl:a,program:d,
previewProgram:s,imageType:G,texCoordBuffer:U,cubeVertBuf:fa,cubeVertTexCoordBuf:pa,cubeVertIndBuf:S});if(a||"multires"!=G&&"cubemap"!=G){if("multires"!=G)e=2*Math.atan(Math.tan(0.5*f)/(a.drawingBufferWidth/a.drawingBufferHeight)),e=1/Math.tan(0.5*e),a.uniform1f(d.psi,k),a.uniform1f(d.theta,b),a.uniform1f(d.rot,p),a.uniform1f(d.f,e),!0===Aa&&"equirectangular"==G&&(a.bindTexture(a.TEXTURE_2D,d.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,g)),a.drawArrays(a.TRIANGLES,0,6);else{if((l=
m="undefined"!==typeof g.shtHash||"undefined"!==typeof g.equirectangularThumbnail)&&6<=d.currentNodes.length)for(l=!1,e=0;6>e;e++)if(!d.currentNodes[e].textureLoaded){l=!0;break}l&&(a.useProgram(s),a.bindBuffer(a.ARRAY_BUFFER,U),a.vertexAttribPointer(s.texCoordLocation,2,a.FLOAT,!1,0,0),a.bindTexture(a.TEXTURE_2D,s.texture),e=2*Math.atan(Math.tan(0.5*f)/(a.drawingBufferWidth/a.drawingBufferHeight)),e=1/Math.tan(0.5*e),a.uniform1f(s.psi,k),a.uniform1f(s.theta,b),a.uniform1f(s.rot,p),a.uniform1f(s.f,
e),a.drawArrays(a.TRIANGLES,0,6),a.bindBuffer(a.ARRAY_BUFFER,fa),a.vertexAttribPointer(d.vertPosLocation,3,a.FLOAT,!1,0,0),a.useProgram(d));t=Ja(f,a.drawingBufferWidth/a.drawingBufferHeight,0.1,100);e=Ja(f,a.drawingBufferWidth/a.drawingBufferHeight,-100,100);l=new Float32Array([1,0,0,0,1,0,0,0,1]);l=Ea(l,-p,"z");l=Ea(l,-b,"x");l=Ea(l,k,"y");l=new Float32Array([l[0],l[1],l[2],0,l[3],l[4],l[5],0,l[6],l[7],l[8],0,0,0,0,1]);a.uniformMatrix4fv(d.perspUniform,!1,ya(t));a.uniformMatrix4fv(d.cubeUniform,
!1,ya(l));p=Ta(t,l);e=Ta(e,l);d.nodeCache.sort(ta);if(200<d.nodeCache.length&&d.nodeCache.length>d.currentNodes.length+50)for(l=d.nodeCache.splice(200,d.nodeCache.length-200),t=0;t<l.length;t++)a.deleteTexture(l[t].texture);d.currentNodes=[];for(l=0;6>l;l++)t=new ua(Ha[l],L[l],1,0,0,g.fullpath,null),Pa(p,e,t,b,k,f);d.currentNodes.sort(ga);for(e=Y.length-1;0<=e;e--)-1===d.currentNodes.indexOf(Y[e].node)&&(Y[e].node.textureLoad=!1,Y.splice(e,1));if(0===Y.length)for(e=0;e<d.currentNodes.length;e++)if(b=
d.currentNodes[e],!b.texture&&!b.textureLoad){b.textureLoad=!0;setTimeout(ja,0,b);break}0<d.textureLoads.length&&d.textureLoads.shift()(!0);b=!m;if(!d.drawInProgress){d.drawInProgress=!0;b&&a.clear(a.COLOR_BUFFER_BIT);b={};for(k=0;k<d.currentNodes.length;k++)b[d.currentNodes[k].parentPath]===n&&(b[d.currentNodes[k].parentPath]=0),b[d.currentNodes[k].parentPath]+=!(1<d.currentNodes[k].textureLoaded);for(k=0;k<d.currentNodes.length;k++)1<d.currentNodes[k].textureLoaded&&4!=b[d.currentNodes[k].path]&&
(a.bufferData(a.ARRAY_BUFFER,d.currentNodes[k].vertices,a.STATIC_DRAW),a.bindTexture(a.TEXTURE_2D,d.currentNodes[k].texture),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0));d.drawInProgress=!1}}if(q.returnImage!==n)return F.createImageBitmap&&"ImageBitmap"==q.returnImage?createImageBitmap(A):0==q.returnImage.toString().indexOf("image/")?A.toDataURL(q.returnImage):A.toDataURL("image/png")}else for(l=ha/2,q={f:"translate3d(-"+(l+2)+"px, -"+(l+2)+"px, -"+l+"px)",b:"translate3d("+(l+2)+"px, -"+(l+2)+
"px, "+l+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(l+2)+"px, -"+l+"px, "+(l+2)+"px) rotateX(270deg)",d:"translate3d(-"+(l+2)+"px, "+l+"px, -"+(l+2)+"px) rotateX(90deg)",l:"translate3d(-"+l+"px, -"+(l+2)+"px, "+(l+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+l+"px, -"+(l+2)+"px, -"+(l+2)+"px) rotateY(270deg)"},e=1/Math.tan(f/2),f=e*A.clientWidth/2+"px",b="perspective("+f+") translateZ("+f+") rotateX("+b+"rad) rotateY("+k+"rad) ",k=Object.keys(q),e=0;6>e;e++)if(f=
X.querySelector(".pnlm-"+k[e]+"face"))f.style.webkitTransform=b+q[k[e]],f.style.transform=b+q[k[e]]};this.isLoading=function(){if(a&&"multires"==G)for(var b=0;b<d.currentNodes.length;b++)if(!d.currentNodes[b].textureLoaded)return!0;return!1};this.isBaseLoaded=function(){if(6<=d.currentNodes.length){for(var b=0;6>b;b++)if(!d.currentNodes[b].textureLoaded)return!1;return!0}return!1};this.getCanvas=function(){return A};var Y=[],Fa=function(){function b(){var a=this;this.texture=this.callback=null;this.image=
new Image;this.image.crossOrigin=e?e:"anonymous";var k=function(){d.textureLoads.push(function(b){b&&(0<a.image.width&&0<a.image.height?(Ka(a.image,a.texture),a.callback(a.texture,!0)):a.callback(a.texture,!1));Y.length?(b=Y.shift(),a.loadTexture(b.src,b.texture,b.callback)):g[f++]=a})};this.image.addEventListener("load",k);this.image.addEventListener("error",k)}function k(b,a,d,e){this.node=b;this.src=a;this.texture=d;this.callback=e}var f=4,g={},e;b.prototype.loadTexture=function(b,a,d){this.texture=
a;this.callback=d;this.image.src=b};for(var l=0;l<f;l++)g[l]=new b;return function(b,d,l,n){e=n;n=a.createTexture();f?g[--f].loadTexture(d,n,l):Y.push(new k(b,d,n,l));return n}}(),ja;if(F.Worker&&F.createImageBitmap){var Na=new Blob(["("+function(){self.onmessage=function(b){var a=b.data[0];fetch(a,{mode:"cors",credentials:"use-credentials"==b.data[1]?"include":"same-origin"}).then(function(b){return b.blob()}).then(function(b){return createImageBitmap(b)}).then(function(b){postMessage([a,!0,b],[b])}).catch(function(){postMessage([a,
!1])})}}.toString()+")()"],{type:"application/javascript"}),$=new Worker(URL.createObjectURL(Na)),aa={};$.onmessage=function(b){var k=b.data[0],f=b.data[1],g=b.data[2];d.textureLoads.push(function(b){var d,p=!1;f&&b&&(d=a.createTexture(),Ka(g,d),p=!0);b=aa[k];delete aa[k];b!==n&&(b.texture=d,b.textureLoaded=p?2:1)})};ja=function(b){var a=(new URL(b.path+(g.extension?"."+g.extension:""),F.location)).href;aa[a]=b;$.postMessage([a,na.crossOrigin])}}else ja=Sa;var sa="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",
H="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",
R=3.317,b=[]}var q="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",t="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",Ca="precision highp float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nuniform bool u_splitImage;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);",
Da=Ca+"float cosphi = cos(phi);\ngl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));\n}",ia=Ca+"lambda = mod(lambda + PI, PI * 2.0) - PI;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = u_backgroundColor;\nelse {\nif(u_splitImage) {\nif(coord.x < 0.0)\ngl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));\nelse\ngl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n} else {\ngl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}\n}\n}",
fb="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(k,n,q,t){return new sa(k,n,q,t)}}}(window,document);
window.pannellum=function(F,k,n){function sa(q,t){function Ca(){var a=k.createElement("div");a.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e";if(1==a.getElementsByTagName("i").length)M();else{Ba=b.hfov;Ma=b.pitch;var h;if("cubemap"==b.type){y=[];for(a=0;6>a;a++)y.push(new Image),y[a].crossOrigin=b.crossOrigin;r.load.lbox.style.display="block";r.load.lbar.style.display="none"}else if("multires"==b.type)a=JSON.parse(JSON.stringify(b.multiRes)),b.basePath&&b.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(b.multiRes.basePath)?
a.basePath=b.basePath+b.multiRes.basePath:b.multiRes.basePath?a.basePath=b.multiRes.basePath:b.basePath&&(a.basePath=b.basePath),y=a;else if(!0===b.dynamic)y=b.panorama;else{if(b.panorama===n){M(b.strings.noPanoramaError);return}y=new Image}if("cubemap"==b.type)for(var w=6,c=function(){w--;0===w&&ia()},d=function(a){var ka=k.createElement("a");ka.href=a.target.src;ka.textContent=ka.href;M(b.strings.fileAccessError.replace("%s",ka.outerHTML))},a=0;a<y.length;a++)h=b.cubeMap[a],"null"==h?(console.log("Will use background instead of missing cubemap face "+
a),c()):(b.basePath&&!Da(h)&&(h=b.basePath+h),y[a].onload=c,y[a].onerror=d,y[a].src=aa(h));else if("multires"==b.type)ia();else if(h="",b.basePath&&(h=b.basePath),!0!==b.dynamic){if(b.panorama instanceof Image||b.panorama instanceof ImageData||F.ImageBitmap&&b.panorama instanceof ImageBitmap){y=b.panorama;ia();return}h=Da(b.panorama)?b.panorama:h+b.panorama;y.onload=function(){F.URL.revokeObjectURL(this.src);ia()};ba=new XMLHttpRequest;ba.onloadend=function(){if(200!=ba.status){var a=k.createElement("a");
a.href=h;a.textContent=a.href;M(b.strings.fileAccessError.replace("%s",a.outerHTML))}else sa(this.response,h),r.load.msg.innerHTML=""};ba.onprogress=function(b){if(b.lengthComputable){r.load.lbarFill.style.width=b.loaded/b.total*100+"%";var a,ka;1E6<b.total?(a="MB",ka=(b.loaded/1E6).toFixed(2),b=(b.total/1E6).toFixed(2)):1E3<b.total?(a="kB",ka=(b.loaded/1E3).toFixed(1),b=(b.total/1E3).toFixed(1)):(a="B",ka=b.loaded,b=b.total);r.load.msg.innerHTML=ka+" / "+b+" "+a}else r.load.lbox.style.display="block",
r.load.lbar.style.display="none"};try{ba.open("GET",h,!0)}catch(e){M(b.strings.malformedURLError)}ba.responseType="blob";ba.setRequestHeader("Accept","image/*,*/*;q=0.9");ba.withCredentials="use-credentials"===b.crossOrigin;ba.send()}b.draggable&&E.classList.add("pnlm-grab");E.classList.remove("pnlm-grabbing");Wa=!0===b.dynamicUpdate;b.dynamic&&Wa&&(y=b.panorama,ia())}}function Da(b){return/^(?:[a-z]+:)?\/\//i.test(b)||"/"==b[0]||"blob:"==b.slice(0,5)}function ia(){C||(C=new libpannellum.renderer(la));
x||(x=!0,ca.addEventListener("mousedown",ua,!1),k.addEventListener("mousemove",Ea,!1),k.addEventListener("mouseup",ya,!1),b.mouseZoom&&(E.addEventListener("mousewheel",La,!1),E.addEventListener("DOMMouseScroll",La,!1)),b.doubleClickZoom&&ca.addEventListener("dblclick",Pa,!1),q.addEventListener("mozfullscreenchange",S,!1),q.addEventListener("webkitfullscreenchange",S,!1),q.addEventListener("msfullscreenchange",S,!1),q.addEventListener("fullscreenchange",S,!1),"function"===typeof ResizeObserver?(Xa=
new ResizeObserver(a),Xa.observe(q)):(F.addEventListener("resize",a,!1),F.addEventListener("orientationchange",a,!1)),b.disableKeyboardCtrl||(q.addEventListener("keydown",oa,!1),q.addEventListener("keyup",Ga,!1),q.addEventListener("blur",za,!1)),k.addEventListener("mouseleave",ya,!1),""===k.documentElement.style.pointerAction&&""===k.documentElement.style.touchAction?(ca.addEventListener("pointerdown",Ta,!1),ca.addEventListener("pointermove",Ra,!1),ca.addEventListener("pointerup",va,!1),ca.addEventListener("pointerleave",
va,!1)):(ca.addEventListener("touchstart",Ja,!1),ca.addEventListener("touchmove",Ka,!1),ca.addEventListener("touchend",Sa,!1)),F.navigator.pointerEnabled&&(q.style.touchAction="none"));ha();L(b.hfov);setTimeout(function(){},500)}function sa(a,h){var w=new FileReader;w.addEventListener("loadend",function(){var c=w.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var d=c.indexOf("\u00ff\u00c2");(0>d||65536<d)&&M(b.strings.iOS8WebGLError)}d=c.indexOf("<x:xmpmeta");if(-1<
d&&!0!==b.ignoreGPanoXMP){var e=c.substring(d,c.indexOf("</x:xmpmeta>")+12),f=function(b){var a;0<=e.indexOf(b+'="')?(a=e.substring(e.indexOf(b+'="')+b.length+2),a=a.substring(0,a.indexOf('"'))):0<=e.indexOf(b+">")&&(a=e.substring(e.indexOf(b+">")+b.length+1),a=a.substring(0,a.indexOf("<")));return a!==n?Number(a):null},c=f("GPano:FullPanoWidthPixels"),d=f("GPano:CroppedAreaImageWidthPixels"),g=f("GPano:FullPanoHeightPixels"),l=f("GPano:CroppedAreaImageHeightPixels"),m=f("GPano:CroppedAreaTopPixels"),
p=f("GPano:PoseHeadingDegrees"),q=f("GPano:PosePitchDegrees"),r=f("GPano:PoseRollDegrees"),s=f("GPano:InitialViewPitchDegrees"),t=f("GPano:InitialViewHeadingDegrees"),f=f("GPano:InitialHorizontalFOVDegrees");null!==c&&null!==d&&null!==g&&null!==l&&null!==m&&(0>V.indexOf("haov")&&(b.haov=d/c*360),0>V.indexOf("vaov")&&(b.vaov=l/g*180),0>V.indexOf("vOffset")&&(b.vOffset=-180*((m+l/2)/g-0.5)),null!==p&&0>V.indexOf("northOffset")&&(b.northOffset=p,!1!==b.compass&&(b.compass=!0)),null!==q&&null!==r&&(0>
V.indexOf("horizonPitch")&&(b.horizonPitch=q),0>V.indexOf("horizonRoll")&&(b.horizonRoll=r)),null!=s&&0>V.indexOf("pitch")&&(b.pitch=s),null!=t&&0>V.indexOf("yaw")&&(b.yaw=t),null!=f&&0>V.indexOf("hfov")&&(b.hfov=f))}y.src=F.URL.createObjectURL(a);y.onerror=function(){(function(){return F.fetch?F.fetch(k.location.href).then(function(b){return b.headers.get("Content-Security-Policy")}):null})().then(function(a){a&&a.split(";").find(function(b){if(b=b.match(/img-src(.*)/))return!b[1].includes("blob")})&&
(console.log("CSP blocks blobs; reverting to URL."),y.crossOrigin=b.crossOrigin,y.src=h)})}});w.readAsBinaryString!==n?w.readAsBinaryString(a):w.readAsText(a)}function M(a){a===n&&(a=b.strings.genericWebGLError);r.errorMsg.innerHTML="<p>"+a+"</p>";z.load.style.display="none";r.load.box.style.display="none";r.errorMsg.style.display="table";Qa=!0;I=n;la.style.display="none";H("error",a)}function ma(b){r.interactionMsg.style.opacity=1;r.interactionMsg.innerHTML="<p>"+b+"</p>";r.interactionMsg.style.display=
"table";H("messageshown");clearTimeout(r.interactionMsg.timeout);r.interactionMsg.removeEventListener("transitionend",ta);r.interactionMsg.timeout=setTimeout(function(){r.interactionMsg.style.opacity=0;r.interactionMsg.addEventListener("transitionend",ta)},2E3)}function ta(){r.interactionMsg.style.opacity=0;r.interactionMsg.style.display="none";H("messagecleared")}function ga(b){var a=q.getBoundingClientRect(),w={};w.x=(b.clientX||b.pageX)-a.left;w.y=(b.clientY||b.pageY)-a.top;return w}function ua(a){a.preventDefault();
q.focus();if(I&&b.draggable&&!b.draggingHotSpot){var h=ga(a);if(b.hotSpotDebug){var w=xa(a);console.log("Pitch: "+w[0]+", Yaw: "+w[1]+", Center Pitch: "+b.pitch+", Center Yaw: "+b.yaw+", HFOV: "+b.hfov)}qa();ja();b.roll=0;v.hfov=0;K=!0;e=Date.now();l=h.x;p=h.y;wa=b.yaw;u=b.pitch;E.classList.add("pnlm-grabbing");E.classList.remove("pnlm-grab");H("mousedown",a);D()}}function Pa(a){b.minHfov===b.hfov?R.setHfov(Ba,1E3):(a=xa(a),R.lookAt(a[0],a[1],b.minHfov,1E3))}function xa(a){var h=ga(a);a=C.getCanvas();
var w=a.clientWidth,c=a.clientHeight;a=h.x/w*2-1;var c=(1-h.y/c*2)*c/w,d=1/Math.tan(b.hfov*Math.PI/360),e=Math.sin(b.pitch*Math.PI/180),f=Math.cos(b.pitch*Math.PI/180),h=d*f-c*e,w=Math.sqrt(a*a+h*h),c=180*Math.atan((c*f+d*e)/w)/Math.PI;a=180*Math.atan2(a/w,h/w)/Math.PI+b.yaw;-180>a&&(a+=360);180<a&&(a-=360);return[c,a]}function Ea(a){if(f)ea(f,a);else if(K&&I){e=Date.now();var h=C.getCanvas(),w=h.clientWidth,h=h.clientHeight;a=ga(a);var c=180*(Math.atan(l/w*2-1)-Math.atan(a.x/w*2-1))/Math.PI*b.hfov/
90+wa;v.yaw=(c-b.yaw)%360*0.2;b.yaw=c;w=360*Math.atan(Math.tan(b.hfov/360*Math.PI)*h/w)/Math.PI;w=180*(Math.atan(a.y/h*2-1)-Math.atan(p/h*2-1))/Math.PI*w/90+u;v.pitch=0.2*(w-b.pitch);b.pitch=w}}function ya(b){f&&f.dragHandlerFunc&&f.dragHandlerFunc(b,f.dragHandlerArgs);f=null;K&&(K=!1,15<Date.now()-e&&(v.pitch=v.yaw=0),E.classList.add("pnlm-grab"),E.classList.remove("pnlm-grabbing"),e=Date.now(),H("mouseup",b))}function Ja(a){if(I&&b.draggable&&!f){qa();ja();b.roll=0;v.hfov=0;var h=ga(a.targetTouches[0]);
l=h.x;p=h.y;if(2==a.targetTouches.length){var w=ga(a.targetTouches[1]);l+=0.5*(w.x-h.x);p+=0.5*(w.y-h.y);m=Math.sqrt((h.x-w.x)*(h.x-w.x)+(h.y-w.y)*(h.y-w.y))}K=!0;e=Date.now();wa=b.yaw;u=b.pitch;H("touchstart",a);D()}}function Ka(a){if(b.draggable&&(b.dragConfirm||a.preventDefault(),I&&(e=Date.now()),K&&I)){var h=ga(a.targetTouches[0]),w=h.x,c=h.y;if(2==a.targetTouches.length&&-1!=m){var d=ga(a.targetTouches[1]),w=w+0.5*(d.x-h.x),c=c+0.5*(d.y-h.y),h=Math.sqrt((h.x-d.x)*(h.x-d.x)+(h.y-d.y)*(h.y-d.y));
L(b.hfov+0.1*(m-h));m=h}h=b.hfov/360*b.touchPanSpeedCoeffFactor;B||"both"!=b.dragConfirm&&"yaw"!=b.dragConfirm||2==a.targetTouches.length?(w=(l-w)*h+wa,v.yaw=(w-b.yaw)%360*0.2,b.yaw=w):l!=w&&("yaw"==b.dragConfirm?ma(b.strings.twoTouchXActivate):ma(b.strings.twoTouchActivate));B||"both"!=b.dragConfirm&&"pitch"!=b.dragConfirm||2==a.targetTouches.length?(c=(c-p)*h+u,v.pitch=0.2*(c-b.pitch),b.pitch=c):p!=c&&("pitch"==b.dragConfirm?ma(b.strings.twoTouchYActivate):ma(b.strings.twoTouchActivate));"yaw"!=
b.dragConfirm&&"pitch"!=b.dragConfirm&&"both"!=b.dragConfirm||2!=a.targetTouches.length||(ta(),a.preventDefault())}}function Sa(){f=null;K=!1;150<Date.now()-e&&(v.pitch=v.yaw=0);m=-1;e=Date.now();H("touchend",event)}function Ta(a){"touch"==a.pointerType&&I&&b.draggable&&(ra.push(a.pointerId),Ia.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=Ia,Ja(a),a.preventDefault())}function Ra(a){if("touch"==a.pointerType)if(f)ea(f,a);else if(b.draggable)for(var h=0;h<ra.length;h++)if(a.pointerId==
ra[h]){Ia[h].clientX=a.clientX;Ia[h].clientY=a.clientY;a.targetTouches=Ia;Ka(a);a.preventDefault();break}}function va(b){f&&f.dragHandlerFunc&&f.dragHandlerFunc(b,f.dragHandlerArgs);f=null;if("touch"==b.pointerType){for(var a=!1,c=0;c<ra.length;c++)b.pointerId==ra[c]&&(ra[c]=n),ra[c]&&(a=!0);a||(ra=[],Ia=[],Sa());b.preventDefault()}}function La(a){I&&("fullscreenonly"!=b.mouseZoom||B)&&(B||"ctrl"!=b.mouseZoom||a.ctrlKey?(ta(),a.preventDefault(),qa(),e=Date.now(),a.wheelDeltaY?(L(b.hfov-0.05*a.wheelDeltaY),
v.hfov=0>a.wheelDelta?1:-1):a.wheelDelta?(L(b.hfov-0.05*a.wheelDelta),v.hfov=0>a.wheelDelta?1:-1):a.detail&&(L(b.hfov+1.5*a.detail),v.hfov=0<a.detail?1:-1),D()):(a=-1!=navigator.platform.indexOf("Mac")?"control":"ctrl",ma(b.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+a+"</kbd>"))))}function oa(a){qa();e=Date.now();ja();b.roll=0;var h=a.which||a.keycode;0>b.capturedKeyNumbers.indexOf(h)||!(B||16!=h&&17!=h||"ctrl"!=b.mouseZoom)||(a.preventDefault(),27==h?B&&pa():Ua(h,!0))}function za(){for(var b=
0;10>b;b++)c[b]=!1}function Ga(a){var h=a.which||a.keycode;0>b.capturedKeyNumbers.indexOf(h)||(a.preventDefault(),Ua(h,!1))}function Ua(b,a){var w=!1;switch(b){case 109:case 189:case 17:case 173:c[0]!=a&&(w=!0);c[0]=a;break;case 107:case 187:case 16:case 61:c[1]!=a&&(w=!0);c[1]=a;break;case 38:c[2]!=a&&(w=!0);c[2]=a;break;case 87:c[6]!=a&&(w=!0);c[6]=a;break;case 40:c[3]!=a&&(w=!0);c[3]=a;break;case 83:c[7]!=a&&(w=!0);c[7]=a;break;case 37:c[4]!=a&&(w=!0);c[4]=a;break;case 65:c[8]!=a&&(w=!0);c[8]=
a;break;case 39:c[5]!=a&&(w=!0);c[5]=a;break;case 68:c[9]!=a&&(w=!0),c[9]=a}w&&a&&(da="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),D())}function A(){if(I){var a=!1,h=b.pitch,w=b.yaw,f=b.hfov,k;k="undefined"!==typeof performance&&performance.now()?performance.now():Date.now();da===n&&(da=k);var g=(k-da)*b.hfov/1200,g=Math.min(g,10);c[0]&&!0===b.keyboardZoom&&(L(b.hfov+(0.8*v.hfov+0.4)*g),a=!0);c[1]&&!0===b.keyboardZoom&&(L(b.hfov+(0.8*v.hfov-0.2)*g),a=!0);if(c[2]||
c[6])b.pitch+=(0.8*v.pitch+0.2)*g,a=!0;if(c[3]||c[7])b.pitch+=(0.8*v.pitch-0.2)*g,a=!0;if(c[4]||c[8])b.yaw+=(0.8*v.yaw-0.2)*g,a=!0;if(c[5]||c[9])b.yaw+=(0.8*v.yaw+0.2)*g,a=!0;a&&(e=Date.now());if(b.autoRotate){if(0.001<k-da){var a=(k-da)/1E3,l=(v.yaw/a*g-0.2*b.autoRotate)*a,l=(0<-b.autoRotate?1:-1)*Math.min(Math.abs(b.autoRotate*a),Math.abs(l));b.yaw+=l}b.autoRotateStopDelay&&(b.autoRotateStopDelay-=k-da,0>=b.autoRotateStopDelay&&(b.autoRotateStopDelay=!1,Z=b.autoRotate,b.autoRotate=0))}O.pitch&&
(d("pitch"),h=b.pitch);O.yaw&&(d("yaw"),w=b.yaw);O.hfov&&(d("hfov"),f=b.hfov);0<g&&!b.autoRotate&&(a=1-b.friction,c[4]||c[5]||c[8]||c[9]||O.yaw||(b.yaw+=v.yaw*g*a),c[2]||c[3]||c[6]||c[7]||O.pitch||(b.pitch+=v.pitch*g*a),c[0]||c[1]||O.hfov||(90<b.hfov&&(a*=1-(b.hfov-90)/90),L(b.hfov+v.hfov*g*a)));da=k;0<g&&(v.yaw=0.8*v.yaw+(b.yaw-w)/g*0.2,v.pitch=0.8*v.pitch+(b.pitch-h)/g*0.2,v.hfov=0.8*v.hfov+(b.hfov-f)/g*0.2,h=b.autoRotate?Math.abs(b.autoRotate):5,v.yaw=Math.min(h,Math.max(v.yaw,-h)),v.pitch=Math.min(h,
Math.max(v.pitch,-h)),v.hfov=Math.min(h,Math.max(v.hfov,-h)));c[0]&&c[1]&&(v.hfov=0);(c[2]||c[6])&&(c[3]||c[7])&&(v.pitch=0);(c[4]||c[8])&&(c[5]||c[9])&&(v.yaw=0)}}function d(a){var h=O[a],c=Math.min(1,Math.max((Date.now()-h.startTime)/1E3/(h.duration/1E3),0)),c=h.startPosition+b.animationTimingFunction(c)*(h.endPosition-h.startPosition);if(h.endPosition>h.startPosition&&c>=h.endPosition||h.endPosition<h.startPosition&&c<=h.endPosition||h.endPosition===h.startPosition)c=h.endPosition,v[a]=0,delete O[a];
b[a]=c}function a(){S("resize")}function D(){Ya||(Ya=!0,Q())}function Q(){if(!db)if(s(),Va&&clearTimeout(Va),K||!0===P)requestAnimationFrame(Q);else if(c[0]||c[1]||c[2]||c[3]||c[4]||c[5]||c[6]||c[7]||c[8]||c[9]||b.autoRotate||O.pitch||O.yaw||O.hfov||0.01<Math.abs(v.yaw)||0.01<Math.abs(v.pitch)||0.01<Math.abs(v.hfov))A(),0<=b.autoRotateInactivityDelay&&Z&&Date.now()-e>b.autoRotateInactivityDelay&&!b.autoRotate&&(b.autoRotate=Z,R.lookAt(Ma,n,Ba,3E3)),requestAnimationFrame(Q);else if(C&&(C.isLoading()||
!0===b.dynamic&&Wa))requestAnimationFrame(Q);else{R.getPitch&&R.getYaw&&R.getHfov&&H("animatefinished",{pitch:R.getPitch(),yaw:R.getYaw(),hfov:R.getHfov()});Ya=!1;da=n;var a=b.autoRotateInactivityDelay-(Date.now()-e);0<a?Va=setTimeout(function(){b.autoRotate=Z;R.lookAt(Ma,n,Ba,3E3);D()},a):0<=b.autoRotateInactivityDelay&&Z&&(b.autoRotate=Z,R.lookAt(Ma,n,Ba,3E3),D())}}function s(){var a;if(I){var h=C.getCanvas();!1!==b.autoRotate&&(360<b.yaw?b.yaw-=360:-360>b.yaw&&(b.yaw+=360));a=b.yaw;var c=0;if(b.avoidShowingBackground){var d=
b.hfov/2,e=180*Math.atan2(Math.tan(d/180*Math.PI),h.width/h.height)/Math.PI;b.vaov>b.haov?Math.min(Math.cos((b.pitch-d)/180*Math.PI),Math.cos((b.pitch+d)/180*Math.PI)):c=d*(1-Math.min(Math.cos((b.pitch-e)/180*Math.PI),Math.cos((b.pitch+e)/180*Math.PI)))}var d=b.maxYaw-b.minYaw,e=-180,f=180;360>d&&(e=b.minYaw+b.hfov/2+c,f=b.maxYaw-b.hfov/2-c,d<b.hfov&&(e=f=(e+f)/2),b.yaw=Math.max(e,Math.min(f,b.yaw)));!1===b.autoRotate&&(360<b.yaw?b.yaw-=360:-360>b.yaw&&(b.yaw+=360));!1!==b.autoRotate&&a!=b.yaw&&da!==
n&&(b.autoRotate*=-1);a=2*Math.atan(Math.tan(b.hfov/180*Math.PI*0.5)/(h.width/h.height))/Math.PI*180;h=b.minPitch+a/2;c=b.maxPitch-a/2;b.maxPitch-b.minPitch<a&&(h=c=(h+c)/2);isNaN(h)&&(h=-90);isNaN(c)&&(c=90);b.pitch=Math.max(h,Math.min(c,b.pitch));C.render(b.pitch*Math.PI/180,b.yaw*Math.PI/180,b.hfov*Math.PI/180,{roll:b.roll*Math.PI/180});b.hotSpots.forEach(Aa);b.compass&&(Oa.style.transform="rotate("+(-b.yaw-b.northOffset)+"deg)",Oa.style.webkitTransform="rotate("+(-b.yaw-b.northOffset)+"deg)")}}
function N(b,a,c,d){this.w=b;this.x=a;this.y=c;this.z=d}function T(a){var h;h=a.alpha;var c=a.beta;a=a.gamma;c=[c?c*Math.PI/180/2:0,a?a*Math.PI/180/2:0,h?h*Math.PI/180/2:0];h=[Math.cos(c[0]),Math.cos(c[1]),Math.cos(c[2])];c=[Math.sin(c[0]),Math.sin(c[1]),Math.sin(c[2])];h=new N(h[0]*h[1]*h[2]-c[0]*c[1]*c[2],c[0]*h[1]*h[2]-h[0]*c[1]*c[2],h[0]*c[1]*h[2]+c[0]*h[1]*c[2],h[0]*h[1]*c[2]+c[0]*c[1]*h[2]);h=h.multiply(new N(Math.sqrt(0.5),-Math.sqrt(0.5),0,0));c=F.orientation?-F.orientation*Math.PI/180/2:
0;h=h.multiply(new N(Math.cos(c),0,-Math.sin(c),0)).toEulerAngles();"number"==typeof P&&10>P?P+=1:10===P?(cb=h[2]/Math.PI*180+b.yaw,P=!0,requestAnimationFrame(Q)):(b.pitch=h[0]/Math.PI*180,b.roll=-h[1]/Math.PI*180,b.yaw=-h[2]/Math.PI*180+cb)}function ha(){try{var a={};b.horizonPitch!==n&&(a.horizonPitch=b.horizonPitch*Math.PI/180);b.horizonRoll!==n&&(a.horizonRoll=b.horizonRoll*Math.PI/180);b.backgroundColor!==n&&(a.backgroundColor=b.backgroundColor);C.init(y,b.type,b.dynamic,b.haov*Math.PI/180,b.vaov*
Math.PI/180,b.vOffset*Math.PI/180,X,a);!0!==b.dynamic&&(y=n)}catch(h){if("webgl error"==h.type||"no webgl"==h.type)M();else if("webgl size error"==h.type)M(b.strings.textureSizeError.replace("%s",h.width).replace("%s",h.maxWidth));else throw M(b.strings.unknownError),h;}}function X(){if(b.sceneFadeDuration&&C.fadeImg!==n){C.fadeImg.style.opacity=0;var a=C.fadeImg;delete C.fadeImg;setTimeout(function(){la.removeChild(a);H("scenechangefadedone")},b.sceneFadeDuration)}Oa.style.display=b.compass?"inline":
"none";g();r.load.box.style.display="none";J!==n&&(la.removeChild(J),J=n);I=!0;D();H("load")}function Ha(a){a.pitch=Number(a.pitch)||0;a.yaw=Number(a.yaw)||0;var h=k.createElement("div");h.tabIndex=-1;h.className="pnlm-hotspot-base";h.className=a.cssClass?h.className+(" "+a.cssClass):h.className+(" pnlm-hotspot pnlm-sprite pnlm-"+$(a.type));var c=k.createElement("span");a.text&&(c.innerHTML=$(a.text));var d;if(a.video){d=k.createElement("video");var e=a.video;b.basePath&&!Da(e)&&(e=b.basePath+e);
d.src=aa(e);d.controls=!0;d.style.width=a.width+"px";E.appendChild(h);c.appendChild(d)}else if(a.image){e=a.image;b.basePath&&!Da(e)&&(e=b.basePath+e);d=k.createElement("a");d.href=aa(a.URL?a.URL:e,!0);b.targetBlank&&(d.target="_blank",d.rel="noopener");c.appendChild(d);var g=k.createElement("img");g.src=aa(e);g.style.width=a.width+"px";g.style.paddingTop="5px";E.appendChild(h);d.appendChild(g);c.style.maxWidth="initial"}else if(a.URL){d=k.createElement("a");d.href=aa(a.URL,!0);if(a.attributes)for(e in a.attributes)d.setAttribute(e,
a.attributes[e]);else b.targetBlank&&(d.target="_blank",d.rel="noopener");E.appendChild(d);h.className+=" pnlm-pointer";c.className+=" pnlm-pointer";d.appendChild(h)}else a.sceneId&&(h.onclick=h.ontouchend=function(){h.clicked||(h.clicked=!0,Fa(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov));return!1},h.className+=" pnlm-pointer",c.className+=" pnlm-pointer"),E.appendChild(h);if(a.createTooltipFunc)a.createTooltipFunc(h,a.createTooltipArgs);else if(a.text||a.video||a.image)h.classList.add("pnlm-tooltip"),
h.appendChild(c),c.style.width=c.scrollWidth-20+"px",c.style.marginLeft=-(c.scrollWidth-h.offsetWidth)/2+"px",c.style.marginTop=-c.scrollHeight-12+"px";a.clickHandlerFunc&&(h.addEventListener("click",function(b){a.clickHandlerFunc(b,a.clickHandlerArgs)},"false"),""===k.documentElement.style.pointerAction&&""===k.documentElement.style.touchAction?h.addEventListener("pointerup",function(b){a.clickHandlerFunc(b,a.clickHandlerArgs)},!1):h.addEventListener("touchend",function(b){a.clickHandlerFunc(b,a.clickHandlerArgs)},
!1),h.className+=" pnlm-pointer",c.className+=" pnlm-pointer");a.draggable&&(h.addEventListener("mousedown",function(b){a.dragHandlerFunc&&a.dragHandlerFunc(b,a.dragHandlerArgs);f=a}),""===k.documentElement.style.pointerAction&&""===k.documentElement.style.touchAction&&h.addEventListener("pointerdown",function(b){a.dragHandlerFunc&&a.dragHandlerFunc(b,a.dragHandlerArgs);f=a}),h.addEventListener("touchmove",function(b){ea(a,b.targetTouches[0])}),h.addEventListener("touchend",function(b){a.dragHandlerFunc&&
a.dragHandlerFunc(b,a.dragHandlerArgs);f=null}));a.div=h}function ea(b,a){var c=xa(a);b.pitch=c[0];b.yaw=c[1];Aa(b)}function g(){Za||(b.hotSpots?(b.hotSpots=b.hotSpots.sort(function(b,a){return b.pitch<a.pitch}),b.hotSpots.forEach(Ha)):b.hotSpots=[],Za=!0,b.hotSpots.forEach(Aa))}function G(){var a=b.hotSpots;Za=!1;delete b.hotSpots;if(a)for(var c=0;c<a.length;c++){var d=a[c].div;if(d){for(;d.parentNode&&d.parentNode!=E;)d=d.parentNode;E.removeChild(d)}delete a[c].div}}function Aa(a){var c=Math.sin(a.pitch*
Math.PI/180),d=Math.cos(a.pitch*Math.PI/180),e=Math.sin(b.pitch*Math.PI/180),f=Math.cos(b.pitch*Math.PI/180),g=Math.cos((-a.yaw+b.yaw)*Math.PI/180),k=c*e+d*g*f;if(90>=a.yaw&&-90<a.yaw&&0>=k||(90<a.yaw||-90>=a.yaw)&&0>=k)a.div.style.visibility="hidden";else{var l=Math.sin((-a.yaw+b.yaw)*Math.PI/180),m=Math.tan(b.hfov*Math.PI/360);a.div.style.visibility="visible";var p=C.getCanvas(),n=p.clientWidth,p=p.clientHeight,c=[-n/m*l*d/k/2,-n/m*(c*f-d*g*e)/k/2],d=Math.sin(b.roll*Math.PI/180),e=Math.cos(b.roll*
Math.PI/180),c=[c[0]*e-c[1]*d,c[0]*d+c[1]*e];c[0]+=(n-a.div.offsetWidth)/2;c[1]+=(p-a.div.offsetHeight)/2;n="translate("+c[0]+"px, "+c[1]+"px) translateZ(9999px) rotate("+b.roll+"deg)";a.scale&&(n+=" scale("+Ba/b.hfov/k+")");a.div.style.webkitTransform=n;a.div.style.MozTransform=n;a.div.style.transform=n}}function U(a){b={};var c,d,e="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");V=[];for(c in $a)$a.hasOwnProperty(c)&&(b[c]=$a[c]);for(c in t.default)if(t.default.hasOwnProperty(c))if("strings"==
c)for(d in t.default.strings)t.default.strings.hasOwnProperty(d)&&(b.strings[d]=$(t.default.strings[d]));else b[c]=t.default[c],0<=e.indexOf(c)&&V.push(c);if(null!==a&&""!==a&&t.scenes&&t.scenes[a]){var f=t.scenes[a];for(c in f)if(f.hasOwnProperty(c))if("strings"==c)for(d in f.strings)f.strings.hasOwnProperty(d)&&(b.strings[d]=$(f.strings[d]));else b[c]=f[c],0<=e.indexOf(c)&&V.push(c);b.scene=a}for(c in t)if(t.hasOwnProperty(c))if("strings"==c)for(d in t.strings)t.strings.hasOwnProperty(d)&&(b.strings[d]=
$(t.strings[d]));else b[c]=t[c],0<=e.indexOf(c)&&V.push(c)}function fa(a){if((a=a?a:!1)&&"preview"in b){var c=b.preview;b.basePath&&!Da(c)&&(c=b.basePath+c);J=k.createElement("div");J.className="pnlm-preview-img";J.style.backgroundImage="url('"+aa(c).replace(/"/g,"%22").replace(/'/g,"%27")+"')";la.appendChild(J)}var c=b.title,d=b.author;a&&("previewTitle"in b&&(b.title=b.previewTitle),"previewAuthor"in b&&(b.author=b.previewAuthor));b.hasOwnProperty("title")||(r.title.innerHTML="");b.hasOwnProperty("author")||
(r.author.innerHTML="");b.hasOwnProperty("title")||b.hasOwnProperty("author")||(r.container.style.display="none");b.targetBlank&&(aboutMsgLink.rel="noopener",aboutMsgLink.target="_blank");z.load.innerHTML="<div><p>"+b.strings.loadButtonLabel+"</p></div>";r.load.boxp.innerHTML=b.strings.loadingLabel;for(var e in b)if(b.hasOwnProperty(e))switch(e){case "title":r.title.innerHTML=$(b[e]);r.container.style.display="inline";break;case "author":var f=$(b[e]);b.authorURL&&(f=k.createElement("a"),f.href=aa(b.authorURL,
!0),b.targetBlank&&(f.target="_blank",f.rel="noopener"),f.innerHTML=$(b[e]),f=f.outerHTML);r.author.innerHTML=b.strings.bylineLabel.replace("%s",f);r.container.style.display="inline";break;case "hfov":L(Number(b[e]));break;case "autoLoad":!0===b[e]&&C===n&&(r.load.box.style.display="inline",z.load.style.display="none",Ca());break;case "showZoomCtrl":z.zoom.style.display=b[e]&&!1!=b.showControls?"block":"none";break;case "showFullscreenCtrl":z.fullscreen.style.display=b[e]&&!1!=b.showControls&&("fullscreen"in
k||"mozFullScreen"in k||"webkitIsFullScreen"in k||"msFullscreenElement"in k)?"block":"none";break;case "hotSpotDebug":ab.style.display=b[e]?"block":"none";break;case "showControls":b[e]||(z.orientation.style.display="none",z.zoom.style.display="none",z.fullscreen.style.display="none");break;case "orientationOnByDefault":b[e]&&Na()}a&&(c?b.title=c:delete b.title,d?b.author=d:delete b.author)}function pa(){if(I&&!Qa)if(B)k.exitFullscreen?k.exitFullscreen():k.mozCancelFullScreen?k.mozCancelFullScreen():
k.webkitCancelFullScreen?k.webkitCancelFullScreen():k.msExitFullscreen&&k.msExitFullscreen();else try{q.requestFullscreen?q.requestFullscreen():q.mozRequestFullScreen?q.mozRequestFullScreen():q.msRequestFullscreen?q.msRequestFullscreen():q.webkitRequestFullScreen()}catch(b){}}function S(a){k.fullscreenElement||k.fullscreen||k.mozFullScreen||k.webkitIsFullScreen||k.msFullscreenElement?(z.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),B=!0):(z.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),
B=!1);"resize"!==a&&H("fullscreenchange",B);C.resize();L(b.hfov);D()}function na(a){var c=b.minHfov;"multires"==b.type&&C&&!b.multiResMinHfov&&(c=Math.min(c,C.getCanvas().width/(b.multiRes.cubeResolution/90*0.9)));if(c>b.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),b.hfov;var d=b.hfov,d=a<c?c:a>b.maxHfov?b.maxHfov:a;b.avoidShowingBackground&&C&&!isNaN(b.maxPitch-b.minPitch)&&(a=C.getCanvas(),d=Math.min(d,360*Math.atan(Math.tan((b.maxPitch-b.minPitch)/360*Math.PI)/
a.height*a.width)/Math.PI));return d}function L(a){b.hfov=na(a);H("zoomchange",b.hfov)}function qa(){O={};Z=b.autoRotate?b.autoRotate:Z;b.autoRotate=!1}function Y(){Qa&&(r.load.box.style.display="none",r.errorMsg.style.display="none",Qa=!1,la.style.display="block",H("errorcleared"));I=!1;ta();z.load.style.display="none";r.load.box.style.display="inline";Ca()}function Fa(a,c,d,e,f){I||(f=!0);I=!1;O={};var g,l,m;if(b.sceneFadeDuration&&!f&&(f=C.render(b.pitch*Math.PI/180,b.yaw*Math.PI/180,b.hfov*Math.PI/
180,{returnImage:"ImageBitmap"}),f!==n)){g=f.then?k.createElement("canvas"):new Image;g.className="pnlm-fade-img";g.style.transition="opacity "+b.sceneFadeDuration/1E3+"s";g.style.width="100%";g.style.height="100%";f.then?f.then(function(b){g.width=b.width;g.height=b.height;g.getContext("2d").drawImage(b,0,0);Fa(a,c,d,e,!0)}):(g.onload=function(){Fa(a,c,d,e,!0)},g.src=f);la.appendChild(g);C.fadeImg=g;return}f="same"===c?b.pitch:c;l="same"===d?b.yaw:"sameAzimuth"===d?b.yaw+(b.northOffset||0)-(t.scenes[a].northOffset||
0):d;m="same"===e?b.hfov:e;G();U(a);v.yaw=v.pitch=v.hfov=0;fa();f!==n&&(b.pitch=f);l!==n&&(b.yaw=l);m!==n&&(b.hfov=m);H("scenechange",a);Y()}function ja(){F.removeEventListener("deviceorientation",T);z.orientation.classList.remove("pnlm-orientation-button-active");P=!1}function Na(){bb&&("undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(b){"granted"==b&&(P=1,F.addEventListener("deviceorientation",
T),z.orientation.classList.add("pnlm-orientation-button-active"))}):(P=1,F.addEventListener("deviceorientation",T),z.orientation.classList.add("pnlm-orientation-button-active")))}function $(b){return t.escapeHTML?String(b).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(b).split("\n").join("<br>")}function aa(b,a){try{var c=decodeURIComponent(eb(b)).replace(/[^\w:]/g,
"").toLowerCase()}catch(d){return"about:blank"}return 0===c.indexOf("javascript:")||0===c.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):a&&0===c.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):b}function eb(b){return b.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(b,a){a=a.toLowerCase();return"colon"===a?":":"#"===a.charAt(0)?"x"===a.charAt(1)?String.fromCharCode(parseInt(a.substring(2),16)):String.fromCharCode(+a.substring(1)):
""})}function H(b){if(b in W)for(var a=W[b].length;0<a;a--)W[b][W[b].length-a].apply(null,[].slice.call(arguments,1))}var R=this,b,C,J,f,K=!1,e=Date.now(),l=0,p=0,m=-1,wa=0,u=0,c=Array(10),B=!1,I,Qa=!1,x=!1,y,da,v={yaw:0,pitch:0,hfov:0},Ya=!1,P=!1,cb=0,Va,Z=0,Ba,Ma,O={},W={},V=[],Wa=!1,Xa,Za=!1,ba,db=!1,$a={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:n,maxPitch:n,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:n,
type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(b){return 0.5>b?2*b*b:-1+(4-2*b)*b},draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,
65,68,83,87,107,109,173,187,189],friction:0.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",
textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."}};
q="string"===typeof q?k.getElementById(q):q;q.classList.add("pnlm-container");q.tabIndex=0;var E=k.createElement("div");E.className="pnlm-ui";q.appendChild(E);var la=k.createElement("div");la.className="pnlm-render-container";q.appendChild(la);var ca=k.createElement("div");ca.className="pnlm-dragfix";E.appendChild(ca);var r={},ab=k.createElement("div");ab.className="pnlm-sprite pnlm-hot-spot-debug-indicator";E.appendChild(ab);r.container=k.createElement("div");r.container.className="pnlm-panorama-info";
r.title=k.createElement("div");r.title.className="pnlm-title-box";r.container.appendChild(r.title);r.author=k.createElement("div");r.author.className="pnlm-author-box";r.container.appendChild(r.author);E.appendChild(r.container);r.load={};r.load.box=k.createElement("div");r.load.box.className="pnlm-load-box";r.load.boxp=k.createElement("p");r.load.box.appendChild(r.load.boxp);r.load.lbox=k.createElement("div");r.load.lbox.className="pnlm-lbox";r.load.lbox.innerHTML='<div class="pnlm-loading"></div>';
r.load.box.appendChild(r.load.lbox);r.load.lbar=k.createElement("div");r.load.lbar.className="pnlm-lbar";r.load.lbarFill=k.createElement("div");r.load.lbarFill.className="pnlm-lbar-fill";r.load.lbar.appendChild(r.load.lbarFill);r.load.box.appendChild(r.load.lbar);r.load.msg=k.createElement("p");r.load.msg.className="pnlm-lmsg";r.load.box.appendChild(r.load.msg);E.appendChild(r.load.box);r.errorMsg=k.createElement("div");r.errorMsg.className="pnlm-error-msg pnlm-info-box";E.appendChild(r.errorMsg);
r.interactionMsg=k.createElement("div");r.interactionMsg.className="pnlm-interaction-msg pnlm-info-box";E.appendChild(r.interactionMsg);var z={};z.container=k.createElement("div");z.container.className="pnlm-controls-container";E.appendChild(z.container);z.load=k.createElement("button");z.load.className="pnlm-load-button";z.load.addEventListener("click",function(){fa();Y()});E.appendChild(z.load);z.zoom=k.createElement("div");z.zoom.className="pnlm-zoom-controls pnlm-controls";z.zoomIn=k.createElement("div");
z.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control";z.zoomIn.addEventListener("click",function(){I&&(L(b.hfov-5),D())});z.zoom.appendChild(z.zoomIn);z.zoomOut=k.createElement("div");z.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control";z.zoomOut.addEventListener("click",function(){I&&(L(b.hfov+5),D())});z.zoom.appendChild(z.zoomOut);z.container.appendChild(z.zoom);z.fullscreen=k.createElement("div");z.fullscreen.addEventListener("click",pa);z.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control";
(k.fullscreenEnabled||k.mozFullScreenEnabled||k.webkitFullscreenEnabled||k.msFullscreenEnabled)&&z.container.appendChild(z.fullscreen);z.orientation=k.createElement("div");z.orientation.addEventListener("click",function(b){P?ja():Na()});z.orientation.addEventListener("mousedown",function(b){b.stopPropagation()});z.orientation.addEventListener("touchstart",function(b){b.stopPropagation()});z.orientation.addEventListener("pointerdown",function(b){b.stopPropagation()});z.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";
var bb=!1;F.DeviceOrientationEvent&&"https:"==location.protocol&&(0<=navigator.userAgent.toLowerCase().indexOf("mobi")||0<=navigator.userAgent.indexOf("Mac")&&navigator.maxTouchPoints&&0<navigator.maxTouchPoints)&&(z.container.appendChild(z.orientation),bb=!0);var Oa=k.createElement("div");Oa.className="pnlm-compass pnlm-controls pnlm-control";E.appendChild(Oa);t.firstScene?U(t.firstScene):t.default&&t.default.firstScene?U(t.default.firstScene):U(null);fa(!0);var ra=[],Ia=[];N.prototype.multiply=
function(b){return new N(this.w*b.w-this.x*b.x-this.y*b.y-this.z*b.z,this.x*b.w+this.w*b.x+this.y*b.z-this.z*b.y,this.y*b.w+this.w*b.y+this.z*b.x-this.x*b.z,this.z*b.w+this.w*b.z+this.x*b.y-this.y*b.x)};N.prototype.toEulerAngles=function(){var b=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),a=Math.asin(2*(this.w*this.y-this.z*this.x)),c=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[b,a,c]};this.isLoaded=function(){return Boolean(I)};
this.getPitch=function(){return b.pitch};this.setPitch=function(a,c,d,f){e=Date.now();if(1E-6>=Math.abs(a-b.pitch))return"function"==typeof d&&d(f),this;(c=c==n?1E3:Number(c))?(O.pitch={startTime:Date.now(),startPosition:b.pitch,endPosition:a,duration:c},"function"==typeof d&&setTimeout(function(){d(f)},c)):b.pitch=a;D();return this};this.getPitchBounds=function(){return[b.minPitch,b.maxPitch]};this.setPitchBounds=function(a){b.minPitch=Math.max(-90,Math.min(a[0],90));b.maxPitch=Math.max(-90,Math.min(a[1],
90));return this};this.getYaw=function(){return(b.yaw+540)%360-180};this.setYaw=function(a,c,d,f){e=Date.now();if(1E-6>=Math.abs(a-b.yaw))return"function"==typeof d&&d(f),this;c=c==n?1E3:Number(c);a=(a+180)%360-180;c?(180<b.yaw-a?a+=360:180<a-b.yaw&&(a-=360),O.yaw={startTime:Date.now(),startPosition:b.yaw,endPosition:a,duration:c},"function"==typeof d&&setTimeout(function(){d(f)},c)):b.yaw=a;D();return this};this.getYawBounds=function(){return[b.minYaw,b.maxYaw]};this.setYawBounds=function(a){b.minYaw=
Math.max(-360,Math.min(a[0],360));b.maxYaw=Math.max(-360,Math.min(a[1],360));return this};this.getHfov=function(){return b.hfov};this.setHfov=function(a,c,d,f){e=Date.now();if(1E-6>=Math.abs(a-b.hfov))return"function"==typeof d&&d(f),this;(c=c==n?1E3:Number(c))?(O.hfov={startTime:Date.now(),startPosition:b.hfov,endPosition:na(a),duration:c},"function"==typeof d&&setTimeout(function(){d(f)},c)):L(a);D();return this};this.getHfovBounds=function(){return[b.minHfov,b.maxHfov]};this.setHfovBounds=function(a){b.minHfov=
Math.max(0,a[0]);b.maxHfov=Math.max(0,a[1]);return this};this.lookAt=function(a,c,d,e,f,g){e=e==n?1E3:Number(e);a!==n&&1E-6<Math.abs(a-b.pitch)&&(this.setPitch(a,e,f,g),f=n);c!==n&&1E-6<Math.abs(c-b.yaw)&&(this.setYaw(c,e,f,g),f=n);d!==n&&1E-6<Math.abs(d-b.hfov)&&(this.setHfov(d,e,f,g),f=n);"function"==typeof f&&f(g);return this};this.getNorthOffset=function(){return b.northOffset};this.setNorthOffset=function(a){b.northOffset=Math.min(360,Math.max(0,a));D();return this};this.getHorizonRoll=function(){return b.horizonRoll};
this.setHorizonRoll=function(a){b.horizonRoll=Math.min(90,Math.max(-90,a));C.setPose(b.horizonPitch*Math.PI/180,b.horizonRoll*Math.PI/180);D();return this};this.getHorizonPitch=function(){return b.horizonPitch};this.setHorizonPitch=function(a){b.horizonPitch=Math.min(90,Math.max(-90,a));C.setPose(b.horizonPitch*Math.PI/180,b.horizonRoll*Math.PI/180);D();return this};this.startAutoRotate=function(a,c,d,e){a=a||Z||1;c=c===n?Ma:c;d=d===n?Ba:d;b.autoRotate=a;e!==n&&(b.autoRotateInactivityDelay=e);R.lookAt(c,
n,d,3E3);D();return this};this.stopAutoRotate=function(){Z=b.autoRotate?b.autoRotate:Z;b.autoRotate=!1;b.autoRotateInactivityDelay=-1;return this};this.stopMovement=function(){qa();v={yaw:0,pitch:0,hfov:0}};this.getRenderer=function(){return C};this.setUpdate=function(a){Wa=!0===a;C===n?ia():D();return this};this.mouseEventToCoords=function(a){return xa(a)};this.loadScene=function(a,b,c,d){!1!==I&&Fa(a,b,c,d);return this};this.getScene=function(){return b.scene};this.addScene=function(a,b){t.scenes[a]=
b;return this};this.removeScene=function(a){if(b.scene==a||!t.scenes.hasOwnProperty(a))return!1;delete t.scenes[a];return!0};this.toggleFullscreen=function(){pa();return this};this.getConfig=function(){return b};this.getContainer=function(){return q};this.addHotSpot=function(a,c){if(c===n&&b.scene===n)b.hotSpots.push(a);else{var d=c!==n?c:b.scene;if(t.scenes.hasOwnProperty(d))t.scenes[d].hasOwnProperty("hotSpots")||(t.scenes[d].hotSpots=[],d==b.scene&&(b.hotSpots=t.scenes[d].hotSpots)),t.scenes[d].hotSpots.push(a);
else throw"Invalid scene ID!";}if(c===n||b.scene==c)Ha(a),I&&Aa(a);return this};this.removeHotSpot=function(a,c){if(c===n||b.scene==c){if(!b.hotSpots)return!1;for(var d=0;d<b.hotSpots.length;d++)if(b.hotSpots[d].hasOwnProperty("id")&&b.hotSpots[d].id==a){for(var e=b.hotSpots[d].div;e.parentNode!=E;)e=e.parentNode;E.removeChild(e);delete b.hotSpots[d].div;b.hotSpots.splice(d,1);return!0}}else if(t.scenes.hasOwnProperty(c)){if(!t.scenes[c].hasOwnProperty("hotSpots"))return!1;for(d=0;d<t.scenes[c].hotSpots.length;d++)if(t.scenes[c].hotSpots[d].hasOwnProperty("id")&&
t.scenes[c].hotSpots[d].id==a)return t.scenes[c].hotSpots.splice(d,1),!0}else return!1};this.resize=function(){C&&a()};this.isOrientationSupported=function(){return bb||!1};this.stopOrientation=function(){ja()};this.startOrientation=function(){Na()};this.isOrientationActive=function(){return Boolean(P)};this.on=function(a,b){W[a]=W[a]||[];W[a].push(b);return this};this.off=function(a,b){if(!a)return W={},this;if(b){var c=W[a].indexOf(b);0<=c&&W[a].splice(c,1);0==W[a].length&&delete W[a]}else delete W[a];
return this};this.destroy=function(){db=!0;clearTimeout(Va);ba&&ba.abort();if(Array.isArray(y))for(var b=0;6>b;b++)y[b].src="";C&&C.destroy();x&&(k.removeEventListener("mousemove",Ea,!1),k.removeEventListener("mouseup",ya,!1),q.removeEventListener("mozfullscreenchange",S,!1),q.removeEventListener("webkitfullscreenchange",S,!1),q.removeEventListener("msfullscreenchange",S,!1),q.removeEventListener("fullscreenchange",S,!1),Xa?Xa.disconnect():(F.removeEventListener("resize",a,!1),F.removeEventListener("orientationchange",
a,!1)),q.removeEventListener("keydown",oa,!1),q.removeEventListener("keyup",Ga,!1),q.removeEventListener("blur",za,!1),k.removeEventListener("mouseleave",ya,!1));q.innerHTML="";q.classList.remove("pnlm-container")}}return{viewer:function(k,n){return new sa(k,n)}}}(window,document);
