// Pannellum 2.5.6, https://github.com/mpetroff/pannellum
window.libpannellum=function(F,e,l){function ta(N,na){function ua(b,a){return 1==b.level&&1!=a.level?-1:1==a.level&&1!=b.level?1:a.timestamp-b.timestamp}function ha(b,a){return b.level!=a.level?b.level-a.level:b.diff-a.diff}function va(b,a,m,c,f,k,g){this.vertices=b;this.side=a;this.level=m;this.x=c;this.y=f;b="object"===typeof k?k.tileKey:k;b=b.replace("%s",a).replace("%l0",m-1).replace("%l",m).replace("%x",c).replace("%y",f);this.path="object"===typeof k?k[b]:b;this.parentPath=g}function Pa(b,K,
m,L,f,k){var g;var u=m.vertices;g=wa(b,u.slice(0,3));var d=wa(b,u.slice(3,6)),e=wa(b,u.slice(6,9)),u=wa(b,u.slice(9,12)),n=g[0]+d[0]+e[0]+u[0];-4==n||4==n?g=!1:(n=g[1]+d[1]+e[1]+u[1],g=-4==n||4==n?!1:4!=g[2]+d[2]+e[2]+u[2]);if(g){var d=[],e=[],n=2,u=[],l=0;for(g=0;4>g;g++){var r=Qa(K,m.vertices.slice(3*g,3*(g+1)));d.push(r[0]*r[3]);e.push(r[1]*r[3]);r=r[2]*r[3];n=Math.min(n,r);u.push(1>=Math.abs(d[g])&&1>=Math.abs(e[g])&&0<r);l+=u[g]}if(1<m.level&&0<n&&0<l){for(g=n=0;4>g;g++)if(l=(g+1)%4,u[g]||u[l])r=
(d[l]-d[g])*a.drawingBufferWidth/2,l=(e[l]-e[g])*a.drawingBufferHeight/2,n=Math.max(n,Math.sqrt(r*r+l*l));if(n<=p.tileResolution/2)return}d=m.vertices;g=d[0]+d[3]+d[6]+d[9];e=d[1]+d[4]+d[7]+d[10];u=d[2]+d[5]+d[8]+d[11];n=Math.sqrt(g*g+e*e+u*u);u=Math.asin(u/n);g=Math.atan2(e,g)-f;g+=g>Math.PI?-2*Math.PI:g<-Math.PI?2*Math.PI:0;g=Math.abs(g);m.diff=Math.acos(Math.sin(L)*Math.sin(u)+Math.cos(L)*Math.cos(u)*Math.cos(g));g=!1;for(e=0;e<c.nodeCache.length;e++)if(c.nodeCache[e].path==m.path){g=!0;c.nodeCache[e].timestamp=
c.nodeCacheTimestamp++;c.nodeCache[e].diff=m.diff;c.currentNodes.push(c.nodeCache[e]);break}g||(m.timestamp=c.nodeCacheTimestamp++,c.currentNodes.push(m),c.nodeCache.push(m));if(m.level<p.maxLevel){g=p.cubeResolution*Math.pow(2,m.level-p.maxLevel);var e=Math.ceil(g*p.invTileResolution)-1,u=g%p.tileResolution*2,s=2*g%p.tileResolution;0===s&&(s=p.tileResolution);0===u&&(u=2*p.tileResolution);l=0.5;if(m.x==e||m.y==e)l=1-p.tileResolution/(p.tileResolution+s);g=1-l;var n=[],w=r=l,z=l,A=g,v=g,y=g;if(s<
p.tileResolution)if(m.x==e&&m.y!=e){if(v=w=0.5,"d"==m.side||"u"==m.side)y=z=0.5}else m.x!=e&&m.y==e&&(A=r=0.5,"l"==m.side||"r"==m.side)&&(y=z=0.5);u<=p.tileResolution&&(m.x==e&&(r=0,A=1,"l"==m.side||"r"==m.side)&&(z=0,y=1),m.y==e&&(w=0,v=1,"d"==m.side||"u"==m.side)&&(z=0,y=1));s=new Float32Array([d[0],d[1],d[2],d[0]*r+d[3]*A,d[1]*l+d[4]*g,d[2]*z+d[5]*y,d[0]*r+d[6]*A,d[1]*w+d[7]*v,d[2]*z+d[8]*y,d[0]*l+d[9]*g,d[1]*w+d[10]*v,d[2]*z+d[11]*y]);s=new va(s,m.side,m.level+1,2*m.x,2*m.y,p.fullpath,m.path);
n.push(s);m.x==e&&u<=p.tileResolution||(s=new Float32Array([d[0]*r+d[3]*A,d[1]*l+d[4]*g,d[2]*z+d[5]*y,d[3],d[4],d[5],d[3]*l+d[6]*g,d[4]*w+d[7]*v,d[5]*z+d[8]*y,d[0]*r+d[6]*A,d[1]*w+d[7]*v,d[2]*z+d[8]*y]),s=new va(s,m.side,m.level+1,2*m.x+1,2*m.y,p.fullpath,m.path),n.push(s));m.x==e&&u<=p.tileResolution||m.y==e&&u<=p.tileResolution||(s=new Float32Array([d[0]*r+d[6]*A,d[1]*w+d[7]*v,d[2]*z+d[8]*y,d[3]*l+d[6]*g,d[4]*w+d[7]*v,d[5]*z+d[8]*y,d[6],d[7],d[8],d[9]*r+d[6]*A,d[10]*l+d[7]*g,d[11]*z+d[8]*y]),s=
new va(s,m.side,m.level+1,2*m.x+1,2*m.y+1,p.fullpath,m.path),n.push(s));m.y==e&&u<=p.tileResolution||(s=new Float32Array([d[0]*l+d[9]*g,d[1]*w+d[10]*v,d[2]*z+d[11]*y,d[0]*r+d[6]*A,d[1]*w+d[7]*v,d[2]*z+d[8]*y,d[9]*r+d[6]*A,d[10]*l+d[7]*g,d[11]*z+d[8]*y,d[9],d[10],d[11]]),s=new va(s,m.side,m.level+1,2*m.x,2*m.y+1,p.fullpath,m.path),n.push(s));for(l=0;l<n.length;l++)Pa(b,K,n[l],L,f,k)}}}function xa(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,
1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function Ea(b,a,m){var c=Math.sin(a);a=Math.cos(a);if("x"==m)return new Float32Array([b[0],a*b[1]+c*b[2],a*b[2]-c*b[1],b[3],a*b[4]+c*b[5],a*b[5]-c*b[4],b[6],a*b[7]+c*b[8],a*b[8]-c*b[7]]);if("y"==m)return new Float32Array([a*b[0]-c*b[2],b[1],a*b[2]+c*b[0],a*b[3]-c*b[5],b[4],a*b[5]+c*b[3],a*b[6]-c*b[8],b[7],a*b[8]+c*b[6]]);if("z"==m)return new Float32Array([a*b[0]+c*b[1],a*b[1]-c*b[0],b[2],a*b[3]+
c*b[4],a*b[4]-c*b[3],b[5],a*b[6]+c*b[7],a*b[7]-c*b[6],b[8]])}function ya(b){return new Float32Array([b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15]])}function Ja(b,c,m,e){b=2*Math.atan(Math.tan(b/2)*a.drawingBufferHeight/a.drawingBufferWidth);b=1/Math.tan(b/2);return new Float32Array([b/c,0,0,0,0,b,0,0,0,0,(e+m)/(m-e),2*e*m/(m-e),0,0,-1,0])}function Ka(b,c){a.bindTexture(a.TEXTURE_2D,c);a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null)}function Sa(b){Fa(b,b.path+(p.extension?"."+p.extension:""),function(a,c){b.texture=a;b.textureLoaded=c?2:1},oa.crossOrigin)}function Ta(b,a){return new Float32Array([b[0]*a[0],b[0]*a[1],b[0]*a[2],0,b[5]*a[4],b[5]*a[5],b[5]*a[6],0,b[10]*a[8],b[10]*a[9],
b[10]*a[10],b[11],-a[8],-a[9],-a[10],0])}function Qa(b,a){return new Float32Array([b[0]*a[0]+b[1]*a[1]+b[2]*a[2],b[4]*a[0]+b[5]*a[1]+b[6]*a[2],b[11]+b[8]*a[0]+b[9]*a[1]+b[10]*a[2],1/(b[12]*a[0]+b[13]*a[1]+b[14]*a[2])])}function wa(b,a){var c=Qa(b,a),e=c[0]*c[3],f=c[1]*c[3],c=c[2]*c[3],k=[0,0,0];-1>e&&(k[0]=-1);1<e&&(k[0]=1);-1>f&&(k[1]=-1);1<f&&(k[1]=1);if(-1>c||1<c)k[2]=1;return k}function La(){console.log("Reducing canvas size due to error 1286!");A.width=Math.round(A.width/2);A.height=Math.round(A.height/
2)}function pa(b,a){return Math.pow((Math.abs(b)-a)/a,2)*(0<b-a?1:-1)}function za(b,a){for(var c=Math.floor(b.length/a),e=[],f=0;f<c;f++){for(var k=0,g=0;g<a;g++)k=83*k+ta.indexOf(b[f*a+g]);e.push(k)}return e}function Ga(b,a,c){var e=Math.floor(Math.sqrt(b.length))-1,f=Array(e+1),k=Array(e+1);k[0]=0;f[0]=1;k[1]=Math.sin(c);f[1]=Math.cos(c);for(var g=2;g<=e;g++)k[g]=2*k[g-1]*f[1]-k[g-2],f[g]=2*f[g-1]*f[1]-f[g-2];for(var l=c=0,g=1;g<=e+1;g++)l+=g;for(;0<=e;e--){var d=Math.floor((e+1)*e/2);c+=0!=d?b[d]*
a[d-1]:b[d];for(g=1;g<=e;g++)c+=(b[++d]*f[g]+b[d+l-e-1]*k[g])*a[d-1]}return Math.round(c)}function Ua(a){if(1>b.length)for(var c=I.length/32,e=0;32>e;e++){b.push([]);for(var l=0;l<c;l++)b[e].push(pa(za(I[e*c+l],1),41)*S)}za(a[0],1);var l=255*(pa(za(a[1],1),41)+1)/2,f=za(a.slice(2),2);a=[];for(var c=[],k=[],e=0;e<f.length;e++){var g,p=f[e];g=l;var d=Math.floor(p/19)%19,r=p%19,p=pa(Math.floor(p/361),9)*g,d=pa(d,9)*g;g*=pa(r,9);g=[p,d,g];a.push(g[0]);c.push(g[1]);k.push(g[2])}f=0.03125*Math.PI;g=[];
for(e=31;0<=e;e--)for(l=0;64>l;l++)g.push(Ga(a,b[e],(l+0.5)*f)),g.push(Ga(c,b[e],(l+0.5)*f)),g.push(Ga(k,b[e],(l+0.5)*f)),g.push(255);return new ImageData(new Uint8ClampedArray(g),64,32)}var A;N&&(A=e.createElement("canvas"),A.style.width=A.style.height="100%",N.appendChild(A));var c,a,y,R,r,O,U,ia,Y,Ha,fa,p,H,Aa,V,ga,qa,T,oa,M="fbudlr".split(""),ra="frblud".split("");na&&(a=na);this.init=function(b,K,m,L,f,k,g,u){function d(b){if(n){var a=b*b*4,c=new Uint8ClampedArray(a),d=u.backgroundColor?u.backgroundColor:
[0,0,0];d[0]*=255;d[1]*=255;d[2]*=255;for(var e=0;e<a;e++)c[e++]=d[0],c[e++]=d[1],c[e++]=d[2];b=new ImageData(c,b,b);for(D=0;6>D;D++)0==p[D].width&&(p[D]=b)}}K===l&&(K="equirectangular");if("equirectangular"!=K&&"cubemap"!=K&&"multires"!=K)throw console.log("Error: invalid image type specified!"),{type:"config error"};H=K;p=b;Aa=m;oa=u||{};if(c){y&&(a.detachShader(c,y),a.deleteShader(y));R&&(a.detachShader(c,R),a.deleteShader(R));a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
null);c.texture&&a.deleteTexture(c.texture);if(c.nodeCache)for(b=0;b<c.nodeCache.length;b++)a.deleteTexture(c.nodeCache[b].texture);if(c.textureLoads)for(Z=[];0<c.textureLoads.length;)c.textureLoads.shift()(!1);a.deleteProgram(c);c=l}r&&(O&&(a.detachShader(r,O),a.deleteShader(O)),U&&(a.detachShader(r,U),a.deleteShader(U)),a.deleteProgram(r),r=l);fa=l;var D,n=!1,B;if("cubemap"==H)for(D=0;6>D;D++)0<p[D].width?(B===l&&(B=p[D].width),B!=p[D].width&&console.log("Cube faces have inconsistent widths: "+
B+" vs. "+p[D].width)):n=!0;"cubemap"==H&&0!==(B&B-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(a||(a=A.getContext("experimental-webgl",{alpha:!1,depth:!1})),a&&1286==a.getError()&&La());if(!a&&("multires"==H&&p.hasOwnProperty("fallbackPath")||"cubemap"==H)&&("WebkitAppearance"in
e.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){Y&&N.removeChild(Y);Y=e.createElement("div");Y.className="pnlm-world";L=p.basePath?p.basePath+p.fallbackPath:p.fallbackPath;var J=0;f=function(){var b=e.createElement("canvas");b.className="pnlm-face pnlm-"+ra[this.side]+"face";Y.appendChild(b);var a=b.getContext("2d");b.style.width=this.width+4+"px";b.style.height=this.height+4+"px";b.width=this.width+4;b.height=this.height+
4;a.drawImage(this,2,2);var c=a.getImageData(0,0,b.width,b.height),d=c.data,g,f;for(g=2;g<b.width-2;g++)for(f=0;4>f;f++)d[4*(g+b.width)+f]=d[4*(g+2*b.width)+f],d[4*(g+b.width*(b.height-2))+f]=d[4*(g+b.width*(b.height-3))+f];for(g=2;g<b.height-2;g++)for(f=0;4>f;f++)d[4*(g*b.width+1)+f]=d[4*(g*b.width+2)+f],d[4*((g+1)*b.width-2)+f]=d[4*((g+1)*b.width-3)+f];for(f=0;4>f;f++)d[4*(b.width+1)+f]=d[4*(2*b.width+2)+f],d[4*(2*b.width-2)+f]=d[4*(3*b.width-3)+f],d[4*(b.width*(b.height-2)+1)+f]=d[4*(b.width*(b.height-
3)+2)+f],d[4*(b.width*(b.height-1)-2)+f]=d[4*(b.width*(b.height-2)-3)+f];for(g=1;g<b.width-1;g++)for(f=0;4>f;f++)d[4*g+f]=d[4*(g+b.width)+f],d[4*(g+b.width*(b.height-1))+f]=d[4*(g+b.width*(b.height-2))+f];for(g=1;g<b.height-1;g++)for(f=0;4>f;f++)d[g*b.width*4+f]=d[4*(g*b.width+1)+f],d[4*((g+1)*b.width-1)+f]=d[4*((g+1)*b.width-2)+f];for(f=0;4>f;f++)d[f]=d[4*(b.width+1)+f],d[4*(b.width-1)+f]=d[4*(2*b.width-2)+f],d[b.width*(b.height-1)*4+f]=d[4*(b.width*(b.height-2)+1)+f],d[4*(b.width*b.height-1)+f]=
d[4*(b.width*(b.height-1)-2)+f];a.putImageData(c,0,0);F.call(this)};var F=function(){0<this.width?(ia===l&&(ia=this.width),ia!=this.width&&console.log("Fallback faces have inconsistent widths: "+ia+" vs. "+this.width)):n=!0;J++;6==J&&(ia=this.width,N.appendChild(Y),g())},n=!1;for(D=0;6>D;D++)k=new Image,k.crossOrigin=oa.crossOrigin?oa.crossOrigin:"anonymous",k.side=D,k.onload=f,k.onerror=F,k.src="multires"==H?L.replace("%s",ra[D])+(p.extension?"."+p.extension:""):p[D].src;d(ia)}else{if(!a)throw console.log("Error: no WebGL support detected!"),
{type:"no webgl"};"cubemap"==H&&d(B);p.fullpath=p.basePath?p.basePath+p.path:p.path;p.invTileResolution=1/p.tileResolution;b=xa();Ha=[];for(D=0;6>D;D++)Ha[D]=b.slice(12*D,12*D+12),b=xa();b=0;if("equirectangular"==H){if(b=a.getParameter(a.MAX_TEXTURE_SIZE),Math.max(p.width/2,p.height)>b)throw console.log("Error: The image is too big; it's "+p.width+"px wide, but this device's maximum supported size is "+2*b+"px."),{type:"webgl size error",width:p.width,maxWidth:2*b};}else if("cubemap"==H&&B>a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+
B+"px wide, but this device's maximum supported size is "+b+"px."),{type:"webgl size error",width:B,maxWidth:b};u!==l&&(B=isNaN(u.horizonPitch)?0:Number(u.horizonPitch),K=isNaN(u.horizonRoll)?0:Number(u.horizonRoll),0!=B||0!=K)&&(fa=[B,K]);var G=a.TEXTURE_2D;a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);a.getShaderPrecisionFormat&&(B=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT))&&1>B.precision&&(Ca=Ca.replace("highp","mediump"));y=a.createShader(a.VERTEX_SHADER);B=s;"multires"==
H&&(B=w);a.shaderSource(y,B);a.compileShader(y);R=a.createShader(a.FRAGMENT_SHADER);B=ja;"cubemap"==H?(G=a.TEXTURE_CUBE_MAP,B=Da):"multires"==H&&(B=fb);a.shaderSource(R,B);a.compileShader(R);c=a.createProgram();a.attachShader(c,y);a.attachShader(c,R);a.linkProgram(c);a.getShaderParameter(y,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(y));a.getShaderParameter(R,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(R));a.getProgramParameter(c,a.LINK_STATUS)||console.log(a.getProgramInfoLog(c));a.useProgram(c);
c.drawInProgress=!1;if(null!==u.backgroundColor){var z=u.backgroundColor?u.backgroundColor:[0,0,0];a.clearColor(z[0],z[1],z[2],1);a.clear(a.COLOR_BUFFER_BIT)}c.texCoordLocation=a.getAttribLocation(c,"a_texCoord");a.enableVertexAttribArray(c.texCoordLocation);if("multires"!=H)V||(V=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,V),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW),a.vertexAttribPointer(c.texCoordLocation,2,a.FLOAT,!1,0,0),c.aspectRatio=a.getUniformLocation(c,
"u_aspectRatio"),a.uniform1f(c.aspectRatio,a.drawingBufferWidth/a.drawingBufferHeight),c.psi=a.getUniformLocation(c,"u_psi"),c.theta=a.getUniformLocation(c,"u_theta"),c.f=a.getUniformLocation(c,"u_f"),c.h=a.getUniformLocation(c,"u_h"),c.v=a.getUniformLocation(c,"u_v"),c.vo=a.getUniformLocation(c,"u_vo"),c.rot=a.getUniformLocation(c,"u_rot"),a.uniform1f(c.h,L/(2*Math.PI)),a.uniform1f(c.v,f/Math.PI),a.uniform1f(c.vo,k/Math.PI*2),"equirectangular"==H&&(c.backgroundColor=a.getUniformLocation(c,"u_backgroundColor"),
a.uniform4fv(c.backgroundColor,z.concat([1]))),c.texture=a.createTexture(),a.bindTexture(G,c.texture),"cubemap"==H?(a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,p[1]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_X,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,p[3]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,p[4]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,p[5]),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,
p[0]),a.texImage2D(a.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,p[2])):p.width<=b?(a.uniform1i(a.getUniformLocation(c,"u_splitImage"),0),a.texImage2D(G,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,p)):(a.uniform1i(a.getUniformLocation(c,"u_splitImage"),1),f=e.createElement("canvas"),f.width=p.width/2,f.height=p.height,f=f.getContext("2d"),f.drawImage(p,0,0),k=f.getImageData(0,0,p.width/2,p.height),a.texImage2D(G,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,k),c.texture2=a.createTexture(),a.activeTexture(a.TEXTURE1),
a.bindTexture(G,c.texture2),a.uniform1i(a.getUniformLocation(c,"u_image1"),1),f.drawImage(p,-p.width/2,0),k=f.getImageData(0,0,p.width/2,p.height),a.texImage2D(G,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,k),a.texParameteri(G,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(G,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(G,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(G,a.TEXTURE_MAG_FILTER,a.LINEAR),a.activeTexture(a.TEXTURE0)),"cubemap"!=H&&p.width<=b&&L==2*Math.PI&&0==(p.width&p.width-1)?a.texParameteri(G,
a.TEXTURE_WRAP_S,a.REPEAT):a.texParameteri(G,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(G,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(G,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(G,a.TEXTURE_MAG_FILTER,a.LINEAR);else if(c.vertPosLocation=a.getAttribLocation(c,"a_vertCoord"),a.enableVertexAttribArray(c.vertPosLocation),ga||(ga=a.createBuffer()),qa||(qa=a.createBuffer()),T||(T=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,qa),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,
1,0,1]),a.STATIC_DRAW),a.vertexAttribPointer(c.texCoordLocation,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,T),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,ga),a.vertexAttribPointer(c.vertPosLocation,3,a.FLOAT,!1,0,0),c.perspUniform=a.getUniformLocation(c,"u_perspMatrix"),c.cubeUniform=a.getUniformLocation(c,"u_cubeMatrix"),c.currentNodes=[],c.nodeCache=[],c.nodeCacheTimestamp=0,c.textureLoads=[],p.shtHash||p.equirectangularThumbnail){O=
a.createShader(a.VERTEX_SHADER);a.shaderSource(O,s);a.compileShader(O);U=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(U,ja);a.compileShader(U);r=a.createProgram();a.attachShader(r,O);a.attachShader(r,U);a.linkProgram(r);a.getShaderParameter(O,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(O));a.getShaderParameter(U,a.COMPILE_STATUS)||console.log(a.getShaderInfoLog(U));a.getProgramParameter(r,a.LINK_STATUS)||console.log(a.getProgramInfoLog(r));a.useProgram(r);r.texCoordLocation=a.getAttribLocation(r,
"a_texCoord");a.enableVertexAttribArray(r.texCoordLocation);V||(V=a.createBuffer());a.bindBuffer(a.ARRAY_BUFFER,V);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW);a.vertexAttribPointer(r.texCoordLocation,2,a.FLOAT,!1,0,0);r.aspectRatio=a.getUniformLocation(r,"u_aspectRatio");a.uniform1f(r.aspectRatio,a.drawingBufferWidth/a.drawingBufferHeight);r.psi=a.getUniformLocation(r,"u_psi");r.theta=a.getUniformLocation(r,"u_theta");r.f=a.getUniformLocation(r,"u_f");
r.h=a.getUniformLocation(r,"u_h");r.v=a.getUniformLocation(r,"u_v");r.vo=a.getUniformLocation(r,"u_vo");r.rot=a.getUniformLocation(r,"u_rot");a.uniform1f(r.h,1);r.texture=a.createTexture();a.bindTexture(G,r.texture);var I,v,M,Q=function(){a.useProgram(r);a.uniform1i(a.getUniformLocation(r,"u_splitImage"),0);a.texImage2D(G,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,I);a.texParameteri(G,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(G,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(G,a.TEXTURE_MIN_FILTER,a.LINEAR);
a.texParameteri(G,a.TEXTURE_MAG_FILTER,a.LINEAR);a.uniform1f(r.v,v);a.uniform1f(r.vo,M);a.useProgram(c)};p.shtHash&&(I=Ua(p.shtHash),v=(2+1/31)/2,M=1-(2+1/31)/2,Q());if(p.equirectangularThumbnail)if("string"===typeof p.equirectangularThumbnail)if("data:"==p.equirectangularThumbnail.slice(0,5))I=new Image,I.onload=function(){v=1;M=0;Q()},I.src=p.equirectangularThumbnail;else throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};else I=p.equirectangularThumbnail,v=1,
M=0,Q();a.bindBuffer(a.ARRAY_BUFFER,ga);a.vertexAttribPointer(c.vertPosLocation,3,a.FLOAT,!1,0,0);a.useProgram(c)}L=a.getError();if(0!==L)throw console.log("Error: Something went wrong with WebGL!",L),{type:"webgl error"};g()}};this.destroy=function(){N!==l&&(A!==l&&N.contains(A)&&N.removeChild(A),Y!==l&&N.contains(Y)&&N.removeChild(Y));if(a){var b=a.getExtension("WEBGL_lose_context");b&&b.loseContext()}};this.resize=function(){var b=F.devicePixelRatio||1;A.width=A.clientWidth*b;A.height=A.clientHeight*
b;a&&(1286==a.getError()&&La(),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),"multires"!=H?a.uniform1f(c.aspectRatio,A.clientWidth/A.clientHeight):p.shtHash&&(a.useProgram(r),a.uniform1f(r.aspectRatio,A.clientWidth/A.clientHeight),a.useProgram(c)))};A&&this.resize();this.setPose=function(b,a){b=isNaN(b)?0:Number(b);a=isNaN(a)?0:Number(a);fa=0==b&&0==a?l:[b,a]};this.render=function(b,e,m,s){var f,k,g=0;s===l&&(s={});s.roll&&(g=s.roll);if(fa!==l){var u=fa[0];f=fa[1];k=b;var d=e,w=Math.cos(f)*
Math.sin(b)*Math.sin(u)+Math.cos(b)*(Math.cos(u)*Math.cos(e)+Math.sin(f)*Math.sin(u)*Math.sin(e)),n=-Math.sin(b)*Math.sin(f)+Math.cos(b)*Math.cos(f)*Math.sin(e);b=Math.cos(f)*Math.cos(u)*Math.sin(b)+Math.cos(b)*(-Math.cos(e)*Math.sin(u)+Math.cos(u)*Math.sin(f)*Math.sin(e));b=Math.asin(Math.max(Math.min(b,1),-1));e=Math.atan2(n,w);u=[Math.cos(k)*(Math.sin(f)*Math.sin(u)*Math.cos(d)-Math.cos(u)*Math.sin(d)),Math.cos(k)*Math.cos(f)*Math.cos(d),Math.cos(k)*(Math.cos(u)*Math.sin(f)*Math.cos(d)+Math.sin(d)*
Math.sin(u))];f=[-Math.cos(b)*Math.sin(e),Math.cos(b)*Math.cos(e)];f=Math.acos(Math.max(Math.min((u[0]*f[0]+u[1]*f[1])/(Math.sqrt(u[0]*u[0]+u[1]*u[1]+u[2]*u[2])*Math.sqrt(f[0]*f[0]+f[1]*f[1])),1),-1));0>u[2]&&(f=2*Math.PI-f);g+=f}s.hook&&s.hook({gl:a,program:c,previewProgram:r,imageType:H,texCoordBuffer:V,cubeVertBuf:ga,cubeVertTexCoordBuf:qa,cubeVertIndBuf:T});if(a||"multires"!=H&&"cubemap"!=H){if("multires"!=H)f=2*Math.atan(Math.tan(0.5*m)/(a.drawingBufferWidth/a.drawingBufferHeight)),f=1/Math.tan(0.5*
f),a.uniform1f(c.psi,e),a.uniform1f(c.theta,b),a.uniform1f(c.rot,g),a.uniform1f(c.f,f),!0===Aa&&"equirectangular"==H&&(a.bindTexture(a.TEXTURE_2D,c.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,p)),a.drawArrays(a.TRIANGLES,0,6);else{if((k=u="undefined"!==typeof p.shtHash||"undefined"!==typeof p.equirectangularThumbnail)&&6<=c.currentNodes.length)for(k=!1,f=0;6>f;f++)if(!c.currentNodes[f].textureLoaded){k=!0;break}k&&(a.useProgram(r),a.bindBuffer(a.ARRAY_BUFFER,V),a.vertexAttribPointer(r.texCoordLocation,
2,a.FLOAT,!1,0,0),a.bindTexture(a.TEXTURE_2D,r.texture),f=2*Math.atan(Math.tan(0.5*m)/(a.drawingBufferWidth/a.drawingBufferHeight)),f=1/Math.tan(0.5*f),a.uniform1f(r.psi,e),a.uniform1f(r.theta,b),a.uniform1f(r.rot,g),a.uniform1f(r.f,f),a.drawArrays(a.TRIANGLES,0,6),a.bindBuffer(a.ARRAY_BUFFER,ga),a.vertexAttribPointer(c.vertPosLocation,3,a.FLOAT,!1,0,0),a.useProgram(c));d=Ja(m,a.drawingBufferWidth/a.drawingBufferHeight,0.1,100);f=Ja(m,a.drawingBufferWidth/a.drawingBufferHeight,-100,100);k=new Float32Array([1,
0,0,0,1,0,0,0,1]);k=Ea(k,-g,"z");k=Ea(k,-b,"x");k=Ea(k,e,"y");k=new Float32Array([k[0],k[1],k[2],0,k[3],k[4],k[5],0,k[6],k[7],k[8],0,0,0,0,1]);a.uniformMatrix4fv(c.perspUniform,!1,ya(d));a.uniformMatrix4fv(c.cubeUniform,!1,ya(k));g=Ta(d,k);f=Ta(f,k);c.nodeCache.sort(ua);if(200<c.nodeCache.length&&c.nodeCache.length>c.currentNodes.length+50)for(k=c.nodeCache.splice(200,c.nodeCache.length-200),d=0;d<k.length;d++)a.deleteTexture(k[d].texture);c.currentNodes=[];for(k=0;6>k;k++)d=new va(Ha[k],M[k],1,0,
0,p.fullpath,null),Pa(g,f,d,b,e,m);c.currentNodes.sort(ha);for(f=Z.length-1;0<=f;f--)-1===c.currentNodes.indexOf(Z[f].node)&&(Z[f].node.textureLoad=!1,Z.splice(f,1));if(0===Z.length)for(f=0;f<c.currentNodes.length;f++)if(b=c.currentNodes[f],!b.texture&&!b.textureLoad){b.textureLoad=!0;setTimeout(ka,0,b);break}0<c.textureLoads.length&&c.textureLoads.shift()(!0);b=!u;if(!c.drawInProgress){c.drawInProgress=!0;b&&a.clear(a.COLOR_BUFFER_BIT);b={};for(e=0;e<c.currentNodes.length;e++)b[c.currentNodes[e].parentPath]===
l&&(b[c.currentNodes[e].parentPath]=0),b[c.currentNodes[e].parentPath]+=!(1<c.currentNodes[e].textureLoaded);for(e=0;e<c.currentNodes.length;e++)1<c.currentNodes[e].textureLoaded&&4!=b[c.currentNodes[e].path]&&(a.bufferData(a.ARRAY_BUFFER,c.currentNodes[e].vertices,a.STATIC_DRAW),a.bindTexture(a.TEXTURE_2D,c.currentNodes[e].texture),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0));c.drawInProgress=!1}}if(s.returnImage!==l)return F.createImageBitmap&&"ImageBitmap"==s.returnImage?createImageBitmap(A):
0==s.returnImage.toString().indexOf("image/")?A.toDataURL(s.returnImage):A.toDataURL("image/png")}else for(k=ia/2,s={f:"translate3d(-"+(k+2)+"px, -"+(k+2)+"px, -"+k+"px)",b:"translate3d("+(k+2)+"px, -"+(k+2)+"px, "+k+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(k+2)+"px, -"+k+"px, "+(k+2)+"px) rotateX(270deg)",d:"translate3d(-"+(k+2)+"px, "+k+"px, -"+(k+2)+"px) rotateX(90deg)",l:"translate3d(-"+k+"px, -"+(k+2)+"px, "+(k+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+
k+"px, -"+(k+2)+"px, -"+(k+2)+"px) rotateY(270deg)"},f=1/Math.tan(m/2),m=f*A.clientWidth/2+"px",b="perspective("+m+") translateZ("+m+") rotateX("+b+"rad) rotateY("+e+"rad) ",e=Object.keys(s),f=0;6>f;f++)if(m=Y.querySelector(".pnlm-"+e[f]+"face"))m.style.webkitTransform=b+s[e[f]],m.style.transform=b+s[e[f]]};this.isLoading=function(){if(a&&"multires"==H)for(var b=0;b<c.currentNodes.length;b++)if(!c.currentNodes[b].textureLoaded)return!0;return!1};this.isBaseLoaded=function(){if(6<=c.currentNodes.length){for(var b=
0;6>b;b++)if(!c.currentNodes[b].textureLoaded)return!1;return!0}return!1};this.getCanvas=function(){return A};var Z=[],Fa=function(){function b(){var a=this;this.texture=this.callback=null;this.image=new Image;this.image.crossOrigin=f?f:"anonymous";var e=function(){c.textureLoads.push(function(b){b&&(0<a.image.width&&0<a.image.height?(Ka(a.image,a.texture),a.callback(a.texture,!0)):a.callback(a.texture,!1));Z.length?(b=Z.shift(),a.loadTexture(b.src,b.texture,b.callback)):l[m++]=a})};this.image.addEventListener("load",
e);this.image.addEventListener("error",e)}function e(b,a,c,f){this.node=b;this.src=a;this.texture=c;this.callback=f}var m=4,l={},f;b.prototype.loadTexture=function(b,a,c){this.texture=a;this.callback=c;this.image.src=b};for(var k=0;k<m;k++)l[k]=new b;return function(b,c,d,k){f=k;k=a.createTexture();m?l[--m].loadTexture(c,k,d):Z.push(new e(b,c,k,d));return k}}(),ka;if(F.Worker&&F.createImageBitmap){var Na=new Blob(["("+function(){self.onmessage=function(b){var a=b.data[0];fetch(a,{mode:"cors",credentials:"use-credentials"==
b.data[1]?"include":"same-origin"}).then(function(b){return b.blob()}).then(function(b){return createImageBitmap(b)}).then(function(b){postMessage([a,!0,b],[b])}).catch(function(){postMessage([a,!1])})}}.toString()+")()"],{type:"application/javascript"}),aa=new Worker(URL.createObjectURL(Na)),ba={};aa.onmessage=function(b){var e=b.data[0],m=b.data[1],p=b.data[2];c.textureLoads.push(function(b){var c,g=!1;m&&b&&(c=a.createTexture(),Ka(p,c),g=!0);b=ba[e];delete ba[e];b!==l&&(b.texture=c,b.textureLoaded=
g?2:1)})};ka=function(b){var a=(new URL(b.path+(p.extension?"."+p.extension:""),F.location)).href;ba[a]=b;aa.postMessage([a,oa.crossOrigin])}}else ka=Sa;var ta="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",I="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",
S=3.317,b=[]}var s="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",w="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",Ca="precision highp float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nuniform bool u_splitImage;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);",
Da=Ca+"float cosphi = cos(phi);\ngl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));\n}",ja=Ca+"lambda = mod(lambda + PI, PI * 2.0) - PI;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = u_backgroundColor;\nelse {\nif(u_splitImage) {\nif(coord.x < 0.0)\ngl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));\nelse\ngl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n} else {\ngl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}\n}\n}",
fb="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(e,l,s,w){return new ta(e,l,s,w)}}}(window,document);
window.pannellum=function(F,e,l){function ta(s,w){function Ca(){var a=e.createElement("div");a.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e";if(1==a.getElementsByTagName("i").length)N();else{Ba=b.hfov;Ma=b.pitch;var h;if("cubemap"==b.type){z=[];for(a=0;6>a;a++)z.push(new Image),z[a].crossOrigin=b.crossOrigin;t.load.lbox.style.display="block";t.load.lbar.style.display="none"}else if("multires"==b.type)a=JSON.parse(JSON.stringify(b.multiRes)),b.basePath&&b.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(b.multiRes.basePath)?
a.basePath=b.basePath+b.multiRes.basePath:b.multiRes.basePath?a.basePath=b.multiRes.basePath:b.basePath&&(a.basePath=b.basePath),z=a;else if(!0===b.dynamic)z=b.panorama;else{if(b.panorama===l){N(b.strings.noPanoramaError);return}z=new Image}if("cubemap"==b.type)for(var q=6,c=function(){q--;0===q&&ja()},d=function(a){var la=e.createElement("a");la.href=a.target.src;la.textContent=la.href;N(b.strings.fileAccessError.replace("%s",la.outerHTML))},a=0;a<z.length;a++)h=b.cubeMap[a],"null"==h?(console.log("Will use background instead of missing cubemap face "+
a),c()):(b.basePath&&!Da(h)&&(h=b.basePath+h),z[a].onload=c,z[a].onerror=d,z[a].src=ba(h));else if("multires"==b.type)ja();else if(h="",b.basePath&&(h=b.basePath),!0!==b.dynamic){if(b.panorama instanceof Image||b.panorama instanceof ImageData||F.ImageBitmap&&b.panorama instanceof ImageBitmap){z=b.panorama;ja();return}h=Da(b.panorama)?b.panorama:h+b.panorama;z.onload=function(){F.URL.revokeObjectURL(this.src);ja()};ca=new XMLHttpRequest;ca.onloadend=function(){if(200!=ca.status){var a=e.createElement("a");
a.href=h;a.textContent=a.href;N(b.strings.fileAccessError.replace("%s",a.outerHTML))}else ta(this.response,h),t.load.msg.innerHTML=""};ca.onprogress=function(b){if(b.lengthComputable){t.load.lbarFill.style.width=b.loaded/b.total*100+"%";var a,la;1E6<b.total?(a="MB",la=(b.loaded/1E6).toFixed(2),b=(b.total/1E6).toFixed(2)):1E3<b.total?(a="kB",la=(b.loaded/1E3).toFixed(1),b=(b.total/1E3).toFixed(1)):(a="B",la=b.loaded,b=b.total);t.load.msg.innerHTML=la+" / "+b+" "+a}else t.load.lbox.style.display="block",
t.load.lbar.style.display="none"};try{ca.open("GET",h,!0)}catch(f){N(b.strings.malformedURLError)}ca.responseType="blob";ca.setRequestHeader("Accept","image/*,*/*;q=0.9");ca.withCredentials="use-credentials"===b.crossOrigin;ca.send()}b.draggable&&E.classList.add("pnlm-grab");E.classList.remove("pnlm-grabbing");Wa=!0===b.dynamicUpdate;b.dynamic&&Wa&&(z=b.panorama,ja())}}function Da(b){return/^(?:[a-z]+:)?\/\//i.test(b)||"/"==b[0]||"blob:"==b.slice(0,5)}function ja(){C||(C=new libpannellum.renderer(ma));
G||(G=!0,da.addEventListener("mousedown",va,!1),e.addEventListener("mousemove",Ea,!1),e.addEventListener("mouseup",ya,!1),b.mouseZoom&&(E.addEventListener("mousewheel",La,!1),E.addEventListener("DOMMouseScroll",La,!1)),b.doubleClickZoom&&da.addEventListener("dblclick",Pa,!1),s.addEventListener("mozfullscreenchange",T,!1),s.addEventListener("webkitfullscreenchange",T,!1),s.addEventListener("msfullscreenchange",T,!1),s.addEventListener("fullscreenchange",T,!1),"function"===typeof ResizeObserver?(Xa=
new ResizeObserver(a),Xa.observe(s)):(F.addEventListener("resize",a,!1),F.addEventListener("orientationchange",a,!1)),b.disableKeyboardCtrl||(s.addEventListener("keydown",pa,!1),s.addEventListener("keyup",Ga,!1),s.addEventListener("blur",za,!1)),e.addEventListener("mouseleave",ya,!1),""===e.documentElement.style.pointerAction&&""===e.documentElement.style.touchAction?(da.addEventListener("pointerdown",Ta,!1),da.addEventListener("pointermove",Qa,!1),da.addEventListener("pointerup",wa,!1),da.addEventListener("pointerleave",
wa,!1)):(da.addEventListener("touchstart",Ja,!1),da.addEventListener("touchmove",Ka,!1),da.addEventListener("touchend",Sa,!1)),F.navigator.pointerEnabled&&(s.style.touchAction="none"));ia();M(b.hfov);setTimeout(function(){},500)}function ta(a,h){var q=new FileReader;q.addEventListener("loadend",function(){var c=q.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var d=c.indexOf("\u00ff\u00c2");(0>d||65536<d)&&N(b.strings.iOS8WebGLError)}d=c.indexOf("<x:xmpmeta");if(-1<
d&&!0!==b.ignoreGPanoXMP){var f=c.substring(d,c.indexOf("</x:xmpmeta>")+12),g=function(b){var a;0<=f.indexOf(b+'="')?(a=f.substring(f.indexOf(b+'="')+b.length+2),a=a.substring(0,a.indexOf('"'))):0<=f.indexOf(b+">")&&(a=f.substring(f.indexOf(b+">")+b.length+1),a=a.substring(0,a.indexOf("<")));return a!==l?Number(a):null},c=g("GPano:FullPanoWidthPixels"),d=g("GPano:CroppedAreaImageWidthPixels"),k=g("GPano:FullPanoHeightPixels"),m=g("GPano:CroppedAreaImageHeightPixels"),p=g("GPano:CroppedAreaTopPixels"),
n=g("GPano:PoseHeadingDegrees"),s=g("GPano:PosePitchDegrees"),r=g("GPano:PoseRollDegrees"),t=g("GPano:InitialViewPitchDegrees"),u=g("GPano:InitialViewHeadingDegrees"),g=g("GPano:InitialHorizontalFOVDegrees");null!==c&&null!==d&&null!==k&&null!==m&&null!==p&&(0>W.indexOf("haov")&&(b.haov=d/c*360),0>W.indexOf("vaov")&&(b.vaov=m/k*180),0>W.indexOf("vOffset")&&(b.vOffset=-180*((p+m/2)/k-0.5)),null!==n&&0>W.indexOf("northOffset")&&(b.northOffset=n,!1!==b.compass&&(b.compass=!0)),null!==s&&null!==r&&(0>
W.indexOf("horizonPitch")&&(b.horizonPitch=s),0>W.indexOf("horizonRoll")&&(b.horizonRoll=r)),null!=t&&0>W.indexOf("pitch")&&(b.pitch=t),null!=u&&0>W.indexOf("yaw")&&(b.yaw=u),null!=g&&0>W.indexOf("hfov")&&(b.hfov=g))}z.src=F.URL.createObjectURL(a);z.onerror=function(){(function(){return F.fetch?F.fetch(e.location.href).then(function(b){return b.headers.get("Content-Security-Policy")}):null})().then(function(a){a&&a.split(";").find(function(b){if(b=b.match(/img-src(.*)/))return!b[1].includes("blob")})&&
(console.log("CSP blocks blobs; reverting to URL."),z.crossOrigin=b.crossOrigin,z.src=h)})}});q.readAsBinaryString!==l?q.readAsBinaryString(a):q.readAsText(a)}function N(a){a===l&&(a=b.strings.genericWebGLError);t.errorMsg.innerHTML="<p>"+a+"</p>";x.load.style.display="none";t.load.box.style.display="none";t.errorMsg.style.display="table";Ra=!0;J=l;ma.style.display="none";I("error",a)}function na(b){t.interactionMsg.style.opacity=1;t.interactionMsg.innerHTML="<p>"+b+"</p>";t.interactionMsg.style.display=
"table";I("messageshown");clearTimeout(t.interactionMsg.timeout);t.interactionMsg.removeEventListener("transitionend",ua);t.interactionMsg.timeout=setTimeout(function(){t.interactionMsg.style.opacity=0;t.interactionMsg.addEventListener("transitionend",ua)},2E3)}function ua(){t.interactionMsg.style.opacity=0;t.interactionMsg.style.display="none";I("messagecleared")}function ha(b){var a=s.getBoundingClientRect(),q={};q.x=(b.clientX||b.pageX)-a.left;q.y=(b.clientY||b.pageY)-a.top;return q}function va(a){a.preventDefault();
s.focus();if(J&&b.draggable&&!b.draggingHotSpot){var h=ha(a);if(b.hotSpotDebug){var q=xa(a);console.log("Pitch: "+q[0]+", Yaw: "+q[1]+", Center Pitch: "+b.pitch+", Center Yaw: "+b.yaw+", HFOV: "+b.hfov)}ra();ka();b.roll=0;v.hfov=0;L=!0;f=Date.now();k=h.x;g=h.y;d=b.yaw;D=b.pitch;E.classList.add("pnlm-grabbing");E.classList.remove("pnlm-grab");I("mousedown",a);y()}}function Pa(a){b.minHfov===b.hfov?S.setHfov(Ba,1E3):(a=xa(a),S.lookAt(a[0],a[1],b.minHfov,1E3))}function xa(a){var h=ha(a);a=C.getCanvas();
var q=a.clientWidth,c=a.clientHeight;a=h.x/q*2-1;var c=(1-h.y/c*2)*c/q,d=1/Math.tan(b.hfov*Math.PI/360),e=Math.sin(b.pitch*Math.PI/180),f=Math.cos(b.pitch*Math.PI/180),h=d*f-c*e,q=Math.sqrt(a*a+h*h),c=180*Math.atan((c*f+d*e)/q)/Math.PI;a=180*Math.atan2(a/q,h/q)/Math.PI+b.yaw;-180>a&&(a+=360);180<a&&(a-=360);return[c,a]}function Ea(a){if(m)fa(m,a);else if(L&&J){f=Date.now();var h=C.getCanvas(),q=h.clientWidth,h=h.clientHeight;a=ha(a);var c=180*(Math.atan(k/q*2-1)-Math.atan(a.x/q*2-1))/Math.PI*b.hfov/
90+d;v.yaw=(c-b.yaw)%360*0.2;b.yaw=c;q=360*Math.atan(Math.tan(b.hfov/360*Math.PI)*h/q)/Math.PI;q=180*(Math.atan(a.y/h*2-1)-Math.atan(g/h*2-1))/Math.PI*q/90+D;v.pitch=0.2*(q-b.pitch);b.pitch=q}}function ya(b){m&&m.dragHandlerFunc&&m.dragHandlerFunc(b,m.dragHandlerArgs);m=null;L&&(L=!1,15<Date.now()-f&&(v.pitch=v.yaw=0),E.classList.add("pnlm-grab"),E.classList.remove("pnlm-grabbing"),f=Date.now(),I("mouseup",b))}function Ja(a){if(J&&b.draggable&&!m){ra();ka();b.roll=0;v.hfov=0;var h=ha(a.targetTouches[0]);
k=h.x;g=h.y;if(2==a.targetTouches.length){var q=ha(a.targetTouches[1]);k+=0.5*(q.x-h.x);g+=0.5*(q.y-h.y);u=Math.sqrt((h.x-q.x)*(h.x-q.x)+(h.y-q.y)*(h.y-q.y))}L=!0;f=Date.now();d=b.yaw;D=b.pitch;I("touchstart",a);y()}}function Ka(a){if(b.draggable&&(b.dragConfirm||a.preventDefault(),J&&(f=Date.now()),L&&J)){var h=ha(a.targetTouches[0]),q=h.x,c=h.y;if(2==a.targetTouches.length&&-1!=u){var e=ha(a.targetTouches[1]),q=q+0.5*(e.x-h.x),c=c+0.5*(e.y-h.y),h=Math.sqrt((h.x-e.x)*(h.x-e.x)+(h.y-e.y)*(h.y-e.y));
M(b.hfov+0.1*(u-h));u=h}h=b.hfov/360*b.touchPanSpeedCoeffFactor;B||"both"!=b.dragConfirm&&"yaw"!=b.dragConfirm||2==a.targetTouches.length?(q=(k-q)*h+d,v.yaw=(q-b.yaw)%360*0.2,b.yaw=q):k!=q&&("yaw"==b.dragConfirm?na(b.strings.twoTouchXActivate):na(b.strings.twoTouchActivate));B||"both"!=b.dragConfirm&&"pitch"!=b.dragConfirm||2==a.targetTouches.length?(c=(c-g)*h+D,v.pitch=0.2*(c-b.pitch),b.pitch=c):g!=c&&("pitch"==b.dragConfirm?na(b.strings.twoTouchYActivate):na(b.strings.twoTouchActivate));"yaw"!=
b.dragConfirm&&"pitch"!=b.dragConfirm&&"both"!=b.dragConfirm||2!=a.targetTouches.length||(ua(),a.preventDefault())}}function Sa(){m=null;L=!1;150<Date.now()-f&&(v.pitch=v.yaw=0);u=-1;f=Date.now();I("touchend",event)}function Ta(a){"touch"==a.pointerType&&J&&b.draggable&&(sa.push(a.pointerId),Ia.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=Ia,Ja(a),a.preventDefault())}function Qa(a){if("touch"==a.pointerType)if(m)fa(m,a);else if(b.draggable)for(var h=0;h<sa.length;h++)if(a.pointerId==
sa[h]){Ia[h].clientX=a.clientX;Ia[h].clientY=a.clientY;a.targetTouches=Ia;Ka(a);a.preventDefault();break}}function wa(b){m&&m.dragHandlerFunc&&m.dragHandlerFunc(b,m.dragHandlerArgs);m=null;if("touch"==b.pointerType){for(var a=!1,q=0;q<sa.length;q++)b.pointerId==sa[q]&&(sa[q]=l),sa[q]&&(a=!0);a||(sa=[],Ia=[],Sa());b.preventDefault()}}function La(a){J&&("fullscreenonly"!=b.mouseZoom||B)&&(B||"ctrl"!=b.mouseZoom||a.ctrlKey?(ua(),a.preventDefault(),ra(),f=Date.now(),a.wheelDeltaY?(M(b.hfov-0.05*a.wheelDeltaY),
v.hfov=0>a.wheelDelta?1:-1):a.wheelDelta?(M(b.hfov-0.05*a.wheelDelta),v.hfov=0>a.wheelDelta?1:-1):a.detail&&(M(b.hfov+1.5*a.detail),v.hfov=0<a.detail?1:-1),y()):(a=-1!=navigator.platform.indexOf("Mac")?"control":"ctrl",na(b.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+a+"</kbd>"))))}function pa(a){ra();f=Date.now();ka();b.roll=0;var h=a.which||a.keycode;0>b.capturedKeyNumbers.indexOf(h)||!(B||16!=h&&17!=h||"ctrl"!=b.mouseZoom)||(a.preventDefault(),27==h?B&&qa():Ua(h,!0))}function za(){for(var b=
0;10>b;b++)n[b]=!1}function Ga(a){var h=a.which||a.keycode;0>b.capturedKeyNumbers.indexOf(h)||(a.preventDefault(),Ua(h,!1))}function Ua(b,a){var q=!1;switch(b){case 109:case 189:case 17:case 173:n[0]!=a&&(q=!0);n[0]=a;break;case 107:case 187:case 16:case 61:n[1]!=a&&(q=!0);n[1]=a;break;case 38:n[2]!=a&&(q=!0);n[2]=a;break;case 87:n[6]!=a&&(q=!0);n[6]=a;break;case 40:n[3]!=a&&(q=!0);n[3]=a;break;case 83:n[7]!=a&&(q=!0);n[7]=a;break;case 37:n[4]!=a&&(q=!0);n[4]=a;break;case 65:n[8]!=a&&(q=!0);n[8]=
a;break;case 39:n[5]!=a&&(q=!0);n[5]=a;break;case 68:n[9]!=a&&(q=!0),n[9]=a}q&&a&&(ea="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),y())}function A(){if(J){var a=!1,h=b.pitch,q=b.yaw,e=b.hfov,d;d="undefined"!==typeof performance&&performance.now()?performance.now():Date.now();ea===l&&(ea=d);var g=(d-ea)*b.hfov/1200,g=Math.min(g,10);n[0]&&!0===b.keyboardZoom&&(M(b.hfov+(0.8*v.hfov+0.4)*g),a=!0);n[1]&&!0===b.keyboardZoom&&(M(b.hfov+(0.8*v.hfov-0.2)*g),a=!0);if(n[2]||
n[6])b.pitch+=(0.8*v.pitch+0.2)*g,a=!0;if(n[3]||n[7])b.pitch+=(0.8*v.pitch-0.2)*g,a=!0;if(n[4]||n[8])b.yaw+=(0.8*v.yaw-0.2)*g,a=!0;if(n[5]||n[9])b.yaw+=(0.8*v.yaw+0.2)*g,a=!0;a&&(f=Date.now());if(b.autoRotate){if(0.001<d-ea){var a=(d-ea)/1E3,k=(v.yaw/a*g-0.2*b.autoRotate)*a,k=(0<-b.autoRotate?1:-1)*Math.min(Math.abs(b.autoRotate*a),Math.abs(k));b.yaw+=k}b.autoRotateStopDelay&&(b.autoRotateStopDelay-=d-ea,0>=b.autoRotateStopDelay&&(b.autoRotateStopDelay=!1,$=b.autoRotate,b.autoRotate=0))}P.pitch&&
(c("pitch"),h=b.pitch);P.yaw&&(c("yaw"),q=b.yaw);P.hfov&&(c("hfov"),e=b.hfov);0<g&&!b.autoRotate&&(a=1-b.friction,n[4]||n[5]||n[8]||n[9]||P.yaw||(b.yaw+=v.yaw*g*a),n[2]||n[3]||n[6]||n[7]||P.pitch||(b.pitch+=v.pitch*g*a),n[0]||n[1]||P.hfov||(90<b.hfov&&(a*=1-(b.hfov-90)/90),M(b.hfov+v.hfov*g*a)));ea=d;0<g&&(v.yaw=0.8*v.yaw+(b.yaw-q)/g*0.2,v.pitch=0.8*v.pitch+(b.pitch-h)/g*0.2,v.hfov=0.8*v.hfov+(b.hfov-e)/g*0.2,h=b.autoRotate?Math.abs(b.autoRotate):5,v.yaw=Math.min(h,Math.max(v.yaw,-h)),v.pitch=Math.min(h,
Math.max(v.pitch,-h)),v.hfov=Math.min(h,Math.max(v.hfov,-h)));n[0]&&n[1]&&(v.hfov=0);(n[2]||n[6])&&(n[3]||n[7])&&(v.pitch=0);(n[4]||n[8])&&(n[5]||n[9])&&(v.yaw=0)}}function c(a){var h=P[a],q=Math.min(1,Math.max((Date.now()-h.startTime)/1E3/(h.duration/1E3),0)),q=h.startPosition+b.animationTimingFunction(q)*(h.endPosition-h.startPosition);if(h.endPosition>h.startPosition&&q>=h.endPosition||h.endPosition<h.startPosition&&q<=h.endPosition||h.endPosition===h.startPosition)q=h.endPosition,v[a]=0,delete P[a];
b[a]=q}function a(){T("resize")}function y(){Ya||(Ya=!0,R())}function R(){if(!db)if(r(),Va&&clearTimeout(Va),L||!0===Q)requestAnimationFrame(R);else if(n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7]||n[8]||n[9]||b.autoRotate||P.pitch||P.yaw||P.hfov||0.01<Math.abs(v.yaw)||0.01<Math.abs(v.pitch)||0.01<Math.abs(v.hfov))A(),0<=b.autoRotateInactivityDelay&&$&&Date.now()-f>b.autoRotateInactivityDelay&&!b.autoRotate&&(b.autoRotate=$,S.lookAt(Ma,l,Ba,3E3)),requestAnimationFrame(R);else if(C&&(C.isLoading()||
!0===b.dynamic&&Wa))requestAnimationFrame(R);else{S.getPitch&&S.getYaw&&S.getHfov&&I("animatefinished",{pitch:S.getPitch(),yaw:S.getYaw(),hfov:S.getHfov()});Ya=!1;ea=l;var a=b.autoRotateInactivityDelay-(Date.now()-f);0<a?Va=setTimeout(function(){b.autoRotate=$;S.lookAt(Ma,l,Ba,3E3);y()},a):0<=b.autoRotateInactivityDelay&&$&&(b.autoRotate=$,S.lookAt(Ma,l,Ba,3E3),y())}}function r(){var a;if(J){var h=C.getCanvas();!1!==b.autoRotate&&(360<b.yaw?b.yaw-=360:-360>b.yaw&&(b.yaw+=360));a=b.yaw;var q=0;if(b.avoidShowingBackground){var c=
b.hfov/2,e=180*Math.atan2(Math.tan(c/180*Math.PI),h.width/h.height)/Math.PI;b.vaov>b.haov?Math.min(Math.cos((b.pitch-c)/180*Math.PI),Math.cos((b.pitch+c)/180*Math.PI)):q=c*(1-Math.min(Math.cos((b.pitch-e)/180*Math.PI),Math.cos((b.pitch+e)/180*Math.PI)))}var c=b.maxYaw-b.minYaw,e=-180,d=180;360>c&&(e=b.minYaw+b.hfov/2+q,d=b.maxYaw-b.hfov/2-q,c<b.hfov&&(e=d=(e+d)/2),b.yaw=Math.max(e,Math.min(d,b.yaw)));!1===b.autoRotate&&(360<b.yaw?b.yaw-=360:-360>b.yaw&&(b.yaw+=360));!1!==b.autoRotate&&a!=b.yaw&&ea!==
l&&(b.autoRotate*=-1);a=2*Math.atan(Math.tan(b.hfov/180*Math.PI*0.5)/(h.width/h.height))/Math.PI*180;h=b.minPitch+a/2;q=b.maxPitch-a/2;b.maxPitch-b.minPitch<a&&(h=q=(h+q)/2);isNaN(h)&&(h=-90);isNaN(q)&&(q=90);b.pitch=Math.max(h,Math.min(q,b.pitch));C.render(b.pitch*Math.PI/180,b.yaw*Math.PI/180,b.hfov*Math.PI/180,{roll:b.roll*Math.PI/180});b.hotSpots.forEach(Aa);b.compass&&(Oa.style.transform="rotate("+(-b.yaw-b.northOffset)+"deg)",Oa.style.webkitTransform="rotate("+(-b.yaw-b.northOffset)+"deg)")}}
function O(b,a,c,e){this.w=b;this.x=a;this.y=c;this.z=e}function U(a){var h;h=a.alpha;var c=a.beta;a=a.gamma;c=[c?c*Math.PI/180/2:0,a?a*Math.PI/180/2:0,h?h*Math.PI/180/2:0];h=[Math.cos(c[0]),Math.cos(c[1]),Math.cos(c[2])];c=[Math.sin(c[0]),Math.sin(c[1]),Math.sin(c[2])];h=new O(h[0]*h[1]*h[2]-c[0]*c[1]*c[2],c[0]*h[1]*h[2]-h[0]*c[1]*c[2],h[0]*c[1]*h[2]+c[0]*h[1]*c[2],h[0]*h[1]*c[2]+c[0]*c[1]*h[2]);h=h.multiply(new O(Math.sqrt(0.5),-Math.sqrt(0.5),0,0));c=F.orientation?-F.orientation*Math.PI/180/2:
0;h=h.multiply(new O(Math.cos(c),0,-Math.sin(c),0)).toEulerAngles();"number"==typeof Q&&10>Q?Q+=1:10===Q?(cb=h[2]/Math.PI*180+b.yaw,Q=!0,requestAnimationFrame(R)):(b.pitch=h[0]/Math.PI*180,b.roll=-h[1]/Math.PI*180,b.yaw=-h[2]/Math.PI*180+cb)}function ia(){try{var a={};b.horizonPitch!==l&&(a.horizonPitch=b.horizonPitch*Math.PI/180);b.horizonRoll!==l&&(a.horizonRoll=b.horizonRoll*Math.PI/180);b.backgroundColor!==l&&(a.backgroundColor=b.backgroundColor);C.init(z,b.type,b.dynamic,b.haov*Math.PI/180,b.vaov*
Math.PI/180,b.vOffset*Math.PI/180,Y,a);!0!==b.dynamic&&(z=l)}catch(h){if("webgl error"==h.type||"no webgl"==h.type)N();else if("webgl size error"==h.type)N(b.strings.textureSizeError.replace("%s",h.width).replace("%s",h.maxWidth));else throw N(b.strings.unknownError),h;}}function Y(){if(b.sceneFadeDuration&&C.fadeImg!==l){C.fadeImg.style.opacity=0;var a=C.fadeImg;delete C.fadeImg;setTimeout(function(){ma.removeChild(a);I("scenechangefadedone")},b.sceneFadeDuration)}Oa.style.display=b.compass?"inline":
"none";p();t.load.box.style.display="none";K!==l&&(ma.removeChild(K),K=l);J=!0;y();I("load")}function Ha(a){a.pitch=Number(a.pitch)||0;a.yaw=Number(a.yaw)||0;var h=e.createElement("div");h.className="pnlm-hotspot-base";h.className=a.cssClass?h.className+(" "+a.cssClass):h.className+(" pnlm-hotspot pnlm-sprite pnlm-"+aa(a.type));var c=e.createElement("span");a.text&&(c.innerHTML=aa(a.text));var d;if(a.video){d=e.createElement("video");var f=a.video;b.basePath&&!Da(f)&&(f=b.basePath+f);d.src=ba(f);
d.controls=!0;d.style.width=a.width+"px";E.appendChild(h);c.appendChild(d)}else if(a.image){f=a.image;b.basePath&&!Da(f)&&(f=b.basePath+f);d=e.createElement("a");d.href=ba(a.URL?a.URL:f,!0);b.targetBlank&&(d.target="_blank",d.rel="noopener");c.appendChild(d);var g=e.createElement("img");g.src=ba(f);g.style.width=a.width+"px";g.style.paddingTop="5px";E.appendChild(h);d.appendChild(g);c.style.maxWidth="initial"}else if(a.URL){d=e.createElement("a");d.href=ba(a.URL,!0);if(a.attributes)for(f in a.attributes)d.setAttribute(f,
a.attributes[f]);else b.targetBlank&&(d.target="_blank",d.rel="noopener");E.appendChild(d);h.className+=" pnlm-pointer";c.className+=" pnlm-pointer";d.appendChild(h)}else a.sceneId&&(h.onclick=h.ontouchend=function(){h.clicked||(h.clicked=!0,Fa(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov));return!1},h.className+=" pnlm-pointer",c.className+=" pnlm-pointer"),E.appendChild(h);if(a.createTooltipFunc)a.createTooltipFunc(h,a.createTooltipArgs);else if(a.text||a.video||a.image)h.classList.add("pnlm-tooltip"),
h.appendChild(c),c.style.width=c.scrollWidth-20+"px",c.style.marginLeft=-(c.scrollWidth-h.offsetWidth)/2+"px",c.style.marginTop=-c.scrollHeight-12+"px";a.clickHandlerFunc&&(h.addEventListener("click",function(b){a.clickHandlerFunc(b,a.clickHandlerArgs)},"false"),""===e.documentElement.style.pointerAction&&""===e.documentElement.style.touchAction?h.addEventListener("pointerup",function(b){a.clickHandlerFunc(b,a.clickHandlerArgs)},!1):h.addEventListener("touchend",function(b){a.clickHandlerFunc(b,a.clickHandlerArgs)},
!1),h.className+=" pnlm-pointer",c.className+=" pnlm-pointer");a.draggable&&(h.addEventListener("mousedown",function(b){a.dragHandlerFunc&&a.dragHandlerFunc(b,a.dragHandlerArgs);m=a}),""===e.documentElement.style.pointerAction&&""===e.documentElement.style.touchAction&&h.addEventListener("pointerdown",function(b){a.dragHandlerFunc&&a.dragHandlerFunc(b,a.dragHandlerArgs);m=a}),h.addEventListener("touchmove",function(b){fa(a,b.targetTouches[0])}),h.addEventListener("touchend",function(b){a.dragHandlerFunc&&
a.dragHandlerFunc(b,a.dragHandlerArgs);m=null}));a.div=h}function fa(b,a){var c=xa(a);b.pitch=c[0];b.yaw=c[1];Aa(b)}function p(){Za||(b.hotSpots?(b.hotSpots=b.hotSpots.sort(function(b,a){return b.pitch<a.pitch}),b.hotSpots.forEach(Ha)):b.hotSpots=[],Za=!0,b.hotSpots.forEach(Aa))}function H(){var a=b.hotSpots;Za=!1;delete b.hotSpots;if(a)for(var h=0;h<a.length;h++){var c=a[h].div;if(c){for(;c.parentNode&&c.parentNode!=E;)c=c.parentNode;E.removeChild(c)}delete a[h].div}}function Aa(a){var c=Math.sin(a.pitch*
Math.PI/180),d=Math.cos(a.pitch*Math.PI/180),e=Math.sin(b.pitch*Math.PI/180),f=Math.cos(b.pitch*Math.PI/180),g=Math.cos((-a.yaw+b.yaw)*Math.PI/180),k=c*e+d*g*f;if(90>=a.yaw&&-90<a.yaw&&0>=k||(90<a.yaw||-90>=a.yaw)&&0>=k)a.div.style.visibility="hidden";else{var l=Math.sin((-a.yaw+b.yaw)*Math.PI/180),m=Math.tan(b.hfov*Math.PI/360);a.div.style.visibility="visible";var p=C.getCanvas(),n=p.clientWidth,p=p.clientHeight,c=[-n/m*l*d/k/2,-n/m*(c*f-d*g*e)/k/2],d=Math.sin(b.roll*Math.PI/180),e=Math.cos(b.roll*
Math.PI/180),c=[c[0]*e-c[1]*d,c[0]*d+c[1]*e];c[0]+=(n-a.div.offsetWidth)/2;c[1]+=(p-a.div.offsetHeight)/2;n="translate("+c[0]+"px, "+c[1]+"px) translateZ(9999px) rotate("+b.roll+"deg)";a.scale&&(n+=" scale("+Ba/b.hfov/k+")");a.div.style.webkitTransform=n;a.div.style.MozTransform=n;a.div.style.transform=n}}function V(a){b={};var c,d,e="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");W=[];for(c in $a)$a.hasOwnProperty(c)&&(b[c]=$a[c]);for(c in w.default)if(w.default.hasOwnProperty(c))if("strings"==
c)for(d in w.default.strings)w.default.strings.hasOwnProperty(d)&&(b.strings[d]=aa(w.default.strings[d]));else b[c]=w.default[c],0<=e.indexOf(c)&&W.push(c);if(null!==a&&""!==a&&w.scenes&&w.scenes[a]){var f=w.scenes[a];for(c in f)if(f.hasOwnProperty(c))if("strings"==c)for(d in f.strings)f.strings.hasOwnProperty(d)&&(b.strings[d]=aa(f.strings[d]));else b[c]=f[c],0<=e.indexOf(c)&&W.push(c);b.scene=a}for(c in w)if(w.hasOwnProperty(c))if("strings"==c)for(d in w.strings)w.strings.hasOwnProperty(d)&&(b.strings[d]=
aa(w.strings[d]));else b[c]=w[c],0<=e.indexOf(c)&&W.push(c)}function ga(a){if((a=a?a:!1)&&"preview"in b){var c=b.preview;b.basePath&&!Da(c)&&(c=b.basePath+c);K=e.createElement("div");K.className="pnlm-preview-img";K.style.backgroundImage="url('"+ba(c).replace(/"/g,"%22").replace(/'/g,"%27")+"')";ma.appendChild(K)}var c=b.title,d=b.author;a&&("previewTitle"in b&&(b.title=b.previewTitle),"previewAuthor"in b&&(b.author=b.previewAuthor));b.hasOwnProperty("title")||(t.title.innerHTML="");b.hasOwnProperty("author")||
(t.author.innerHTML="");b.hasOwnProperty("title")||b.hasOwnProperty("author")||(t.container.style.display="none");b.targetBlank&&(aboutMsgLink.rel="noopener",aboutMsgLink.target="_blank");x.load.innerHTML="<div><p>"+b.strings.loadButtonLabel+"</p></div>";t.load.boxp.innerHTML=b.strings.loadingLabel;for(var f in b)if(b.hasOwnProperty(f))switch(f){case "title":t.title.innerHTML=aa(b[f]);t.container.style.display="inline";break;case "author":var g=aa(b[f]);b.authorURL&&(g=e.createElement("a"),g.href=
ba(b.authorURL,!0),b.targetBlank&&(g.target="_blank",g.rel="noopener"),g.innerHTML=aa(b[f]),g=g.outerHTML);t.author.innerHTML=b.strings.bylineLabel.replace("%s",g);t.container.style.display="inline";break;case "hfov":M(Number(b[f]));break;case "autoLoad":!0===b[f]&&C===l&&(t.load.box.style.display="inline",x.load.style.display="none",Ca());break;case "showZoomCtrl":x.zoom.style.display=b[f]&&!1!=b.showControls?"block":"none";break;case "showFullscreenCtrl":x.fullscreen.style.display=b[f]&&!1!=b.showControls&&
("fullscreen"in e||"mozFullScreen"in e||"webkitIsFullScreen"in e||"msFullscreenElement"in e)?"block":"none";break;case "hotSpotDebug":ab.style.display=b[f]?"block":"none";break;case "showControls":b[f]||(x.orientation.style.display="none",x.zoom.style.display="none",x.fullscreen.style.display="none");break;case "orientationOnByDefault":b[f]&&Na()}a&&(c?b.title=c:delete b.title,d?b.author=d:delete b.author)}function qa(){if(J&&!Ra)if(B)e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():
e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen();else try{s.requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.msRequestFullscreen?s.msRequestFullscreen():s.webkitRequestFullScreen()}catch(b){}}function T(a){e.fullscreenElement||e.fullscreen||e.mozFullScreen||e.webkitIsFullScreen||e.msFullscreenElement?(x.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),B=!0):(x.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),
B=!1);"resize"!==a&&I("fullscreenchange",B);C.resize();M(b.hfov);y()}function oa(a){var c=b.minHfov;"multires"==b.type&&C&&!b.multiResMinHfov&&(c=Math.min(c,C.getCanvas().width/(b.multiRes.cubeResolution/90*0.9)));if(c>b.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),b.hfov;var d=b.hfov,d=a<c?c:a>b.maxHfov?b.maxHfov:a;b.avoidShowingBackground&&C&&!isNaN(b.maxPitch-b.minPitch)&&(a=C.getCanvas(),d=Math.min(d,360*Math.atan(Math.tan((b.maxPitch-b.minPitch)/360*Math.PI)/
a.height*a.width)/Math.PI));return d}function M(a){b.hfov=oa(a);I("zoomchange",b.hfov)}function ra(){P={};$=b.autoRotate?b.autoRotate:$;b.autoRotate=!1}function Z(){Ra&&(t.load.box.style.display="none",t.errorMsg.style.display="none",Ra=!1,ma.style.display="block",I("errorcleared"));J=!1;ua();x.load.style.display="none";t.load.box.style.display="inline";Ca()}function Fa(a,c,d,f,g){J||(g=!0);J=!1;P={};var k,m,n;if(b.sceneFadeDuration&&!g&&(g=C.render(b.pitch*Math.PI/180,b.yaw*Math.PI/180,b.hfov*Math.PI/
180,{returnImage:"ImageBitmap"}),g!==l)){k=g.then?e.createElement("canvas"):new Image;k.className="pnlm-fade-img";k.style.transition="opacity "+b.sceneFadeDuration/1E3+"s";k.style.width="100%";k.style.height="100%";g.then?g.then(function(b){k.width=b.width;k.height=b.height;k.getContext("2d").drawImage(b,0,0);Fa(a,c,d,f,!0)}):(k.onload=function(){Fa(a,c,d,f,!0)},k.src=g);ma.appendChild(k);C.fadeImg=k;return}g="same"===c?b.pitch:c;m="same"===d?b.yaw:"sameAzimuth"===d?b.yaw+(b.northOffset||0)-(w.scenes[a].northOffset||
0):d;n="same"===f?b.hfov:f;H();V(a);v.yaw=v.pitch=v.hfov=0;ga();g!==l&&(b.pitch=g);m!==l&&(b.yaw=m);n!==l&&(b.hfov=n);I("scenechange",a);Z()}function ka(){F.removeEventListener("deviceorientation",U);x.orientation.classList.remove("pnlm-orientation-button-active");Q=!1}function Na(){bb&&("undefined"!==typeof DeviceMotionEvent&&"function"===typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(b){"granted"==b&&(Q=1,F.addEventListener("deviceorientation",
U),x.orientation.classList.add("pnlm-orientation-button-active"))}):(Q=1,F.addEventListener("deviceorientation",U),x.orientation.classList.add("pnlm-orientation-button-active")))}function aa(b){return w.escapeHTML?String(b).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(b).split("\n").join("<br>")}function ba(b,a){try{var c=decodeURIComponent(eb(b)).replace(/[^\w:]/g,
"").toLowerCase()}catch(d){return"about:blank"}return 0===c.indexOf("javascript:")||0===c.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):a&&0===c.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):b}function eb(b){return b.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(b,a){a=a.toLowerCase();return"colon"===a?":":"#"===a.charAt(0)?"x"===a.charAt(1)?String.fromCharCode(parseInt(a.substring(2),16)):String.fromCharCode(+a.substring(1)):
""})}function I(b){if(b in X)for(var a=X[b].length;0<a;a--)X[b][X[b].length-a].apply(null,[].slice.call(arguments,1))}var S=this,b,C,K,m,L=!1,f=Date.now(),k=0,g=0,u=-1,d=0,D=0,n=Array(10),B=!1,J,Ra=!1,G=!1,z,ea,v={yaw:0,pitch:0,hfov:0},Ya=!1,Q=!1,cb=0,Va,$=0,Ba,Ma,P={},X={},W=[],Wa=!1,Xa,Za=!1,ca,db=!1,$a={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:l,maxPitch:l,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:l,
type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(b){return 0.5>b?2*b*b:-1+(4-2*b)*b},draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,
65,68,83,87,107,109,173,187,189],friction:0.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",
textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."}};
s="string"===typeof s?e.getElementById(s):s;s.classList.add("pnlm-container");s.tabIndex=0;var E=e.createElement("div");E.className="pnlm-ui";s.appendChild(E);var ma=e.createElement("div");ma.className="pnlm-render-container";s.appendChild(ma);var da=e.createElement("div");da.className="pnlm-dragfix";E.appendChild(da);var t={},ab=e.createElement("div");ab.className="pnlm-sprite pnlm-hot-spot-debug-indicator";E.appendChild(ab);t.container=e.createElement("div");t.container.className="pnlm-panorama-info";
t.title=e.createElement("div");t.title.className="pnlm-title-box";t.container.appendChild(t.title);t.author=e.createElement("div");t.author.className="pnlm-author-box";t.container.appendChild(t.author);E.appendChild(t.container);t.load={};t.load.box=e.createElement("div");t.load.box.className="pnlm-load-box";t.load.boxp=e.createElement("p");t.load.box.appendChild(t.load.boxp);t.load.lbox=e.createElement("div");t.load.lbox.className="pnlm-lbox";t.load.lbox.innerHTML='<div class="pnlm-loading"></div>';
t.load.box.appendChild(t.load.lbox);t.load.lbar=e.createElement("div");t.load.lbar.className="pnlm-lbar";t.load.lbarFill=e.createElement("div");t.load.lbarFill.className="pnlm-lbar-fill";t.load.lbar.appendChild(t.load.lbarFill);t.load.box.appendChild(t.load.lbar);t.load.msg=e.createElement("p");t.load.msg.className="pnlm-lmsg";t.load.box.appendChild(t.load.msg);E.appendChild(t.load.box);t.errorMsg=e.createElement("div");t.errorMsg.className="pnlm-error-msg pnlm-info-box";E.appendChild(t.errorMsg);
t.interactionMsg=e.createElement("div");t.interactionMsg.className="pnlm-interaction-msg pnlm-info-box";E.appendChild(t.interactionMsg);var x={};x.container=e.createElement("div");x.container.className="pnlm-controls-container";E.appendChild(x.container);x.load=e.createElement("button");x.load.className="pnlm-load-button";x.load.addEventListener("click",function(){ga();Z()});E.appendChild(x.load);x.zoom=e.createElement("div");x.zoom.className="pnlm-zoom-controls pnlm-controls";x.zoomIn=e.createElement("div");
x.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control";x.zoomIn.addEventListener("click",function(){J&&(M(b.hfov-5),y())});x.zoom.appendChild(x.zoomIn);x.zoomOut=e.createElement("div");x.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control";x.zoomOut.addEventListener("click",function(){J&&(M(b.hfov+5),y())});x.zoom.appendChild(x.zoomOut);x.container.appendChild(x.zoom);x.fullscreen=e.createElement("div");x.fullscreen.addEventListener("click",qa);x.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control";
(e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled)&&x.container.appendChild(x.fullscreen);x.orientation=e.createElement("div");x.orientation.addEventListener("click",function(b){Q?ka():Na()});x.orientation.addEventListener("mousedown",function(b){b.stopPropagation()});x.orientation.addEventListener("touchstart",function(b){b.stopPropagation()});x.orientation.addEventListener("pointerdown",function(b){b.stopPropagation()});x.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";
var bb=!1;F.DeviceOrientationEvent&&"https:"==location.protocol&&0<=navigator.userAgent.toLowerCase().indexOf("mobi")&&(x.container.appendChild(x.orientation),bb=!0);var Oa=e.createElement("div");Oa.className="pnlm-compass pnlm-controls pnlm-control";E.appendChild(Oa);w.firstScene?V(w.firstScene):w.default&&w.default.firstScene?V(w.default.firstScene):V(null);ga(!0);var sa=[],Ia=[];O.prototype.multiply=function(b){return new O(this.w*b.w-this.x*b.x-this.y*b.y-this.z*b.z,this.x*b.w+this.w*b.x+this.y*
b.z-this.z*b.y,this.y*b.w+this.w*b.y+this.z*b.x-this.x*b.z,this.z*b.w+this.w*b.z+this.x*b.y-this.y*b.x)};O.prototype.toEulerAngles=function(){var b=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),a=Math.asin(2*(this.w*this.y-this.z*this.x)),c=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[b,a,c]};this.isLoaded=function(){return Boolean(J)};this.getPitch=function(){return b.pitch};this.setPitch=function(a,c,d,e){f=Date.now();if(1E-6>=
Math.abs(a-b.pitch))return"function"==typeof d&&d(e),this;(c=c==l?1E3:Number(c))?(P.pitch={startTime:Date.now(),startPosition:b.pitch,endPosition:a,duration:c},"function"==typeof d&&setTimeout(function(){d(e)},c)):b.pitch=a;y();return this};this.getPitchBounds=function(){return[b.minPitch,b.maxPitch]};this.setPitchBounds=function(a){b.minPitch=Math.max(-90,Math.min(a[0],90));b.maxPitch=Math.max(-90,Math.min(a[1],90));return this};this.getYaw=function(){return(b.yaw+540)%360-180};this.setYaw=function(a,
c,d,e){f=Date.now();if(1E-6>=Math.abs(a-b.yaw))return"function"==typeof d&&d(e),this;c=c==l?1E3:Number(c);a=(a+180)%360-180;c?(180<b.yaw-a?a+=360:180<a-b.yaw&&(a-=360),P.yaw={startTime:Date.now(),startPosition:b.yaw,endPosition:a,duration:c},"function"==typeof d&&setTimeout(function(){d(e)},c)):b.yaw=a;y();return this};this.getYawBounds=function(){return[b.minYaw,b.maxYaw]};this.setYawBounds=function(a){b.minYaw=Math.max(-360,Math.min(a[0],360));b.maxYaw=Math.max(-360,Math.min(a[1],360));return this};
this.getHfov=function(){return b.hfov};this.setHfov=function(a,c,d,e){f=Date.now();if(1E-6>=Math.abs(a-b.hfov))return"function"==typeof d&&d(e),this;(c=c==l?1E3:Number(c))?(P.hfov={startTime:Date.now(),startPosition:b.hfov,endPosition:oa(a),duration:c},"function"==typeof d&&setTimeout(function(){d(e)},c)):M(a);y();return this};this.getHfovBounds=function(){return[b.minHfov,b.maxHfov]};this.setHfovBounds=function(a){b.minHfov=Math.max(0,a[0]);b.maxHfov=Math.max(0,a[1]);return this};this.lookAt=function(a,
c,d,e,f,g){e=e==l?1E3:Number(e);a!==l&&1E-6<Math.abs(a-b.pitch)&&(this.setPitch(a,e,f,g),f=l);c!==l&&1E-6<Math.abs(c-b.yaw)&&(this.setYaw(c,e,f,g),f=l);d!==l&&1E-6<Math.abs(d-b.hfov)&&(this.setHfov(d,e,f,g),f=l);"function"==typeof f&&f(g);return this};this.getNorthOffset=function(){return b.northOffset};this.setNorthOffset=function(a){b.northOffset=Math.min(360,Math.max(0,a));y();return this};this.getHorizonRoll=function(){return b.horizonRoll};this.setHorizonRoll=function(a){b.horizonRoll=Math.min(90,
Math.max(-90,a));C.setPose(b.horizonPitch*Math.PI/180,b.horizonRoll*Math.PI/180);y();return this};this.getHorizonPitch=function(){return b.horizonPitch};this.setHorizonPitch=function(a){b.horizonPitch=Math.min(90,Math.max(-90,a));C.setPose(b.horizonPitch*Math.PI/180,b.horizonRoll*Math.PI/180);y();return this};this.startAutoRotate=function(a,c,d,e){a=a||$||1;c=c===l?Ma:c;d=d===l?Ba:d;b.autoRotate=a;e!==l&&(b.autoRotateInactivityDelay=e);S.lookAt(c,l,d,3E3);y();return this};this.stopAutoRotate=function(){$=
b.autoRotate?b.autoRotate:$;b.autoRotate=!1;b.autoRotateInactivityDelay=-1;return this};this.stopMovement=function(){ra();v={yaw:0,pitch:0,hfov:0}};this.getRenderer=function(){return C};this.setUpdate=function(a){Wa=!0===a;C===l?ja():y();return this};this.mouseEventToCoords=function(a){return xa(a)};this.loadScene=function(a,b,c,d){!1!==J&&Fa(a,b,c,d);return this};this.getScene=function(){return b.scene};this.addScene=function(a,b){w.scenes[a]=b;return this};this.removeScene=function(a){if(b.scene===
a||!w.scenes.hasOwnProperty(a))return!1;delete w.scenes[a];return!0};this.toggleFullscreen=function(){qa();return this};this.getConfig=function(){return b};this.getContainer=function(){return s};this.addHotSpot=function(a,c){if(c===l&&b.scene===l)b.hotSpots.push(a);else{var d=c!==l?c:b.scene;if(w.scenes.hasOwnProperty(d))w.scenes[d].hasOwnProperty("hotSpots")||(w.scenes[d].hotSpots=[],d==b.scene&&(b.hotSpots=w.scenes[d].hotSpots)),w.scenes[d].hotSpots.push(a);else throw"Invalid scene ID!";}if(c===
l||b.scene==c)Ha(a),J&&Aa(a);return this};this.removeHotSpot=function(a,c){if(c===l||b.scene==c){if(!b.hotSpots)return!1;for(var d=0;d<b.hotSpots.length;d++)if(b.hotSpots[d].hasOwnProperty("id")&&b.hotSpots[d].id===a){for(var e=b.hotSpots[d].div;e.parentNode!=E;)e=e.parentNode;E.removeChild(e);delete b.hotSpots[d].div;b.hotSpots.splice(d,1);return!0}}else if(w.scenes.hasOwnProperty(c)){if(!w.scenes[c].hasOwnProperty("hotSpots"))return!1;for(d=0;d<w.scenes[c].hotSpots.length;d++)if(w.scenes[c].hotSpots[d].hasOwnProperty("id")&&
w.scenes[c].hotSpots[d].id===a)return w.scenes[c].hotSpots.splice(d,1),!0}else return!1};this.resize=function(){C&&a()};this.isOrientationSupported=function(){return bb||!1};this.stopOrientation=function(){ka()};this.startOrientation=function(){Na()};this.isOrientationActive=function(){return Boolean(Q)};this.on=function(a,b){X[a]=X[a]||[];X[a].push(b);return this};this.off=function(a,b){if(!a)return X={},this;if(b){var c=X[a].indexOf(b);0<=c&&X[a].splice(c,1);0==X[a].length&&delete X[a]}else delete X[a];
return this};this.destroy=function(){db=!0;clearTimeout(Va);ca&&ca.abort();if(Array.isArray(z))for(var b=0;6>b;b++)z[b].src="";C&&C.destroy();G&&(e.removeEventListener("mousemove",Ea,!1),e.removeEventListener("mouseup",ya,!1),s.removeEventListener("mozfullscreenchange",T,!1),s.removeEventListener("webkitfullscreenchange",T,!1),s.removeEventListener("msfullscreenchange",T,!1),s.removeEventListener("fullscreenchange",T,!1),Xa?Xa.disconnect():(F.removeEventListener("resize",a,!1),F.removeEventListener("orientationchange",
a,!1)),s.removeEventListener("keydown",pa,!1),s.removeEventListener("keyup",Ga,!1),s.removeEventListener("blur",za,!1),e.removeEventListener("mouseleave",ya,!1));s.innerHTML="";s.classList.remove("pnlm-container")}}return{viewer:function(e,l){return new ta(e,l)}}}(window,document);
